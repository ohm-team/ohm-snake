/*! For license information please see main.ac91ebcbca8c42a65d1a.js.LICENSE.txt */
!function(){var e={608:function(e){var t,o,n,i,a;t=console.log,o=console.warn,n=console.error,i=console.debug,a={unbind:function(){console.log=t,console.warn=o,console.error=n,console.debug=i},bind:function(e,a){if("function"!=typeof e)return console.error("You must pass a valid callback function."),!1;a=Boolean(a);const r="info",s="warn",d="error",c="debug";console.log=console.info=function(){t&&(a||t.call(console,...arguments),e(r,arguments))},console.warn=function(){o&&(a||o.call(console,...arguments),e(s,arguments))},console.error=function(){n&&(a||n.call(console,...arguments),e(d,arguments))},console.debug=function(){i&&(a||i.call(console,...arguments),e(c,arguments))}}},void 0!==e.exports?e.exports=a:window&&"object"==typeof window?window.ConsoleSubscriber=a:console.error("Failed to export module.")},505:function(e,t,o){"use strict";o.r(t),o.d(t,{ImageCapture:function(){return n}});let n=window.ImageCapture;void 0===n&&(n=class{constructor(e){if("video"!==e.kind)throw new DOMException("NotSupportedError");this._videoStreamTrack=e,"readyState"in this._videoStreamTrack||(this._videoStreamTrack.readyState="live"),this._previewStream=new MediaStream([e]),this.videoElement=document.createElement("video"),this.videoElementPlaying=new Promise((e=>{this.videoElement.addEventListener("playing",e)})),HTMLMediaElement?this.videoElement.srcObject=this._previewStream:this.videoElement.src=URL.createObjectURL(this._previewStream),this.videoElement.muted=!0,this.videoElement.setAttribute("playsinline",""),this.videoElement.play(),this.canvasElement=document.createElement("canvas"),this.canvas2dContext=this.canvasElement.getContext("2d")}get videoStreamTrack(){return this._videoStreamTrack}getPhotoCapabilities(){return new Promise((function(e,t){const o={current:0,min:0,max:0};e({exposureCompensation:o,exposureMode:"none",fillLightMode:"none",focusMode:"none",imageHeight:o,imageWidth:o,iso:o,redEyeReduction:!1,whiteBalanceMode:"none",zoom:o}),t(new DOMException("OperationError"))}))}setOptions(e={}){return new Promise((function(e,t){}))}takePhoto(){const e=this;return new Promise((function(t,o){if("live"!==e._videoStreamTrack.readyState)return o(new DOMException("InvalidStateError"));e.videoElementPlaying.then((()=>{try{e.canvasElement.width=e.videoElement.videoWidth,e.canvasElement.height=e.videoElement.videoHeight,e.canvas2dContext.drawImage(e.videoElement,0,0),e.canvasElement.toBlob(t)}catch(e){o(new DOMException("UnknownError"))}}))}))}grabFrame(){const e=this;return new Promise((function(t,o){if("live"!==e._videoStreamTrack.readyState)return o(new DOMException("InvalidStateError"));e.videoElementPlaying.then((()=>{try{e.canvasElement.width=e.videoElement.videoWidth,e.canvasElement.height=e.videoElement.videoHeight,e.canvas2dContext.drawImage(e.videoElement,0,0),t(window.createImageBitmap(e.canvasElement))}catch(e){o(new DOMException("UnknownError"))}}))}))}}),window.ImageCapture=n},90:function(e,t,o){"use strict";o.r(t)},688:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.enableMobileConsole=void 0;const i=n(o(608));t.enableMobileConsole=()=>{const e=[];i.default.bind(((t,o)=>{5===e.length&&e.shift(),e.push({category:t,message:o[0]}),document.getElementById("console").innerHTML=e.map((e=>`<p>${e.message}</p>`)).join("")}))}},203:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},607:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=o(688),a=o(341),r=o(717),s=o(614);o(203),o(90);const d=$("#startButton"),c=$("#preloader"),l=$("#start"),h=$("#game"),u=$("#nameInput"),m=e=>n(void 0,void 0,void 0,(function*(){try{console.log("start game"),h.show(),l.hide(),s.setUpUser(e),s.saySomething(s.PHRASES.HELLO),yield r.takePhoto()}catch(e){console.log(e),alert(e)}}));window.onload=()=>n(void 0,void 0,void 0,(function*(){i.enableMobileConsole(),yield n(void 0,void 0,void 0,(function*(){c.show(),h.hide(),l.hide(),yield n(void 0,void 0,void 0,(function*(){return Promise.all([r.initImageCapture(),s.initVoiceService(),a.initHeadControl()]).then((()=>{c.hide(),l.show()})).catch((e=>{console.log(e)}))})),u.on("input",(()=>{u.val()?d.prop("disabled",!1):d.prop("disabled",!0)})),d.click((()=>n(void 0,void 0,void 0,(function*(){yield m(u.val())}))))}))}))},800:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o={mouseOpeningTreshold:.6,mouseClosingTreshold:.5,headMovementStartedTreshold:.15,headMovementStoppedTreshold:.08};class n extends EventTarget{constructor(e,t){super(),this.movementLocks={vertical:!1,horizontal:!1,mouseOpened:!1},this.state={isLoaded:!1,isDetected:!1,isEnabled:!1},this.gl=null,this.cv=null,this.videoTexture=null,this.videoTransformMat2=null,this.glHeadSearchDrawShaderProgram=null,this.headSearchUniformXys=null,this.headSearchUniformVideoTransformMat2=null,this.handleMouseOpening=e=>{if(e.ry<-1*this.settings.headMovementStartedTreshold||e.ry>this.settings.headMovementStartedTreshold)return;let t=5*(e.expressions[0]-.2);return t=Math.min(Math.max(t,0),1),t>this.settings.mouseOpeningTreshold&&!this.movementLocks.mouseOpened?(this.movementLocks.mouseOpened=!0,void this.dispatchEvent(new Event("mouse opened"))):t<this.settings.mouseClosingTreshold&&this.movementLocks.mouseOpened?(this.movementLocks.mouseOpened=!1,void this.dispatchEvent(new Event("mouse closed"))):void 0},this.handleMove=e=>{0!==e.rx&&this.handleAxisMovement({axis:"vertical",axisPosition:e.rx,maxValue:"down",minValue:"up"}),0!==e.ry&&this.handleAxisMovement({axis:"horizontal",axisPosition:e.ry,maxValue:"left",minValue:"right"})},this.handleAxisMovement=({axis:e,axisPosition:t,maxValue:o,minValue:n})=>t<-1*this.settings.headMovementStartedTreshold&&!this.movementLocks[e]?(this.movementLocks[e]=!0,void this.dispatchEvent(new Event(n))):t>this.settings.headMovementStartedTreshold&&!this.movementLocks[e]?(this.movementLocks[e]=!0,void this.dispatchEvent(new Event(o))):void(t>-1*this.settings.headMovementStoppedTreshold&&t<this.settings.headMovementStoppedTreshold&&(this.movementLocks[e]=!1)),this.settings=Object.assign(Object.assign({},o),t),window.JEEFACEFILTERAPI.init({canvasId:e,NNCPath:"./vendor/",animateDelay:20,callbackReady:(e,o)=>{if(e)return(e="WEBCAM_UNAVAILABLE")?void(t.onCameraPersmissionFailed&&t.onCameraPersmissionFailed()):void console.error("AN ERROR HAPPENS. SORRY BRO :( . ERR =",e);this.gl=o.GL,this.videoTexture=o.videoTexture,this.videoTransformMat2=o.videoTransformMat2,this.cv=o.canvasElement,this.initHeadSearchDraw(),this.state.isLoaded=!0,t.onReady&&t.onReady()},callbackTrack:e=>{this.state.isEnabled&&(this.drawHeadSearch(e),this.handleMove(e),this.handleMouseOpening(e))}})}toggle(e){return this.state.isEnabled===e||(this.state.isEnabled=e),!0}compileShader(e,t,o){const n=this.gl.createShader(t);return this.gl.shaderSource(n,e),this.gl.compileShader(n),this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)?n:(alert("ERROR IN "+o+" SHADER: "+this.gl.getShaderInfoLog(n)),null)}initHeadSearchDraw(){const e=this.compileShader("\n      attribute vec2 aat_position;\n      varying vec2 vUV;\n      \n      void main(void) {\n        gl_Position = vec4(aat_position, 0., 1.);\n        vUV = 0.5 + 0.5 * aat_position;\n        vUV.x = 1.-vUV.x; // mirror diplay\n      }",this.gl.VERTEX_SHADER,"VERTEX"),t=this.compileShader("\n      precision lowp float;\n      varying vec2 vUV;\n      \n      uniform sampler2D samplerVideo;\n      uniform mat2 videoTransformMat2;\n      uniform vec3 uxys;\n      \n      void main(void) {\n        vec2 uvVideoCentered = 2.0 * videoTransformMat2 * (vUV - 0.5);\n        vec2 uvVideo = uvVideoCentered + 0.5;\n        vec3 colorVideo = texture2D(samplerVideo, uvVideo).rgb;\n        vec2 pos = vUV*2.-vec2(1.,1.);\n        vec2 isInside = step(uxys.xy-uxys.z*vec2(1.,1.), pos);\n        isInside *= step(pos, uxys.xy+uxys.z*vec2(1.,1.));\n        vec2 blendCenterFactor = abs(pos-uxys.xy) / uxys.z;\n        float alpha = isInside.x * isInside.y * pow(max(blendCenterFactor.x, blendCenterFactor.y), 3.);\n        vec3 color = mix(colorVideo, vec3(0.,0.6,1.), alpha);\n        gl_FragColor = vec4(color,1.);\n      }",this.gl.FRAGMENT_SHADER,"FRAGMENT");this.glHeadSearchDrawShaderProgram=this.gl.createProgram(),this.gl.attachShader(this.glHeadSearchDrawShaderProgram,e),this.gl.attachShader(this.glHeadSearchDrawShaderProgram,t),this.gl.linkProgram(this.glHeadSearchDrawShaderProgram);const o=this.gl.getUniformLocation(this.glHeadSearchDrawShaderProgram,"samplerVideo");this.headSearchUniformXys=this.gl.getUniformLocation(this.glHeadSearchDrawShaderProgram,"uxys"),this.headSearchUniformVideoTransformMat2=this.gl.getUniformLocation(this.glHeadSearchDrawShaderProgram,"videoTransformMat2"),this.gl.useProgram(this.glHeadSearchDrawShaderProgram),this.gl.uniform1i(o,0)}drawHeadSearch(e){this.gl.viewport(0,0,this.cv.width,this.cv.height),this.gl.useProgram(this.glHeadSearchDrawShaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.videoTexture),this.gl.uniform3f(this.headSearchUniformXys,e.x,e.y,e.s),this.gl.uniformMatrix2fv(this.headSearchUniformVideoTransformMat2,!1,this.videoTransformMat2),this.gl.drawElements(this.gl.TRIANGLES,3,this.gl.UNSIGNED_SHORT,0)}}t.default=n},341:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.initHeadControl=t.default=void 0;const i=n(o(800));var a=o(800);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}}),t.initHeadControl=()=>new Promise(((e,t)=>{const o=new i.default("head-preview",{onReady:()=>{console.log("head control is ready"),e()},onCameraPersmissionFailed:()=>alert("This game is head-controlled. You need to enable camera to play the game.")});o.toggle(!0),o.addEventListener("mouse opened",(()=>console.log("mouse opened"))),o.addEventListener("mouse closed",(()=>console.log("mouse closed"))),o.addEventListener("left",(()=>console.log("left"))),o.addEventListener("right",(()=>console.log("right")))}))},8:function(){var e=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}d((n=n.apply(e,t||[])).next())}))};"createImageBitmap"in window||(window.createImageBitmap=function(t){return e(this,void 0,void 0,(function*(){return new Promise(((e,o)=>{let n=document.createElement("img");n.addEventListener("load",(function(){e(this)})),n.src=URL.createObjectURL(t)}))}))})},717:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}d((n=n.apply(e,t||[])).next())}))};let i;Object.defineProperty(t,"__esModule",{value:!0}),t.initImageCapture=t.takePhoto=void 0,o(505),o(8);let a=!1;t.takePhoto=()=>n(void 0,void 0,void 0,(function*(){i&&(yield i.takePhoto().then((e=>createImageBitmap(e))).then((e=>{const t=document.querySelector("#takePhotoCanvas");t.style.display="block",function(e,t){e.width=getComputedStyle(e).width.split("px")[0],e.height=getComputedStyle(e).height.split("px")[0];let o=Math.min(e.width/t.width,e.height/t.height),n=(e.width-t.width*o)/2,i=(e.height-t.height*o)/2;e.getContext("2d").clearRect(0,0,e.width,e.height),e.getContext("2d").drawImage(t,0,0,t.width,t.height,n,i,t.width*o,t.height*o)}(t,e)})))})),t.initImageCapture=()=>n(void 0,void 0,void 0,(function*(){return a?Promise.resolve():(a=!0,navigator.mediaDevices.getUserMedia({video:!0}).then((e=>{try{const t=e.getVideoTracks()[0];i=new ImageCapture(t),console.log("image capture initied")}catch(e){throw e}})).catch((()=>{alert("Image capture is not supported on your device :(")})))}))},614:function(e,t){"use strict";var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}d((n=n.apply(e,t||[])).next())}))};let n;Object.defineProperty(t,"__esModule",{value:!0}),t.saySomething=t.setUpUser=t.PHRASES=t.initVoiceService=void 0,t.initVoiceService=()=>o(void 0,void 0,void 0,(function*(){return new Promise((e=>{setTimeout((()=>{n=window.speechSynthesis.getVoices().find((({lang:e})=>"en-GB"===e)),n?(console.log("voice init"),e(!0)):t.initVoiceService().then(e)}),500)}))})),t.PHRASES={HELLO:"`Hi, %username%. Have a good game",RIGHT:"Good right turn, %username%"};let i="";t.setUpUser=e=>{i=e},t.saySomething=e=>{if(!n)return;const t=new SpeechSynthesisUtterance(e.replace("%username%",i));t.voice=n,t.volume=1,t.pitch=1,t.rate=1,speechSynthesis.cancel(),speechSynthesis.speak(t)}}},t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o(607)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vaG0tc25ha2UvLi9ub2RlX21vZHVsZXMvY29uc29sZS1zdWJzY3JpYmVyL2luZGV4LmpzIiwid2VicGFjazovL29obS1zbmFrZS8uL25vZGVfbW9kdWxlcy9pbWFnZS1jYXB0dXJlL3NyYy9pbWFnZWNhcHR1cmUuanMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL2NvbnNvbGUudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL2RlY2xhcmUudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL29obS1zbmFrZS8uL3NyYy9zZXJ2aWNlcy9IZWFkQ29udHJvbFNlcnZpY2UvSGVhZENvbnRyb2xTZXJ2aWNlLnRzIiwid2VicGFjazovL29obS1zbmFrZS8uL3NyYy9zZXJ2aWNlcy9IZWFkQ29udHJvbFNlcnZpY2UvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL3NlcnZpY2VzL0ltYWdlQ2FwdHVyZVNlcnZpY2UvYml0bWFwUG9seWZpbGwudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL3NlcnZpY2VzL0ltYWdlQ2FwdHVyZVNlcnZpY2UvaW1hZ2VDYXB0dXJlLnRzIiwid2VicGFjazovL29obS1zbmFrZS8uL3NyYy9zZXJ2aWNlcy9Wb2ljZVNlcnZpY2Uvdm9pY2UudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL29obS1zbmFrZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6WyJfbG9nIiwiX3dhcm4iLCJfZXJyb3IiLCJfZGVidWciLCJDb25zb2xlU3Vic2NyaWJlciIsImNvbnNvbGUiLCJsb2ciLCJ3YXJuIiwiZXJyb3IiLCJkZWJ1ZyIsInVuYmluZCIsImJpbmQiLCJjYiIsInByZXZlbnRMb2dnaW5nIiwiQm9vbGVhbiIsIkNBVEVHT1JZX0lORk8iLCJDQVRFR09SWV9XQVJOIiwiQ0FURUdPUllfRVJST1IiLCJDQVRFR09SWV9ERUJVRyIsImluZm8iLCJjYWxsIiwiYXJndW1lbnRzIiwibW9kdWxlIiwiZXhwb3J0cyIsIndpbmRvdyIsIkltYWdlQ2FwdHVyZSIsInZpZGVvU3RyZWFtVHJhY2siLCJraW5kIiwiRE9NRXhjZXB0aW9uIiwidGhpcyIsIl92aWRlb1N0cmVhbVRyYWNrIiwicmVhZHlTdGF0ZSIsIl9wcmV2aWV3U3RyZWFtIiwiTWVkaWFTdHJlYW0iLCJ2aWRlb0VsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ2aWRlb0VsZW1lbnRQbGF5aW5nIiwiUHJvbWlzZSIsInJlc29sdmUiLCJhZGRFdmVudExpc3RlbmVyIiwiSFRNTE1lZGlhRWxlbWVudCIsInNyY09iamVjdCIsInNyYyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIm11dGVkIiwic2V0QXR0cmlidXRlIiwicGxheSIsImNhbnZhc0VsZW1lbnQiLCJjYW52YXMyZENvbnRleHQiLCJnZXRDb250ZXh0IiwicmVqZWN0IiwiTWVkaWFTZXR0aW5nc1JhbmdlIiwiY3VycmVudCIsIm1pbiIsIm1heCIsImV4cG9zdXJlQ29tcGVuc2F0aW9uIiwiZXhwb3N1cmVNb2RlIiwiZmlsbExpZ2h0TW9kZSIsImZvY3VzTW9kZSIsImltYWdlSGVpZ2h0IiwiaW1hZ2VXaWR0aCIsImlzbyIsInJlZEV5ZVJlZHVjdGlvbiIsIndoaXRlQmFsYW5jZU1vZGUiLCJ6b29tIiwicGhvdG9TZXR0aW5ncyIsInNlbGYiLCJ0aGVuIiwid2lkdGgiLCJ2aWRlb1dpZHRoIiwiaGVpZ2h0IiwidmlkZW9IZWlnaHQiLCJkcmF3SW1hZ2UiLCJ0b0Jsb2IiLCJjcmVhdGVJbWFnZUJpdG1hcCIsIl9faW1wb3J0RGVmYXVsdCIsIm1vZCIsIl9fZXNNb2R1bGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiZW5hYmxlTW9iaWxlQ29uc29sZSIsImNvbnNvbGVfc3Vic2NyaWJlcl8xIiwiYnVmZmVyIiwiZGVmYXVsdCIsImNhdGVnb3J5IiwiYXJncyIsImxlbmd0aCIsInNoaWZ0IiwicHVzaCIsIm1lc3NhZ2UiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsIm1hcCIsIm0iLCJqb2luIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiZnVsZmlsbGVkIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwiYXBwbHkiLCJjb25zb2xlXzEiLCJIZWFkQ29udHJvbFNlcnZpY2VfMSIsImltYWdlQ2FwdHVyZV8xIiwidm9pY2VfMSIsInN0YXJ0QnV0dG9uIiwiJCIsInByZWxvYWRlciIsInN0YXJ0U2NyZWVuIiwiZ2FtZVNjcmVlbiIsIm5hbWVJbnB1dCIsInN0YXJ0R2FtZSIsInBsYXllck5hbWUiLCJzaG93IiwiaGlkZSIsInNldFVwVXNlciIsInNheVNvbWV0aGluZyIsIlBIUkFTRVMiLCJIRUxMTyIsInRha2VQaG90byIsImFsZXJ0Iiwib25sb2FkIiwiYWxsIiwiaW5pdEltYWdlQ2FwdHVyZSIsImluaXRWb2ljZVNlcnZpY2UiLCJpbml0SGVhZENvbnRyb2wiLCJjYXRjaCIsIm9uIiwidmFsIiwicHJvcCIsImNsaWNrIiwiZGVmYXVsdFNldHRpbmdzIiwibW91c2VPcGVuaW5nVHJlc2hvbGQiLCJtb3VzZUNsb3NpbmdUcmVzaG9sZCIsImhlYWRNb3ZlbWVudFN0YXJ0ZWRUcmVzaG9sZCIsImhlYWRNb3ZlbWVudFN0b3BwZWRUcmVzaG9sZCIsIkhlYWRDb250cm9sU2VydmljZSIsIkV2ZW50VGFyZ2V0IiwiY2FudmFzSWQiLCJzZXR0aW5ncyIsInN1cGVyIiwibW92ZW1lbnRMb2NrcyIsInZlcnRpY2FsIiwiaG9yaXpvbnRhbCIsIm1vdXNlT3BlbmVkIiwic3RhdGUiLCJpc0xvYWRlZCIsImlzRGV0ZWN0ZWQiLCJpc0VuYWJsZWQiLCJnbCIsImN2IiwidmlkZW9UZXh0dXJlIiwidmlkZW9UcmFuc2Zvcm1NYXQyIiwiZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0iLCJoZWFkU2VhcmNoVW5pZm9ybVh5cyIsImhlYWRTZWFyY2hVbmlmb3JtVmlkZW9UcmFuc2Zvcm1NYXQyIiwiaGFuZGxlTW91c2VPcGVuaW5nIiwiZGV0ZWN0U3RhdGUiLCJyeSIsIm1vdXRoT3BlbmluZyIsImV4cHJlc3Npb25zIiwiTWF0aCIsImRpc3BhdGNoRXZlbnQiLCJFdmVudCIsImhhbmRsZU1vdmUiLCJtdiIsInJ4IiwiaGFuZGxlQXhpc01vdmVtZW50IiwiYXhpcyIsImF4aXNQb3NpdGlvbiIsIm1heFZhbHVlIiwibWluVmFsdWUiLCJhc3NpZ24iLCJKRUVGQUNFRklMVEVSQVBJIiwiaW5pdCIsIk5OQ1BhdGgiLCJhbmltYXRlRGVsYXkiLCJjYWxsYmFja1JlYWR5IiwiZXJyQ29kZSIsImplZUZhY2VGaWx0ZXJPYmoiLCJvbkNhbWVyYVBlcnNtaXNzaW9uRmFpbGVkIiwiaW5pdEhlYWRTZWFyY2hEcmF3Iiwib25SZWFkeSIsImNhbGxiYWNrVHJhY2siLCJkcmF3SGVhZFNlYXJjaCIsInNvdXJjZSIsImdsVHlwZSIsInR5cGVTdHJpbmciLCJnbFNoYWRlciIsImNyZWF0ZVNoYWRlciIsInNoYWRlclNvdXJjZSIsImNvbXBpbGVTaGFkZXIiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsImdldFNoYWRlckluZm9Mb2ciLCJnbFNoYWRlclZlcnRleCIsIlZFUlRFWF9TSEFERVIiLCJnbFNoYWRlckZyYWdtZW50IiwiRlJBR01FTlRfU0hBREVSIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwic2FtcGxlclZpZGVvIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwidXNlUHJvZ3JhbSIsInVuaWZvcm0xaSIsInZpZXdwb3J0IiwiYWN0aXZlVGV4dHVyZSIsIlRFWFRVUkUwIiwiYmluZFRleHR1cmUiLCJURVhUVVJFXzJEIiwidW5pZm9ybTNmIiwieCIsInkiLCJzIiwidW5pZm9ybU1hdHJpeDJmdiIsImRyYXdFbGVtZW50cyIsIlRSSUFOR0xFUyIsIlVOU0lHTkVEX1NIT1JUIiwiSGVhZENvbnRyb2xTZXJ2aWNlXzIiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiaGVhZENvbnRyb2xTZXJ2aWNlIiwidG9nZ2xlIiwiYmxvYiIsImltZyIsImltYWdlQ2FwdHVyZSIsImlzSW5pdCIsImltYWdlQml0bWFwIiwiY2FudmFzIiwicXVlcnlTZWxlY3RvciIsInN0eWxlIiwiZGlzcGxheSIsImdldENvbXB1dGVkU3R5bGUiLCJzcGxpdCIsInJhdGlvIiwiY2xlYXJSZWN0IiwiZHJhd0NhbnZhcyIsIm5hdmlnYXRvciIsIm1lZGlhRGV2aWNlcyIsImdldFVzZXJNZWRpYSIsInZpZGVvIiwibWVkaWFTdHJlYW0iLCJ0cmFjayIsImdldFZpZGVvVHJhY2tzIiwiVk9JQ0UiLCJzZXRUaW1lb3V0Iiwic3BlZWNoU3ludGhlc2lzIiwiZ2V0Vm9pY2VzIiwiZmluZCIsImxhbmciLCJSSUdIVCIsInVzZXJOYW1lIiwibmFtZSIsInRleHQiLCJ1dHRlcmFuY2UiLCJTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UiLCJyZXBsYWNlIiwidm9pY2UiLCJ2b2x1bWUiLCJwaXRjaCIsInJhdGUiLCJjYW5jZWwiLCJzcGVhayIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJvYmoiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyJdLCJtYXBwaW5ncyI6IjttQ0FLQSxJQUNRQSxFQUNBQyxFQUNBQyxFQUNBQyxFQUVBQyxFQUxBSixFQUFPSyxRQUFRQyxJQUNmTCxFQUFRSSxRQUFRRSxLQUNoQkwsRUFBU0csUUFBUUcsTUFDakJMLEVBQVNFLFFBQVFJLE1BRWpCTCxFQUFvQixDQUNwQk0sT0FBUSxXQUNKTCxRQUFRQyxJQUFNTixFQUNkSyxRQUFRRSxLQUFPTixFQUNmSSxRQUFRRyxNQUFRTixFQUNoQkcsUUFBUUksTUFBUU4sR0FFcEJRLEtBQU0sU0FBU0MsRUFBSUMsR0FDZixHQUFrQixtQkFBUEQsRUFFUCxPQURBUCxRQUFRRyxNQUFNLDZDQUNQLEVBR1hLLEVBQWlCQyxRQUFRRCxHQUV6QixNQUFNRSxFQUFnQixPQUNoQkMsRUFBZ0IsT0FDaEJDLEVBQWlCLFFBQ2pCQyxFQUFpQixRQUV2QmIsUUFBUUMsSUFBTUQsUUFBUWMsS0FBTyxXQUNyQm5CLElBQ0thLEdBQ0RiLEVBQUtvQixLQUFLZixXQUFZZ0IsV0FFMUJULEVBQUdHLEVBQWVNLGFBSTFCaEIsUUFBUUUsS0FBTyxXQUNQTixJQUNLWSxHQUNEWixFQUFNbUIsS0FBS2YsV0FBWWdCLFdBRTNCVCxFQUFHSSxFQUFlSyxhQUkxQmhCLFFBQVFHLE1BQVEsV0FDUk4sSUFDS1csR0FDRFgsRUFBT2tCLEtBQUtmLFdBQVlnQixXQUU1QlQsRUFBR0ssRUFBZ0JJLGFBSTNCaEIsUUFBUUksTUFBUSxXQUNSTixJQUNLVSxHQUNEVixFQUFPaUIsS0FBS2YsV0FBWWdCLFdBRTVCVCxFQUFHTSxFQUFnQkcsb0JBUTRCLElBQW5CQyxFQUFPQyxRQUMvQ0QsRUFBT0MsUUFBVW5CLEVBRVpvQixRQUE0QixpQkFBWEEsT0FDdEJBLE9BQU9wQixrQkFBb0JBLEVBRzNCQyxRQUFRRyxNQUFNLDZCLG1GQzNEZixJQUFJaUIsRUFBZUQsT0FBT0Msa0JBRUwsSUFBakJBLElBQ1RBLEVBQWUsTUFPYixZQUFZQyxHQUNWLEdBQThCLFVBQTFCQSxFQUFpQkMsS0FDbkIsTUFBTSxJQUFJQyxhQUFhLHFCQUV6QkMsS0FBS0Msa0JBQW9CSixFQUNuQixlQUFnQkcsS0FBS0Msb0JBRXpCRCxLQUFLQyxrQkFBa0JDLFdBQWEsUUFJdENGLEtBQUtHLGVBQWlCLElBQUlDLFlBQVksQ0FBQ1AsSUFDdkNHLEtBQUtLLGFBQWVDLFNBQVNDLGNBQWMsU0FDM0NQLEtBQUtRLG9CQUFzQixJQUFJQyxTQUFRQyxJQUNyQ1YsS0FBS0ssYUFBYU0saUJBQWlCLFVBQVdELE1BRTVDRSxpQkFDRlosS0FBS0ssYUFBYVEsVUFBWWIsS0FBS0csZUFFbkNILEtBQUtLLGFBQWFTLElBQU1DLElBQUlDLGdCQUFnQmhCLEtBQUtHLGdCQUVuREgsS0FBS0ssYUFBYVksT0FBUSxFQUMxQmpCLEtBQUtLLGFBQWFhLGFBQWEsY0FBZSxJQUM5Q2xCLEtBQUtLLGFBQWFjLE9BRWxCbkIsS0FBS29CLGNBQWdCZCxTQUFTQyxjQUFjLFVBRTVDUCxLQUFLcUIsZ0JBQWtCckIsS0FBS29CLGNBQWNFLFdBQVcsTUFPdkQsdUJBQ0UsT0FBT3RCLEtBQUtDLGtCQVNkLHVCQUNFLE9BQU8sSUFBSVEsU0FBUSxTQUFxQkMsRUFBU2EsR0FFL0MsTUFBTUMsRUFBcUIsQ0FDekJDLFFBQVMsRUFBR0MsSUFBSyxFQUFHQyxJQUFLLEdBRTNCakIsRUFBUSxDQUNOa0IscUJBQXNCSixFQUN0QkssYUFBYyxPQUNkQyxjQUFlLE9BQ2ZDLFVBQVcsT0FDWEMsWUFBYVIsRUFDYlMsV0FBWVQsRUFDWlUsSUFBS1YsRUFDTFcsaUJBQWlCLEVBQ2pCQyxpQkFBa0IsT0FDbEJDLEtBQU1iLElBRVJELEVBQU8sSUFBSXhCLGFBQWEsc0JBUzVCLFdBQVd1QyxFQUFnQixJQUN6QixPQUFPLElBQUk3QixTQUFRLFNBQW9CQyxFQUFTYSxPQVdsRCxZQUNFLE1BQU1nQixFQUFPdkMsS0FDYixPQUFPLElBQUlTLFNBQVEsU0FBb0JDLEVBQVNhLEdBRzlDLEdBQTBDLFNBQXRDZ0IsRUFBS3RDLGtCQUFrQkMsV0FDekIsT0FBT3FCLEVBQU8sSUFBSXhCLGFBQWEsc0JBRWpDd0MsRUFBSy9CLG9CQUFvQmdDLE1BQUssS0FDNUIsSUFDRUQsRUFBS25CLGNBQWNxQixNQUFRRixFQUFLbEMsYUFBYXFDLFdBQzdDSCxFQUFLbkIsY0FBY3VCLE9BQVNKLEVBQUtsQyxhQUFhdUMsWUFDOUNMLEVBQUtsQixnQkFBZ0J3QixVQUFVTixFQUFLbEMsYUFBYyxFQUFHLEdBQ3JEa0MsRUFBS25CLGNBQWMwQixPQUFPcEMsR0FDMUIsTUFBTy9CLEdBQ1A0QyxFQUFPLElBQUl4QixhQUFhLHdCQVloQyxZQUNFLE1BQU13QyxFQUFPdkMsS0FDYixPQUFPLElBQUlTLFNBQVEsU0FBb0JDLEVBQVNhLEdBRzlDLEdBQTBDLFNBQXRDZ0IsRUFBS3RDLGtCQUFrQkMsV0FDekIsT0FBT3FCLEVBQU8sSUFBSXhCLGFBQWEsc0JBRWpDd0MsRUFBSy9CLG9CQUFvQmdDLE1BQUssS0FDNUIsSUFDRUQsRUFBS25CLGNBQWNxQixNQUFRRixFQUFLbEMsYUFBYXFDLFdBQzdDSCxFQUFLbkIsY0FBY3VCLE9BQVNKLEVBQUtsQyxhQUFhdUMsWUFDOUNMLEVBQUtsQixnQkFBZ0J3QixVQUFVTixFQUFLbEMsYUFBYyxFQUFHLEdBRXJESyxFQUFRZixPQUFPb0Qsa0JBQWtCUixFQUFLbkIsZ0JBQ3RDLE1BQU96QyxHQUNQNEMsRUFBTyxJQUFJeEIsYUFBYSwyQkFRcENKLE9BQU9DLGFBQWVBLEcseUVDbEt0QixJQUFJb0QsRUFBbUJoRCxNQUFRQSxLQUFLZ0QsaUJBQW9CLFNBQVVDLEdBQzlELE9BQVFBLEdBQU9BLEVBQUlDLFdBQWNELEVBQU0sQ0FBRSxRQUFXQSxJQUV4REUsT0FBT0MsZUFBZTFELEVBQVMsYUFBYyxDQUFFMkQsT0FBTyxJQUN0RDNELEVBQVE0RCx5QkFBc0IsRUFDOUIsTUFBTUMsRUFBdUJQLEVBQWdCLEVBQVEsTUFXckR0RCxFQUFRNEQsb0JBVm9CLEtBQ3hCLE1BQU1FLEVBQVMsR0FDZkQsRUFBcUJFLFFBQVEzRSxNQUFLLENBQUM0RSxFQUFVQyxLQUNuQixJQUFsQkgsRUFBT0ksUUFDUEosRUFBT0ssUUFFWEwsRUFBT00sS0FBSyxDQUFFSixXQUFVSyxRQUFTSixFQUFLLEtBQ3RDckQsU0FBUzBELGVBQWUsV0FBV0MsVUFBWVQsRUFBT1UsS0FBS0MsR0FBTSxNQUFNQSxFQUFFSixnQkFBZUssS0FBSyxTLCtCQ2JyR2pCLE9BQU9DLGVBQWUxRCxFQUFTLGFBQWMsQ0FBRTJELE9BQU8sSyxpQ0NBdEQsSUFBSWdCLEVBQWFyRSxNQUFRQSxLQUFLcUUsV0FBYyxTQUFVQyxFQUFTQyxFQUFZQyxFQUFHQyxHQUUxRSxPQUFPLElBQUtELElBQU1BLEVBQUkvRCxXQUFVLFNBQVVDLEVBQVNhLEdBQy9DLFNBQVNtRCxFQUFVckIsR0FBUyxJQUFNc0IsRUFBS0YsRUFBVUcsS0FBS3ZCLElBQVcsTUFBT3dCLEdBQUt0RCxFQUFPc0QsSUFDcEYsU0FBU0MsRUFBU3pCLEdBQVMsSUFBTXNCLEVBQUtGLEVBQWlCLE1BQUVwQixJQUFXLE1BQU93QixHQUFLdEQsRUFBT3NELElBQ3ZGLFNBQVNGLEVBQUtJLEdBSmxCLElBQWUxQixFQUlhMEIsRUFBT0MsS0FBT3RFLEVBQVFxRSxFQUFPMUIsUUFKMUNBLEVBSXlEMEIsRUFBTzFCLE1BSmhEQSxhQUFpQm1CLEVBQUluQixFQUFRLElBQUltQixHQUFFLFNBQVU5RCxHQUFXQSxFQUFRMkMsT0FJVGIsS0FBS2tDLEVBQVdJLEdBQ2xHSCxHQUFNRixFQUFZQSxFQUFVUSxNQUFNWCxFQUFTQyxHQUFjLEtBQUtLLFlBR3RFekIsT0FBT0MsZUFBZTFELEVBQVMsYUFBYyxDQUFFMkQsT0FBTyxJQUN0RCxNQUFNNkIsRUFBWSxFQUFRLEtBQ3BCQyxFQUF1QixFQUFRLEtBQy9CQyxFQUFpQixFQUFRLEtBQ3pCQyxFQUFVLEVBQVEsS0FDeEIsRUFBUSxLQUNSLEVBQVEsSUFDUixNQUFNQyxFQUFjQyxFQUFFLGdCQUNoQkMsRUFBWUQsRUFBRSxjQUNkRSxFQUFjRixFQUFFLFVBQ2hCRyxFQUFhSCxFQUFFLFNBQ2ZJLEVBQVlKLEVBQUUsY0E0QmRLLEVBQWFDLEdBQWV4QixPQUFVLE9BQVEsT0FBUSxHQUFRLFlBQ2hFLElBQ0k3RixRQUFRQyxJQUFJLGNBQ1ppSCxFQUFXSSxPQUNYTCxFQUFZTSxPQUNaVixFQUFRVyxVQUFVSCxHQUNsQlIsRUFBUVksYUFBYVosRUFBUWEsUUFBUUMsYUFDL0JmLEVBQWVnQixZQUV6QixNQUFPdkIsR0FDSHJHLFFBQVFDLElBQUlvRyxHQUNad0IsTUFBTXhCLE9BR2RsRixPQUFPMkcsT0FBUyxJQUFNakMsT0FBVSxPQUFRLE9BQVEsR0FBUSxZQUNwRGEsRUFBVTVCLDRCQWhDUWUsT0FBVSxPQUFRLE9BQVEsR0FBUSxZQUNwRG1CLEVBQVVNLE9BQ1ZKLEVBQVdLLE9BQ1hOLEVBQVlNLGFBYlMxQixPQUFVLE9BQVEsT0FBUSxHQUFRLFlBQ3ZELE9BQU81RCxRQUFROEYsSUFBSSxDQUFDbkIsRUFBZW9CLG1CQUFvQm5CLEVBQVFvQixtQkFBb0J0QixFQUFxQnVCLG9CQUNuR2xFLE1BQUssS0FDTmdELEVBQVVPLE9BQ1ZOLEVBQVlLLFVBRVhhLE9BQU85QixJQUNSckcsUUFBUUMsSUFBSW9HLFNBUWhCYyxFQUFVaUIsR0FBRyxTQUFTLEtBQ2RqQixFQUFVa0IsTUFDVnZCLEVBQVl3QixLQUFLLFlBQVksR0FHN0J4QixFQUFZd0IsS0FBSyxZQUFZLE1BR3JDeEIsRUFBWXlCLE9BQU0sSUFBTTFDLE9BQVUsT0FBUSxPQUFRLEdBQVEsa0JBQ2hEdUIsRUFBVUQsRUFBVWtCLG1CLCtCQzdDbEMxRCxPQUFPQyxlQUFlMUQsRUFBUyxhQUFjLENBQUUyRCxPQUFPLElBQ3RELE1BQU0yRCxFQUFrQixDQUNwQkMscUJBQXNCLEdBQ3RCQyxxQkFBc0IsR0FDdEJDLDRCQUE2QixJQUM3QkMsNEJBQTZCLEtBRWpDLE1BQU1DLFVBQTJCQyxZQUM3QixZQUFZQyxFQUFVQyxHQUNsQkMsUUFDQXpILEtBQUswSCxjQUFnQixDQUNqQkMsVUFBVSxFQUNWQyxZQUFZLEVBQ1pDLGFBQWEsR0FFakI3SCxLQUFLOEgsTUFBUSxDQUNUQyxVQUFVLEVBQ1ZDLFlBQVksRUFDWkMsV0FBVyxHQUVmakksS0FBS2tJLEdBQUssS0FDVmxJLEtBQUttSSxHQUFLLEtBQ1ZuSSxLQUFLb0ksYUFBZSxLQUNwQnBJLEtBQUtxSSxtQkFBcUIsS0FDMUJySSxLQUFLc0ksOEJBQWdDLEtBQ3JDdEksS0FBS3VJLHFCQUF1QixLQUM1QnZJLEtBQUt3SSxvQ0FBc0MsS0FDM0N4SSxLQUFLeUksbUJBQXNCQyxJQUN2QixHQUFJQSxFQUFZQyxJQUFNLEVBQUkzSSxLQUFLd0gsU0FBU0wsNkJBQStCdUIsRUFBWUMsR0FBSzNJLEtBQUt3SCxTQUFTTCw0QkFFbEcsT0FFSixJQUFJeUIsRUFBb0QsR0FBcENGLEVBQVlHLFlBQVksR0FBSyxJQUVqRCxPQURBRCxFQUFlRSxLQUFLcEgsSUFBSW9ILEtBQUtuSCxJQUFJaUgsRUFBYyxHQUFJLEdBQy9DQSxFQUFlNUksS0FBS3dILFNBQVNQLHVCQUF5QmpILEtBQUswSCxjQUFjRyxhQUN6RTdILEtBQUswSCxjQUFjRyxhQUFjLE9BQ2pDN0gsS0FBSytJLGNBQWMsSUFBSUMsTUFBTSxrQkFHN0JKLEVBQWU1SSxLQUFLd0gsU0FBU04sc0JBQXdCbEgsS0FBSzBILGNBQWNHLGFBQ3hFN0gsS0FBSzBILGNBQWNHLGFBQWMsT0FDakM3SCxLQUFLK0ksY0FBYyxJQUFJQyxNQUFNLHVCQUZqQyxHQU1KaEosS0FBS2lKLFdBQWNDLElBQ0QsSUFBVkEsRUFBR0MsSUFDSG5KLEtBQUtvSixtQkFBbUIsQ0FBRUMsS0FBTSxXQUFZQyxhQUFjSixFQUFHQyxHQUFJSSxTQUFVLE9BQVFDLFNBQVUsT0FFbkYsSUFBVk4sRUFBR1AsSUFDSDNJLEtBQUtvSixtQkFBbUIsQ0FBRUMsS0FBTSxhQUFjQyxhQUFjSixFQUFHUCxHQUFJWSxTQUFVLE9BQVFDLFNBQVUsV0FHdkd4SixLQUFLb0osbUJBQXFCLEVBQUdDLE9BQU1DLGVBQWNDLFdBQVVDLGNBQ25ERixHQUFnQixFQUFJdEosS0FBS3dILFNBQVNMLDhCQUFnQ25ILEtBQUswSCxjQUFjMkIsSUFDckZySixLQUFLMEgsY0FBYzJCLElBQVEsT0FDM0JySixLQUFLK0ksY0FBYyxJQUFJQyxNQUFNUSxLQUc3QkYsRUFBZXRKLEtBQUt3SCxTQUFTTCw4QkFBZ0NuSCxLQUFLMEgsY0FBYzJCLElBQ2hGckosS0FBSzBILGNBQWMyQixJQUFRLE9BQzNCckosS0FBSytJLGNBQWMsSUFBSUMsTUFBTU8sVUFHN0JELEdBQWdCLEVBQUl0SixLQUFLd0gsU0FBU0osNkJBQStCa0MsRUFBZXRKLEtBQUt3SCxTQUFTSiw4QkFDOUZwSCxLQUFLMEgsY0FBYzJCLElBQVEsSUFJbkNySixLQUFLd0gsU0FBV3JFLE9BQU9zRyxPQUFPdEcsT0FBT3NHLE9BQU8sR0FBSXpDLEdBQWtCUSxHQUNsRTdILE9BQU8rSixpQkFBaUJDLEtBQUssQ0FDekJwQyxTQUFVQSxFQUNWcUMsUUFBUyxZQUNUQyxhQUFjLEdBQ2RDLGNBQWUsQ0FBQ0MsRUFBU0MsS0FDckIsR0FBSUQsRUFDQSxPQUFLQSxFQUFVLDJCQUNYdkMsRUFBU3lDLDJCQUE2QnpDLEVBQVN5QyxrQ0FHbkR6TCxRQUFRRyxNQUFNLHlDQUEwQ29MLEdBRzVEL0osS0FBS2tJLEdBQUs4QixFQUFxQixHQUMvQmhLLEtBQUtvSSxhQUFlNEIsRUFBK0IsYUFDbkRoSyxLQUFLcUksbUJBQXFCMkIsRUFBcUMsbUJBQy9EaEssS0FBS21JLEdBQUs2QixFQUFnQyxjQUMxQ2hLLEtBQUtrSyxxQkFDTGxLLEtBQUs4SCxNQUFNQyxVQUFXLEVBQ3RCUCxFQUFTMkMsU0FBVzNDLEVBQVMyQyxXQUdqQ0MsY0FBZ0IxQixJQUNQMUksS0FBSzhILE1BQU1HLFlBR2hCakksS0FBS3FLLGVBQWUzQixHQUNwQjFJLEtBQUtpSixXQUFXUCxHQUNoQjFJLEtBQUt5SSxtQkFBbUJDLE9BSXBDLE9BQU9ULEdBQ0gsT0FBSWpJLEtBQUs4SCxNQUFNRyxZQUFjQSxJQUc3QmpJLEtBQUs4SCxNQUFNRyxVQUFZQSxJQUZaLEVBS2YsY0FBY3FDLEVBQVFDLEVBQVFDLEdBQzFCLE1BQU1DLEVBQVd6SyxLQUFLa0ksR0FBR3dDLGFBQWFILEdBR3RDLE9BRkF2SyxLQUFLa0ksR0FBR3lDLGFBQWFGLEVBQVVILEdBQy9CdEssS0FBS2tJLEdBQUcwQyxjQUFjSCxHQUNqQnpLLEtBQUtrSSxHQUFHMkMsbUJBQW1CSixFQUFVekssS0FBS2tJLEdBQUc0QyxnQkFJM0NMLEdBSEhwRSxNQUFNLFlBQWNtRSxFQUFhLFlBQWN4SyxLQUFLa0ksR0FBRzZDLGlCQUFpQk4sSUFDakUsTUFJZixxQkFFSSxNQTZCTU8sRUFBaUJoTCxLQUFLNEssY0E3QkQsa1BBNkJtQzVLLEtBQUtrSSxHQUFHK0MsY0FBZSxVQUMvRUMsRUFBbUJsTCxLQUFLNEssY0FyQkQsNnpCQXFCcUM1SyxLQUFLa0ksR0FBR2lELGdCQUFpQixZQUMzRm5MLEtBQUtzSSw4QkFBZ0N0SSxLQUFLa0ksR0FBR2tELGdCQUM3Q3BMLEtBQUtrSSxHQUFHbUQsYUFBYXJMLEtBQUtzSSw4QkFBK0IwQyxHQUN6RGhMLEtBQUtrSSxHQUFHbUQsYUFBYXJMLEtBQUtzSSw4QkFBK0I0QyxHQUN6RGxMLEtBQUtrSSxHQUFHb0QsWUFBWXRMLEtBQUtzSSwrQkFDekIsTUFBTWlELEVBQWV2TCxLQUFLa0ksR0FBR3NELG1CQUFtQnhMLEtBQUtzSSw4QkFBK0IsZ0JBQ3BGdEksS0FBS3VJLHFCQUF1QnZJLEtBQUtrSSxHQUFHc0QsbUJBQW1CeEwsS0FBS3NJLDhCQUErQixRQUMzRnRJLEtBQUt3SSxvQ0FBc0N4SSxLQUFLa0ksR0FBR3NELG1CQUFtQnhMLEtBQUtzSSw4QkFBK0Isc0JBQzFHdEksS0FBS2tJLEdBQUd1RCxXQUFXekwsS0FBS3NJLCtCQUN4QnRJLEtBQUtrSSxHQUFHd0QsVUFBVUgsRUFBYyxHQUVwQyxlQUFlN0MsR0FFWDFJLEtBQUtrSSxHQUFHeUQsU0FBUyxFQUFHLEVBQUczTCxLQUFLbUksR0FBRzFGLE1BQU96QyxLQUFLbUksR0FBR3hGLFFBRTlDM0MsS0FBS2tJLEdBQUd1RCxXQUFXekwsS0FBS3NJLCtCQUN4QnRJLEtBQUtrSSxHQUFHMEQsY0FBYzVMLEtBQUtrSSxHQUFHMkQsVUFDOUI3TCxLQUFLa0ksR0FBRzRELFlBQVk5TCxLQUFLa0ksR0FBRzZELFdBQVkvTCxLQUFLb0ksY0FDN0NwSSxLQUFLa0ksR0FBRzhELFVBQVVoTSxLQUFLdUkscUJBQXNCRyxFQUFZdUQsRUFBR3ZELEVBQVl3RCxFQUFHeEQsRUFBWXlELEdBQ3ZGbk0sS0FBS2tJLEdBQUdrRSxpQkFBaUJwTSxLQUFLd0kscUNBQXFDLEVBQU94SSxLQUFLcUksb0JBSS9FckksS0FBS2tJLEdBQUdtRSxhQUFhck0sS0FBS2tJLEdBQUdvRSxVQUFXLEVBQUd0TSxLQUFLa0ksR0FBR3FFLGVBQWdCLElBRzNFN00sRUFBUStELFFBQVU0RCxHLGlDQ2pMbEIsSUFBSXJFLEVBQW1CaEQsTUFBUUEsS0FBS2dELGlCQUFvQixTQUFVQyxHQUM5RCxPQUFRQSxHQUFPQSxFQUFJQyxXQUFjRCxFQUFNLENBQUUsUUFBV0EsSUFFeERFLE9BQU9DLGVBQWUxRCxFQUFTLGFBQWMsQ0FBRTJELE9BQU8sSUFDdEQzRCxFQUFRZ0gsZ0JBQWtCaEgsRUFBUStELGFBQVUsRUFDNUMsTUFBTTBCLEVBQXVCbkMsRUFBZ0IsRUFBUSxNQUNyRCxJQUFJd0osRUFBdUIsRUFBUSxLQUNuQ3JKLE9BQU9DLGVBQWUxRCxFQUFTLFVBQVcsQ0FBRStNLFlBQVksRUFBTUMsSUFBSyxXQUFjLE9BQU8xSixFQUFnQndKLEdBQXNCL0ksV0FpQjlIL0QsRUFBUWdILGdCQWhCZ0IsSUFDYixJQUFJakcsU0FBUSxDQUFDQyxFQUFTYSxLQUN6QixNQUFNb0wsRUFBcUIsSUFBSXhILEVBQXFCMUIsUUFBUSxlQUFnQixDQUN4RTBHLFFBQVMsS0FDTDNMLFFBQVFDLElBQUkseUJBQ1ppQyxLQUVKdUosMEJBQTJCLElBQU01RCxNQUFNLCtFQUUzQ3NHLEVBQW1CQyxRQUFPLEdBQzFCRCxFQUFtQmhNLGlCQUFpQixnQkFBZ0IsSUFBTW5DLFFBQVFDLElBQUksa0JBQ3RFa08sRUFBbUJoTSxpQkFBaUIsZ0JBQWdCLElBQU1uQyxRQUFRQyxJQUFJLGtCQUN0RWtPLEVBQW1CaE0saUJBQWlCLFFBQVEsSUFBTW5DLFFBQVFDLElBQUksVUFDOURrTyxFQUFtQmhNLGlCQUFpQixTQUFTLElBQU1uQyxRQUFRQyxJQUFJLGUsYUN0QnZFLElBQUk0RixFQUFhckUsTUFBUUEsS0FBS3FFLFdBQWMsU0FBVUMsRUFBU0MsRUFBWUMsRUFBR0MsR0FFMUUsT0FBTyxJQUFLRCxJQUFNQSxFQUFJL0QsV0FBVSxTQUFVQyxFQUFTYSxHQUMvQyxTQUFTbUQsRUFBVXJCLEdBQVMsSUFBTXNCLEVBQUtGLEVBQVVHLEtBQUt2QixJQUFXLE1BQU93QixHQUFLdEQsRUFBT3NELElBQ3BGLFNBQVNDLEVBQVN6QixHQUFTLElBQU1zQixFQUFLRixFQUFpQixNQUFFcEIsSUFBVyxNQUFPd0IsR0FBS3RELEVBQU9zRCxJQUN2RixTQUFTRixFQUFLSSxHQUpsQixJQUFlMUIsRUFJYTBCLEVBQU9DLEtBQU90RSxFQUFRcUUsRUFBTzFCLFFBSjFDQSxFQUl5RDBCLEVBQU8xQixNQUpoREEsYUFBaUJtQixFQUFJbkIsRUFBUSxJQUFJbUIsR0FBRSxTQUFVOUQsR0FBV0EsRUFBUTJDLE9BSVRiLEtBQUtrQyxFQUFXSSxHQUNsR0gsR0FBTUYsRUFBWUEsRUFBVVEsTUFBTVgsRUFBU0MsR0FBYyxLQUFLSyxZQUdoRSxzQkFBdUJqRixTQUN6QkEsT0FBT29ELGtCQUFvQixTQUFVOEosR0FDakMsT0FBT3hJLEVBQVVyRSxVQUFNLE9BQVEsR0FBUSxZQUNuQyxPQUFPLElBQUlTLFNBQVEsQ0FBQ0MsRUFBU2EsS0FDekIsSUFBSXVMLEVBQU14TSxTQUFTQyxjQUFjLE9BQ2pDdU0sRUFBSW5NLGlCQUFpQixRQUFRLFdBQ3pCRCxFQUFRVixTQUVaOE0sRUFBSWhNLElBQU1DLElBQUlDLGdCQUFnQjZMLFksaUNDaEI5QyxJQUFJeEksRUFBYXJFLE1BQVFBLEtBQUtxRSxXQUFjLFNBQVVDLEVBQVNDLEVBQVlDLEVBQUdDLEdBRTFFLE9BQU8sSUFBS0QsSUFBTUEsRUFBSS9ELFdBQVUsU0FBVUMsRUFBU2EsR0FDL0MsU0FBU21ELEVBQVVyQixHQUFTLElBQU1zQixFQUFLRixFQUFVRyxLQUFLdkIsSUFBVyxNQUFPd0IsR0FBS3RELEVBQU9zRCxJQUNwRixTQUFTQyxFQUFTekIsR0FBUyxJQUFNc0IsRUFBS0YsRUFBaUIsTUFBRXBCLElBQVcsTUFBT3dCLEdBQUt0RCxFQUFPc0QsSUFDdkYsU0FBU0YsRUFBS0ksR0FKbEIsSUFBZTFCLEVBSWEwQixFQUFPQyxLQUFPdEUsRUFBUXFFLEVBQU8xQixRQUoxQ0EsRUFJeUQwQixFQUFPMUIsTUFKaERBLGFBQWlCbUIsRUFBSW5CLEVBQVEsSUFBSW1CLEdBQUUsU0FBVTlELEdBQVdBLEVBQVEyQyxPQUlUYixLQUFLa0MsRUFBV0ksR0FDbEdILEdBQU1GLEVBQVlBLEVBQVVRLE1BQU1YLEVBQVNDLEdBQWMsS0FBS0ssWUFPdEUsSUFBSW1JLEVBSko1SixPQUFPQyxlQUFlMUQsRUFBUyxhQUFjLENBQUUyRCxPQUFPLElBQ3REM0QsRUFBUThHLGlCQUFtQjlHLEVBQVEwRyxlQUFZLEVBQy9DLEVBQVEsS0FDUixFQUFRLEdBRVIsSUFBSTRHLEdBQVMsRUFzQmJ0TixFQUFRMEcsVUFyQlUsSUFBTS9CLE9BQVUsT0FBUSxPQUFRLEdBQVEsWUFDakQwSSxVQUdDQSxFQUNEM0csWUFDQTVELE1BQU1xSyxHQUFTOUosa0JBQWtCOEosS0FDakNySyxNQUFNeUssSUFDUCxNQUFNQyxFQUFTNU0sU0FBUzZNLGNBQWMsb0JBQ3RDRCxFQUFPRSxNQUFNQyxRQUFVLFFBYS9CLFNBQW9CSCxFQUFRSixHQUN4QkksRUFBT3pLLE1BQVE2SyxpQkFBaUJKLEdBQVF6SyxNQUFNOEssTUFBTSxNQUFNLEdBQzFETCxFQUFPdkssT0FBUzJLLGlCQUFpQkosR0FBUXZLLE9BQU80SyxNQUFNLE1BQU0sR0FDNUQsSUFBSUMsRUFBUTFFLEtBQUtwSCxJQUFJd0wsRUFBT3pLLE1BQVFxSyxFQUFJckssTUFBT3lLLEVBQU92SyxPQUFTbUssRUFBSW5LLFFBQy9Ec0osR0FBS2lCLEVBQU96SyxNQUFRcUssRUFBSXJLLE1BQVErSyxHQUFTLEVBQ3pDdEIsR0FBS2dCLEVBQU92SyxPQUFTbUssRUFBSW5LLE9BQVM2SyxHQUFTLEVBQy9DTixFQUFPNUwsV0FBVyxNQUFNbU0sVUFBVSxFQUFHLEVBQUdQLEVBQU96SyxNQUFPeUssRUFBT3ZLLFFBQzdEdUssRUFBTzVMLFdBQVcsTUFBTXVCLFVBQVVpSyxFQUFLLEVBQUcsRUFBR0EsRUFBSXJLLE1BQU9xSyxFQUFJbkssT0FBUXNKLEVBQUdDLEVBQUdZLEVBQUlySyxNQUFRK0ssRUFBT1YsRUFBSW5LLE9BQVM2SyxHQW5CdEdFLENBQVdSLEVBQVFELFVBMEMzQnZOLEVBQVE4RyxpQkFyQmlCLElBQU1uQyxPQUFVLE9BQVEsT0FBUSxHQUFRLFlBQzdELE9BQUkySSxFQUNPdk0sUUFBUUMsV0FFbkJzTSxHQUFTLEVBQ0ZXLFVBQVVDLGFBQ1pDLGFBQWEsQ0FBRUMsT0FBTyxJQUN0QnRMLE1BQU11TCxJQUNQLElBQ0ksTUFBTUMsRUFBUUQsRUFBWUUsaUJBQWlCLEdBQzNDbEIsRUFBZSxJQUFJbk4sYUFBYW9PLEdBQ2hDeFAsUUFBUUMsSUFBSSx5QkFFaEIsTUFBT29HLEdBQ0gsTUFBTUEsTUFHVDhCLE9BQU0sS0FDUE4sTUFBTSw0RCwrQkNoRWQsSUFBSWhDLEVBQWFyRSxNQUFRQSxLQUFLcUUsV0FBYyxTQUFVQyxFQUFTQyxFQUFZQyxFQUFHQyxHQUUxRSxPQUFPLElBQUtELElBQU1BLEVBQUkvRCxXQUFVLFNBQVVDLEVBQVNhLEdBQy9DLFNBQVNtRCxFQUFVckIsR0FBUyxJQUFNc0IsRUFBS0YsRUFBVUcsS0FBS3ZCLElBQVcsTUFBT3dCLEdBQUt0RCxFQUFPc0QsSUFDcEYsU0FBU0MsRUFBU3pCLEdBQVMsSUFBTXNCLEVBQUtGLEVBQWlCLE1BQUVwQixJQUFXLE1BQU93QixHQUFLdEQsRUFBT3NELElBQ3ZGLFNBQVNGLEVBQUtJLEdBSmxCLElBQWUxQixFQUlhMEIsRUFBT0MsS0FBT3RFLEVBQVFxRSxFQUFPMUIsUUFKMUNBLEVBSXlEMEIsRUFBTzFCLE1BSmhEQSxhQUFpQm1CLEVBQUluQixFQUFRLElBQUltQixHQUFFLFNBQVU5RCxHQUFXQSxFQUFRMkMsT0FJVGIsS0FBS2tDLEVBQVdJLEdBQ2xHSCxHQUFNRixFQUFZQSxFQUFVUSxNQUFNWCxFQUFTQyxHQUFjLEtBQUtLLFlBS3RFLElBQUlzSixFQUZKL0ssT0FBT0MsZUFBZTFELEVBQVMsYUFBYyxDQUFFMkQsT0FBTyxJQUN0RDNELEVBQVF1RyxhQUFldkcsRUFBUXNHLFVBQVl0RyxFQUFRd0csUUFBVXhHLEVBQVErRyxzQkFBbUIsRUFleEYvRyxFQUFRK0csaUJBYmlCLElBQU1wQyxPQUFVLE9BQVEsT0FBUSxHQUFRLFlBQzdELE9BQU8sSUFBSTVELFNBQVNDLElBQ2hCeU4sWUFBVyxLQUNQRCxFQUFRdk8sT0FBT3lPLGdCQUFnQkMsWUFBWUMsTUFBSyxFQUFHQyxVQUFvQixVQUFUQSxJQUN6REwsR0FJTDFQLFFBQVFDLElBQUksY0FDWmlDLEdBQVEsSUFKSmhCLEVBQVErRyxtQkFBbUJqRSxLQUFLOUIsS0FLckMsV0FJWGhCLEVBQVF3RyxRQUFVLENBQ2RDLE1BQU8sb0NBQ1BxSSxNQUFPLCtCQUVYLElBQUlDLEVBQVcsR0FJZi9PLEVBQVFzRyxVQUhXMEksSUFDZkQsRUFBV0MsR0FlZmhQLEVBQVF1RyxhQVpjMEksSUFDbEIsSUFBS1QsRUFDRCxPQUVKLE1BQU1VLEVBQVksSUFBSUMseUJBQXlCRixFQUFLRyxRQUFRLGFBQWNMLElBQzFFRyxFQUFVRyxNQUFRYixFQUNsQlUsRUFBVUksT0FBUyxFQUNuQkosRUFBVUssTUFBUSxFQUNsQkwsRUFBVU0sS0FBTyxFQUNqQmQsZ0JBQWdCZSxTQUNoQmYsZ0JBQWdCZ0IsTUFBTVIsTUM3Q3RCUyxFQUEyQixHQUcvQixTQUFTQyxFQUFvQkMsR0FFNUIsR0FBR0YsRUFBeUJFLEdBQzNCLE9BQU9GLEVBQXlCRSxHQUFVN1AsUUFHM0MsSUFBSUQsRUFBUzRQLEVBQXlCRSxHQUFZLENBR2pEN1AsUUFBUyxJQU9WLE9BSEE4UCxFQUFvQkQsR0FBVWhRLEtBQUtFLEVBQU9DLFFBQVNELEVBQVFBLEVBQU9DLFFBQVM0UCxHQUdwRTdQLEVBQU9DLFFDbkJmNFAsRUFBb0JHLEVBQUksU0FBUy9QLEVBQVNnUSxHQUN6QyxJQUFJLElBQUlDLEtBQU9ELEVBQ1hKLEVBQW9CTSxFQUFFRixFQUFZQyxLQUFTTCxFQUFvQk0sRUFBRWxRLEVBQVNpUSxJQUM1RXhNLE9BQU9DLGVBQWUxRCxFQUFTaVEsRUFBSyxDQUFFbEQsWUFBWSxFQUFNQyxJQUFLZ0QsRUFBV0MsTUNKM0VMLEVBQW9CTSxFQUFJLFNBQVNDLEVBQUsvSSxHQUFRLE9BQU8zRCxPQUFPMk0sVUFBVUMsZUFBZXhRLEtBQUtzUSxFQUFLL0ksSUNDL0Z3SSxFQUFvQlUsRUFBSSxTQUFTdFEsR0FDWCxvQkFBWHVRLFFBQTBCQSxPQUFPQyxhQUMxQy9NLE9BQU9DLGVBQWUxRCxFQUFTdVEsT0FBT0MsWUFBYSxDQUFFN00sTUFBTyxXQUU3REYsT0FBT0MsZUFBZTFELEVBQVMsYUFBYyxDQUFFMkQsT0FBTyxLQ0Z2RGlNLEVBQW9CLEsiLCJmaWxlIjoibWFpbi5lZjk3NzFmN2ViMTk1NzYxYWRiYS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU3Vic2NyaWJlIHRvIHRoZSBjb25zb2xlIG91dHB1dCBcbiAqXG4gKiBAYXV0aG9yIFNhbXNvbiBSYWR1XG4gKi8gXG4oZnVuY3Rpb24oKXtcbiAgICB2YXIgX2xvZyA9IGNvbnNvbGUubG9nO1xuICAgIHZhciBfd2FybiA9IGNvbnNvbGUud2FybjtcbiAgICB2YXIgX2Vycm9yID0gY29uc29sZS5lcnJvcjtcbiAgICB2YXIgX2RlYnVnID0gY29uc29sZS5kZWJ1ZztcblxuICAgIHZhciBDb25zb2xlU3Vic2NyaWJlciA9IHtcbiAgICAgICAgdW5iaW5kOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgY29uc29sZS5sb2cgPSBfbG9nO1xuICAgICAgICAgICAgY29uc29sZS53YXJuID0gX3dhcm47XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yID0gX2Vycm9yO1xuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyA9IF9kZWJ1ZztcbiAgICAgICAgfSwgXG4gICAgICAgIGJpbmQ6IGZ1bmN0aW9uKGNiLCBwcmV2ZW50TG9nZ2luZyl7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiWW91IG11c3QgcGFzcyBhIHZhbGlkIGNhbGxiYWNrIGZ1bmN0aW9uLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHByZXZlbnRMb2dnaW5nID0gQm9vbGVhbihwcmV2ZW50TG9nZ2luZyk7IC8vZm9yY2UgYm9vbFxuXG4gICAgICAgICAgICBjb25zdCBDQVRFR09SWV9JTkZPID0gXCJpbmZvXCI7XG4gICAgICAgICAgICBjb25zdCBDQVRFR09SWV9XQVJOID0gXCJ3YXJuXCI7XG4gICAgICAgICAgICBjb25zdCBDQVRFR09SWV9FUlJPUiA9IFwiZXJyb3JcIjtcbiAgICAgICAgICAgIGNvbnN0IENBVEVHT1JZX0RFQlVHID0gXCJkZWJ1Z1wiO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyA9IGNvbnNvbGUuaW5mbyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgaWYgKF9sb2cpe1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXByZXZlbnRMb2dnaW5nKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9sb2cuY2FsbChjb25zb2xlLCAuLi5hcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNiKENBVEVHT1JZX0lORk8sIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc29sZS53YXJuID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpZiAoX3dhcm4pe1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXByZXZlbnRMb2dnaW5nKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF93YXJuLmNhbGwoY29uc29sZSwgLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYihDQVRFR09SWV9XQVJOLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGlmIChfZXJyb3Ipe1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXByZXZlbnRMb2dnaW5nKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lcnJvci5jYWxsKGNvbnNvbGUsIC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2IoQ0FURUdPUllfRVJST1IsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgaWYgKF9kZWJ1Zyl7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcHJldmVudExvZ2dpbmcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2RlYnVnLmNhbGwoY29uc29sZSwgLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYihDQVRFR09SWV9ERUJVRywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvL2V4cG9ydFxuICAgIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgIT09ICd1bmRlZmluZWQnKXtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBDb25zb2xlU3Vic2NyaWJlcjtcbiAgICB9XG4gICAgZWxzZSBpZiAod2luZG93ICYmIHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKXtcbiAgICAgICAgd2luZG93LkNvbnNvbGVTdWJzY3JpYmVyID0gQ29uc29sZVN1YnNjcmliZXI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGV4cG9ydCBtb2R1bGUuXCIpO1xuICAgIH1cbn0pKCk7XG4iLCIvKipcbiAqIE1lZGlhU3RyZWFtIEltYWdlQ2FwdHVyZSBwb2x5ZmlsbFxuICpcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuZXhwb3J0IGxldCBJbWFnZUNhcHR1cmUgPSB3aW5kb3cuSW1hZ2VDYXB0dXJlO1xuXG5pZiAodHlwZW9mIEltYWdlQ2FwdHVyZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgSW1hZ2VDYXB0dXJlID0gY2xhc3Mge1xuXG4gICAgLyoqXG4gICAgICogVE9ETyBodHRwczovL3d3dy53My5vcmcvVFIvaW1hZ2UtY2FwdHVyZS8jY29uc3RydWN0b3JzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge01lZGlhU3RyZWFtVHJhY2t9IHZpZGVvU3RyZWFtVHJhY2sgLSBBIE1lZGlhU3RyZWFtVHJhY2sgb2YgdGhlICd2aWRlbycga2luZFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHZpZGVvU3RyZWFtVHJhY2spIHtcbiAgICAgIGlmICh2aWRlb1N0cmVhbVRyYWNrLmtpbmQgIT09ICd2aWRlbycpXG4gICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJ05vdFN1cHBvcnRlZEVycm9yJyk7XG5cbiAgICAgIHRoaXMuX3ZpZGVvU3RyZWFtVHJhY2sgPSB2aWRlb1N0cmVhbVRyYWNrO1xuICAgICAgaWYgKCEoJ3JlYWR5U3RhdGUnIGluIHRoaXMuX3ZpZGVvU3RyZWFtVHJhY2spKSB7XG4gICAgICAgIC8vIFBvbHlmaWxsIGZvciBGaXJlZm94XG4gICAgICAgIHRoaXMuX3ZpZGVvU3RyZWFtVHJhY2sucmVhZHlTdGF0ZSA9ICdsaXZlJztcbiAgICAgIH1cblxuICAgICAgLy8gTWVkaWFTdHJlYW0gY29uc3RydWN0b3Igbm90IGF2YWlsYWJsZSB1bnRpbCBDaHJvbWUgNTUgLSBodHRwczovL3d3dy5jaHJvbWVzdGF0dXMuY29tL2ZlYXR1cmUvNTkxMjE3MjU0Njc1MjUxMlxuICAgICAgdGhpcy5fcHJldmlld1N0cmVhbSA9IG5ldyBNZWRpYVN0cmVhbShbdmlkZW9TdHJlYW1UcmFja10pO1xuICAgICAgdGhpcy52aWRlb0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgICAgdGhpcy52aWRlb0VsZW1lbnRQbGF5aW5nID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXlpbmcnLCByZXNvbHZlKTtcbiAgICAgIH0pO1xuICAgICAgaWYgKEhUTUxNZWRpYUVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuc3JjT2JqZWN0ID0gdGhpcy5fcHJldmlld1N0cmVhbTsgIC8vIFNhZmFyaSAxMSBkb2Vzbid0IGFsbG93IHVzZSBvZiBjcmVhdGVPYmplY3RVUkwgZm9yIE1lZGlhU3RyZWFtXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHRoaXMuX3ByZXZpZXdTdHJlYW0pO1xuICAgICAgfVxuICAgICAgdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQgPSB0cnVlO1xuICAgICAgdGhpcy52aWRlb0VsZW1lbnQuc2V0QXR0cmlidXRlKCdwbGF5c2lubGluZScsICcnKTsgLy8gUmVxdWlyZWQgYnkgU2FmYXJpIG9uIGlPUyAxMS4gU2VlIGh0dHBzOi8vd2Via2l0Lm9yZy9ibG9nLzY3ODRcbiAgICAgIHRoaXMudmlkZW9FbGVtZW50LnBsYXkoKTtcblxuICAgICAgdGhpcy5jYW52YXNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAvLyBUT0RPIEZpcmVmb3ggaGFzIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9PZmZzY3JlZW5DYW52YXNcbiAgICAgIHRoaXMuY2FudmFzMmRDb250ZXh0ID0gdGhpcy5jYW52YXNFbGVtZW50LmdldENvbnRleHQoJzJkJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogaHR0cHM6Ly93M2MuZ2l0aHViLmlvL21lZGlhY2FwdHVyZS1pbWFnZS9pbmRleC5odG1sI2RvbS1pbWFnZWNhcHR1cmUtdmlkZW9zdHJlYW10cmFja1xuICAgICAqIEByZXR1cm4ge01lZGlhU3RyZWFtVHJhY2t9IFRoZSBNZWRpYVN0cmVhbVRyYWNrIHBhc3NlZCBpbnRvIHRoZSBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGdldCB2aWRlb1N0cmVhbVRyYWNrKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3ZpZGVvU3RyZWFtVHJhY2s7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyBodHRwczovL3d3dy53My5vcmcvVFIvaW1hZ2UtY2FwdHVyZS8jZG9tLWltYWdlY2FwdHVyZS1nZXRwaG90b2NhcGFiaWxpdGllc1xuICAgICAqIEByZXR1cm4ge1Byb21pc2U8UGhvdG9DYXBhYmlsaXRpZXM+fSBGdWxmaWxsZWQgcHJvbWlzZSB3aXRoXG4gICAgICogW1Bob3RvQ2FwYWJpbGl0aWVzXShodHRwczovL3d3dy53My5vcmcvVFIvaW1hZ2UtY2FwdHVyZS8jaWRsLWRlZi1waG90b2NhcGFiaWxpdGllcylcbiAgICAgKiBvYmplY3Qgb24gc3VjY2VzcywgcmVqZWN0ZWQgcHJvbWlzZSBvbiBmYWlsdXJlXG4gICAgICovXG4gICAgZ2V0UGhvdG9DYXBhYmlsaXRpZXMoKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZXhlY3V0b3JHUEMocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIC8vIFRPRE8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93M2MvbWVkaWFjYXB0dXJlLWltYWdlL2lzc3Vlcy85N1xuICAgICAgICBjb25zdCBNZWRpYVNldHRpbmdzUmFuZ2UgPSB7XG4gICAgICAgICAgY3VycmVudDogMCwgbWluOiAwLCBtYXg6IDAsXG4gICAgICAgIH07XG4gICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgIGV4cG9zdXJlQ29tcGVuc2F0aW9uOiBNZWRpYVNldHRpbmdzUmFuZ2UsXG4gICAgICAgICAgZXhwb3N1cmVNb2RlOiAnbm9uZScsXG4gICAgICAgICAgZmlsbExpZ2h0TW9kZTogJ25vbmUnLFxuICAgICAgICAgIGZvY3VzTW9kZTogJ25vbmUnLFxuICAgICAgICAgIGltYWdlSGVpZ2h0OiBNZWRpYVNldHRpbmdzUmFuZ2UsXG4gICAgICAgICAgaW1hZ2VXaWR0aDogTWVkaWFTZXR0aW5nc1JhbmdlLFxuICAgICAgICAgIGlzbzogTWVkaWFTZXR0aW5nc1JhbmdlLFxuICAgICAgICAgIHJlZEV5ZVJlZHVjdGlvbjogZmFsc2UsXG4gICAgICAgICAgd2hpdGVCYWxhbmNlTW9kZTogJ25vbmUnLFxuICAgICAgICAgIHpvb206IE1lZGlhU2V0dGluZ3NSYW5nZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlamVjdChuZXcgRE9NRXhjZXB0aW9uKCdPcGVyYXRpb25FcnJvcicpKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEltcGxlbWVudHMgaHR0cHM6Ly93d3cudzMub3JnL1RSL2ltYWdlLWNhcHR1cmUvI2RvbS1pbWFnZWNhcHR1cmUtc2V0b3B0aW9uc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwaG90b1NldHRpbmdzIC0gUGhvdG8gc2V0dGluZ3MgZGljdGlvbmFyeSwgaHR0cHM6Ly93d3cudzMub3JnL1RSL2ltYWdlLWNhcHR1cmUvI2lkbC1kZWYtcGhvdG9zZXR0aW5nc1xuICAgICAqIEByZXR1cm4ge1Byb21pc2U8dm9pZD59IEZ1bGZpbGxlZCBwcm9taXNlIG9uIHN1Y2Nlc3MsIHJlamVjdGVkIHByb21pc2Ugb24gZmFpbHVyZVxuICAgICAqL1xuICAgIHNldE9wdGlvbnMocGhvdG9TZXR0aW5ncyA9IHt9KSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZXhlY3V0b3JTTyhyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgLy8gVE9ET1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVE9ET1xuICAgICAqIEltcGxlbWVudHMgaHR0cHM6Ly93d3cudzMub3JnL1RSL2ltYWdlLWNhcHR1cmUvI2RvbS1pbWFnZWNhcHR1cmUtdGFrZXBob3RvXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxCbG9iPn0gRnVsZmlsbGVkIHByb21pc2Ugd2l0aCBbQmxvYl0oaHR0cHM6Ly93d3cudzMub3JnL1RSL0ZpbGVBUEkvI2Jsb2IpXG4gICAgICogYXJndW1lbnQgb24gc3VjY2VzczsgcmVqZWN0ZWQgcHJvbWlzZSBvbiBmYWlsdXJlXG4gICAgICovXG4gICAgdGFrZVBob3RvKCkge1xuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZXhlY3V0b3JUUChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgLy8gYElmIHRoZSByZWFkeVN0YXRlIG9mIHRoZSBNZWRpYVN0cmVhbVRyYWNrIHByb3ZpZGVkIGluIHRoZSBjb25zdHJ1Y3RvciBpcyBub3QgbGl2ZSxcbiAgICAgICAgLy8gcmV0dXJuIGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIGEgbmV3IERPTUV4Y2VwdGlvbiB3aG9zZSBuYW1lIGlzIFwiSW52YWxpZFN0YXRlRXJyb3JcIi5gXG4gICAgICAgIGlmIChzZWxmLl92aWRlb1N0cmVhbVRyYWNrLnJlYWR5U3RhdGUgIT09ICdsaXZlJykge1xuICAgICAgICAgIHJldHVybiByZWplY3QobmV3IERPTUV4Y2VwdGlvbignSW52YWxpZFN0YXRlRXJyb3InKSk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi52aWRlb0VsZW1lbnRQbGF5aW5nLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzZWxmLmNhbnZhc0VsZW1lbnQud2lkdGggPSBzZWxmLnZpZGVvRWxlbWVudC52aWRlb1dpZHRoO1xuICAgICAgICAgICAgc2VsZi5jYW52YXNFbGVtZW50LmhlaWdodCA9IHNlbGYudmlkZW9FbGVtZW50LnZpZGVvSGVpZ2h0O1xuICAgICAgICAgICAgc2VsZi5jYW52YXMyZENvbnRleHQuZHJhd0ltYWdlKHNlbGYudmlkZW9FbGVtZW50LCAwLCAwKTtcbiAgICAgICAgICAgIHNlbGYuY2FudmFzRWxlbWVudC50b0Jsb2IocmVzb2x2ZSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRE9NRXhjZXB0aW9uKCdVbmtub3duRXJyb3InKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEltcGxlbWVudHMgaHR0cHM6Ly93d3cudzMub3JnL1RSL2ltYWdlLWNhcHR1cmUvI2RvbS1pbWFnZWNhcHR1cmUtZ3JhYmZyYW1lXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxJbWFnZUJpdG1hcD59IEZ1bGZpbGxlZCBwcm9taXNlIHdpdGhcbiAgICAgKiBbSW1hZ2VCaXRtYXBdKGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNTEvd2ViYXBwYXBpcy5odG1sI3dlYmFwcGFwaXMtaW1hZ2VzKVxuICAgICAqIGFyZ3VtZW50IG9uIHN1Y2Nlc3M7IHJlamVjdGVkIHByb21pc2Ugb24gZmFpbHVyZVxuICAgICAqL1xuICAgIGdyYWJGcmFtZSgpIHtcbiAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGV4ZWN1dG9yR0YocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIC8vIGBJZiB0aGUgcmVhZHlTdGF0ZSBvZiB0aGUgTWVkaWFTdHJlYW1UcmFjayBwcm92aWRlZCBpbiB0aGUgY29uc3RydWN0b3IgaXMgbm90IGxpdmUsXG4gICAgICAgIC8vIHJldHVybiBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCBhIG5ldyBET01FeGNlcHRpb24gd2hvc2UgbmFtZSBpcyBcIkludmFsaWRTdGF0ZUVycm9yXCIuYFxuICAgICAgICBpZiAoc2VsZi5fdmlkZW9TdHJlYW1UcmFjay5yZWFkeVN0YXRlICE9PSAnbGl2ZScpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBET01FeGNlcHRpb24oJ0ludmFsaWRTdGF0ZUVycm9yJykpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYudmlkZW9FbGVtZW50UGxheWluZy50aGVuKCgpID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2VsZi5jYW52YXNFbGVtZW50LndpZHRoID0gc2VsZi52aWRlb0VsZW1lbnQudmlkZW9XaWR0aDtcbiAgICAgICAgICAgIHNlbGYuY2FudmFzRWxlbWVudC5oZWlnaHQgPSBzZWxmLnZpZGVvRWxlbWVudC52aWRlb0hlaWdodDtcbiAgICAgICAgICAgIHNlbGYuY2FudmFzMmRDb250ZXh0LmRyYXdJbWFnZShzZWxmLnZpZGVvRWxlbWVudCwgMCwgMCk7XG4gICAgICAgICAgICAvLyBUT0RPIHBvbHlmaWxsIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JbWFnZUJpdG1hcEZhY3Rvcmllcy9jcmVhdGVJbWFnZUJpdG1hcCBmb3IgSUVcbiAgICAgICAgICAgIHJlc29sdmUod2luZG93LmNyZWF0ZUltYWdlQml0bWFwKHNlbGYuY2FudmFzRWxlbWVudCkpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZWplY3QobmV3IERPTUV4Y2VwdGlvbignVW5rbm93bkVycm9yJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG5cbndpbmRvdy5JbWFnZUNhcHR1cmUgPSBJbWFnZUNhcHR1cmU7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZW5hYmxlTW9iaWxlQ29uc29sZSA9IHZvaWQgMDtcbmNvbnN0IGNvbnNvbGVfc3Vic2NyaWJlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJjb25zb2xlLXN1YnNjcmliZXJcIikpO1xuY29uc3QgZW5hYmxlTW9iaWxlQ29uc29sZSA9ICgpID0+IHtcbiAgICBjb25zdCBidWZmZXIgPSBbXTtcbiAgICBjb25zb2xlX3N1YnNjcmliZXJfMS5kZWZhdWx0LmJpbmQoKGNhdGVnb3J5LCBhcmdzKSA9PiB7XG4gICAgICAgIGlmIChidWZmZXIubGVuZ3RoID09PSA1KSB7XG4gICAgICAgICAgICBidWZmZXIuc2hpZnQoKTtcbiAgICAgICAgfVxuICAgICAgICBidWZmZXIucHVzaCh7IGNhdGVnb3J5LCBtZXNzYWdlOiBhcmdzWzBdIH0pO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uc29sZScpLmlubmVySFRNTCA9IGJ1ZmZlci5tYXAoKG0pID0+IGA8cD4ke20ubWVzc2FnZX08L3A+YCkuam9pbignJyk7XG4gICAgfSk7XG59O1xuZXhwb3J0cy5lbmFibGVNb2JpbGVDb25zb2xlID0gZW5hYmxlTW9iaWxlQ29uc29sZTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IGNvbnNvbGVfMSA9IHJlcXVpcmUoXCIuL2NvbnNvbGVcIik7XG5jb25zdCBIZWFkQ29udHJvbFNlcnZpY2VfMSA9IHJlcXVpcmUoXCIuL3NlcnZpY2VzL0hlYWRDb250cm9sU2VydmljZVwiKTtcbmNvbnN0IGltYWdlQ2FwdHVyZV8xID0gcmVxdWlyZShcIi4vc2VydmljZXMvSW1hZ2VDYXB0dXJlU2VydmljZS9pbWFnZUNhcHR1cmVcIik7XG5jb25zdCB2b2ljZV8xID0gcmVxdWlyZShcIi4vc2VydmljZXMvVm9pY2VTZXJ2aWNlL3ZvaWNlXCIpO1xucmVxdWlyZShcIi4vZGVjbGFyZVwiKTtcbnJlcXVpcmUoXCIuL3N0eWxlL2luZGV4LnNjc3NcIik7XG5jb25zdCBzdGFydEJ1dHRvbiA9ICQoJyNzdGFydEJ1dHRvbicpO1xuY29uc3QgcHJlbG9hZGVyID0gJCgnI3ByZWxvYWRlcicpO1xuY29uc3Qgc3RhcnRTY3JlZW4gPSAkKCcjc3RhcnQnKTtcbmNvbnN0IGdhbWVTY3JlZW4gPSAkKCcjZ2FtZScpO1xuY29uc3QgbmFtZUlucHV0ID0gJCgnI25hbWVJbnB1dCcpO1xuY29uc3QgaW5pdEFsbEFQSSA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbaW1hZ2VDYXB0dXJlXzEuaW5pdEltYWdlQ2FwdHVyZSgpLCB2b2ljZV8xLmluaXRWb2ljZVNlcnZpY2UoKSwgSGVhZENvbnRyb2xTZXJ2aWNlXzEuaW5pdEhlYWRDb250cm9sKCldKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHByZWxvYWRlci5oaWRlKCk7XG4gICAgICAgIHN0YXJ0U2NyZWVuLnNob3coKTtcbiAgICB9KVxuICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgfSk7XG59KTtcbmNvbnN0IGluaXRBcHAgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICBwcmVsb2FkZXIuc2hvdygpO1xuICAgIGdhbWVTY3JlZW4uaGlkZSgpO1xuICAgIHN0YXJ0U2NyZWVuLmhpZGUoKTtcbiAgICB5aWVsZCBpbml0QWxsQVBJKCk7XG4gICAgbmFtZUlucHV0Lm9uKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgaWYgKG5hbWVJbnB1dC52YWwoKSkge1xuICAgICAgICAgICAgc3RhcnRCdXR0b24ucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdGFydEJ1dHRvbi5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgc3RhcnRCdXR0b24uY2xpY2soKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHlpZWxkIHN0YXJ0R2FtZShuYW1lSW5wdXQudmFsKCkpO1xuICAgIH0pKTtcbn0pO1xuY29uc3Qgc3RhcnRHYW1lID0gKHBsYXllck5hbWUpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzdGFydCBnYW1lJyk7XG4gICAgICAgIGdhbWVTY3JlZW4uc2hvdygpO1xuICAgICAgICBzdGFydFNjcmVlbi5oaWRlKCk7XG4gICAgICAgIHZvaWNlXzEuc2V0VXBVc2VyKHBsYXllck5hbWUpO1xuICAgICAgICB2b2ljZV8xLnNheVNvbWV0aGluZyh2b2ljZV8xLlBIUkFTRVMuSEVMTE8pO1xuICAgICAgICB5aWVsZCBpbWFnZUNhcHR1cmVfMS50YWtlUGhvdG8oKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgIGFsZXJ0KGUpO1xuICAgIH1cbn0pO1xud2luZG93Lm9ubG9hZCA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIGNvbnNvbGVfMS5lbmFibGVNb2JpbGVDb25zb2xlKCk7XG4gICAgeWllbGQgaW5pdEFwcCgpO1xufSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IGRlZmF1bHRTZXR0aW5ncyA9IHtcbiAgICBtb3VzZU9wZW5pbmdUcmVzaG9sZDogMC42LFxuICAgIG1vdXNlQ2xvc2luZ1RyZXNob2xkOiAwLjUsXG4gICAgaGVhZE1vdmVtZW50U3RhcnRlZFRyZXNob2xkOiAwLjE1LFxuICAgIGhlYWRNb3ZlbWVudFN0b3BwZWRUcmVzaG9sZDogMC4wOCxcbn07XG5jbGFzcyBIZWFkQ29udHJvbFNlcnZpY2UgZXh0ZW5kcyBFdmVudFRhcmdldCB7XG4gICAgY29uc3RydWN0b3IoY2FudmFzSWQsIHNldHRpbmdzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMubW92ZW1lbnRMb2NrcyA9IHtcbiAgICAgICAgICAgIHZlcnRpY2FsOiBmYWxzZSxcbiAgICAgICAgICAgIGhvcml6b250YWw6IGZhbHNlLFxuICAgICAgICAgICAgbW91c2VPcGVuZWQ6IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgaXNMb2FkZWQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNEZXRlY3RlZDogZmFsc2UsXG4gICAgICAgICAgICBpc0VuYWJsZWQ6IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdsID0gbnVsbDtcbiAgICAgICAgdGhpcy5jdiA9IG51bGw7XG4gICAgICAgIHRoaXMudmlkZW9UZXh0dXJlID0gbnVsbDtcbiAgICAgICAgdGhpcy52aWRlb1RyYW5zZm9ybU1hdDIgPSBudWxsO1xuICAgICAgICB0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtID0gbnVsbDtcbiAgICAgICAgdGhpcy5oZWFkU2VhcmNoVW5pZm9ybVh5cyA9IG51bGw7XG4gICAgICAgIHRoaXMuaGVhZFNlYXJjaFVuaWZvcm1WaWRlb1RyYW5zZm9ybU1hdDIgPSBudWxsO1xuICAgICAgICB0aGlzLmhhbmRsZU1vdXNlT3BlbmluZyA9IChkZXRlY3RTdGF0ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGRldGVjdFN0YXRlLnJ5IDwgLTEgKiB0aGlzLnNldHRpbmdzLmhlYWRNb3ZlbWVudFN0YXJ0ZWRUcmVzaG9sZCB8fCBkZXRlY3RTdGF0ZS5yeSA+IHRoaXMuc2V0dGluZ3MuaGVhZE1vdmVtZW50U3RhcnRlZFRyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgLy8gSGVhZCBzaG91bGQgYmUgaW4gdGhlIGNlbnRlciBwb3NpdGlvblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBtb3V0aE9wZW5pbmcgPSAoZGV0ZWN0U3RhdGUuZXhwcmVzc2lvbnNbMF0gLSAwLjIpICogNS4wO1xuICAgICAgICAgICAgbW91dGhPcGVuaW5nID0gTWF0aC5taW4oTWF0aC5tYXgobW91dGhPcGVuaW5nLCAwKSwgMSk7XG4gICAgICAgICAgICBpZiAobW91dGhPcGVuaW5nID4gdGhpcy5zZXR0aW5ncy5tb3VzZU9wZW5pbmdUcmVzaG9sZCAmJiAhdGhpcy5tb3ZlbWVudExvY2tzLm1vdXNlT3BlbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlbWVudExvY2tzLm1vdXNlT3BlbmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdtb3VzZSBvcGVuZWQnKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vdXRoT3BlbmluZyA8IHRoaXMuc2V0dGluZ3MubW91c2VDbG9zaW5nVHJlc2hvbGQgJiYgdGhpcy5tb3ZlbWVudExvY2tzLm1vdXNlT3BlbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlbWVudExvY2tzLm1vdXNlT3BlbmVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnbW91c2UgY2xvc2VkJykpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVNb3ZlID0gKG12KSA9PiB7XG4gICAgICAgICAgICBpZiAobXYucnggIT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUF4aXNNb3ZlbWVudCh7IGF4aXM6ICd2ZXJ0aWNhbCcsIGF4aXNQb3NpdGlvbjogbXYucngsIG1heFZhbHVlOiAnZG93bicsIG1pblZhbHVlOiAndXAnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG12LnJ5ICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVBeGlzTW92ZW1lbnQoeyBheGlzOiAnaG9yaXpvbnRhbCcsIGF4aXNQb3NpdGlvbjogbXYucnksIG1heFZhbHVlOiAnbGVmdCcsIG1pblZhbHVlOiAncmlnaHQnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZUF4aXNNb3ZlbWVudCA9ICh7IGF4aXMsIGF4aXNQb3NpdGlvbiwgbWF4VmFsdWUsIG1pblZhbHVlLCB9KSA9PiB7XG4gICAgICAgICAgICBpZiAoYXhpc1Bvc2l0aW9uIDwgLTEgKiB0aGlzLnNldHRpbmdzLmhlYWRNb3ZlbWVudFN0YXJ0ZWRUcmVzaG9sZCAmJiAhdGhpcy5tb3ZlbWVudExvY2tzW2F4aXNdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlbWVudExvY2tzW2F4aXNdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KG1pblZhbHVlKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGF4aXNQb3NpdGlvbiA+IHRoaXMuc2V0dGluZ3MuaGVhZE1vdmVtZW50U3RhcnRlZFRyZXNob2xkICYmICF0aGlzLm1vdmVtZW50TG9ja3NbYXhpc10pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVtZW50TG9ja3NbYXhpc10gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQobWF4VmFsdWUpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXhpc1Bvc2l0aW9uID4gLTEgKiB0aGlzLnNldHRpbmdzLmhlYWRNb3ZlbWVudFN0b3BwZWRUcmVzaG9sZCAmJiBheGlzUG9zaXRpb24gPCB0aGlzLnNldHRpbmdzLmhlYWRNb3ZlbWVudFN0b3BwZWRUcmVzaG9sZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZW1lbnRMb2Nrc1theGlzXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdFNldHRpbmdzKSwgc2V0dGluZ3MpO1xuICAgICAgICB3aW5kb3cuSkVFRkFDRUZJTFRFUkFQSS5pbml0KHtcbiAgICAgICAgICAgIGNhbnZhc0lkOiBjYW52YXNJZCxcbiAgICAgICAgICAgIE5OQ1BhdGg6ICcuL3ZlbmRvci8nLFxuICAgICAgICAgICAgYW5pbWF0ZURlbGF5OiAyMCxcbiAgICAgICAgICAgIGNhbGxiYWNrUmVhZHk6IChlcnJDb2RlLCBqZWVGYWNlRmlsdGVyT2JqKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVyckNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChlcnJDb2RlID0gJ1dFQkNBTV9VTkFWQUlMQUJMRScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5vbkNhbWVyYVBlcnNtaXNzaW9uRmFpbGVkICYmIHNldHRpbmdzLm9uQ2FtZXJhUGVyc21pc3Npb25GYWlsZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdBTiBFUlJPUiBIQVBQRU5TLiBTT1JSWSBCUk8gOiggLiBFUlIgPScsIGVyckNvZGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZ2wgPSBqZWVGYWNlRmlsdGVyT2JqWydHTCddO1xuICAgICAgICAgICAgICAgIHRoaXMudmlkZW9UZXh0dXJlID0gamVlRmFjZUZpbHRlck9ialsndmlkZW9UZXh0dXJlJ107XG4gICAgICAgICAgICAgICAgdGhpcy52aWRlb1RyYW5zZm9ybU1hdDIgPSBqZWVGYWNlRmlsdGVyT2JqWyd2aWRlb1RyYW5zZm9ybU1hdDInXTtcbiAgICAgICAgICAgICAgICB0aGlzLmN2ID0gamVlRmFjZUZpbHRlck9ialsnY2FudmFzRWxlbWVudCddO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdEhlYWRTZWFyY2hEcmF3KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0xvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mub25SZWFkeSAmJiBzZXR0aW5ncy5vblJlYWR5KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gY2FsbGVkIGF0IGVhY2ggcmVuZGVyIGl0ZXJhdGlvbiAoZHJhd2luZyBsb29wKTpcbiAgICAgICAgICAgIGNhbGxiYWNrVHJhY2s6IChkZXRlY3RTdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zdGF0ZS5pc0VuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdIZWFkU2VhcmNoKGRldGVjdFN0YXRlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU1vdmUoZGV0ZWN0U3RhdGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTW91c2VPcGVuaW5nKGRldGVjdFN0YXRlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0b2dnbGUoaXNFbmFibGVkKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmlzRW5hYmxlZCA9PT0gaXNFbmFibGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlLmlzRW5hYmxlZCA9IGlzRW5hYmxlZDtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbXBpbGVTaGFkZXIoc291cmNlLCBnbFR5cGUsIHR5cGVTdHJpbmcpIHtcbiAgICAgICAgY29uc3QgZ2xTaGFkZXIgPSB0aGlzLmdsLmNyZWF0ZVNoYWRlcihnbFR5cGUpO1xuICAgICAgICB0aGlzLmdsLnNoYWRlclNvdXJjZShnbFNoYWRlciwgc291cmNlKTtcbiAgICAgICAgdGhpcy5nbC5jb21waWxlU2hhZGVyKGdsU2hhZGVyKTtcbiAgICAgICAgaWYgKCF0aGlzLmdsLmdldFNoYWRlclBhcmFtZXRlcihnbFNoYWRlciwgdGhpcy5nbC5DT01QSUxFX1NUQVRVUykpIHtcbiAgICAgICAgICAgIGFsZXJ0KCdFUlJPUiBJTiAnICsgdHlwZVN0cmluZyArICcgU0hBREVSOiAnICsgdGhpcy5nbC5nZXRTaGFkZXJJbmZvTG9nKGdsU2hhZGVyKSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2xTaGFkZXI7XG4gICAgfVxuICAgIGluaXRIZWFkU2VhcmNoRHJhdygpIHtcbiAgICAgICAgLy8gYnVpbGQgdGhpcy5nbEhlYWRTZWFyY2hEcmF3U2hhZGVyUHJvZ3JhbTpcbiAgICAgICAgY29uc3Qgc2hhZGVyVmVydGV4U291cmNlID0gJ1xcblxcXG4gICAgICBhdHRyaWJ1dGUgdmVjMiBhYXRfcG9zaXRpb247XFxuXFxcbiAgICAgIHZhcnlpbmcgdmVjMiB2VVY7XFxuXFxcbiAgICAgIFxcblxcXG4gICAgICB2b2lkIG1haW4odm9pZCkge1xcblxcXG4gICAgICAgIGdsX1Bvc2l0aW9uID0gdmVjNChhYXRfcG9zaXRpb24sIDAuLCAxLik7XFxuXFxcbiAgICAgICAgdlVWID0gMC41ICsgMC41ICogYWF0X3Bvc2l0aW9uO1xcblxcXG4gICAgICAgIHZVVi54ID0gMS4tdlVWLng7IC8vIG1pcnJvciBkaXBsYXlcXG5cXFxuICAgICAgfSc7XG4gICAgICAgIGNvbnN0IHNoYWRlckZyYWdtZW50U291cmNlID0gJ1xcblxcXG4gICAgICBwcmVjaXNpb24gbG93cCBmbG9hdDtcXG5cXFxuICAgICAgdmFyeWluZyB2ZWMyIHZVVjtcXG5cXFxuICAgICAgXFxuXFxcbiAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIHNhbXBsZXJWaWRlbztcXG5cXFxuICAgICAgdW5pZm9ybSBtYXQyIHZpZGVvVHJhbnNmb3JtTWF0MjtcXG5cXFxuICAgICAgdW5pZm9ybSB2ZWMzIHV4eXM7XFxuXFxcbiAgICAgIFxcblxcXG4gICAgICB2b2lkIG1haW4odm9pZCkge1xcblxcXG4gICAgICAgIHZlYzIgdXZWaWRlb0NlbnRlcmVkID0gMi4wICogdmlkZW9UcmFuc2Zvcm1NYXQyICogKHZVViAtIDAuNSk7XFxuXFxcbiAgICAgICAgdmVjMiB1dlZpZGVvID0gdXZWaWRlb0NlbnRlcmVkICsgMC41O1xcblxcXG4gICAgICAgIHZlYzMgY29sb3JWaWRlbyA9IHRleHR1cmUyRChzYW1wbGVyVmlkZW8sIHV2VmlkZW8pLnJnYjtcXG5cXFxuICAgICAgICB2ZWMyIHBvcyA9IHZVVioyLi12ZWMyKDEuLDEuKTtcXG5cXFxuICAgICAgICB2ZWMyIGlzSW5zaWRlID0gc3RlcCh1eHlzLnh5LXV4eXMueip2ZWMyKDEuLDEuKSwgcG9zKTtcXG5cXFxuICAgICAgICBpc0luc2lkZSAqPSBzdGVwKHBvcywgdXh5cy54eSt1eHlzLnoqdmVjMigxLiwxLikpO1xcblxcXG4gICAgICAgIHZlYzIgYmxlbmRDZW50ZXJGYWN0b3IgPSBhYnMocG9zLXV4eXMueHkpIC8gdXh5cy56O1xcblxcXG4gICAgICAgIGZsb2F0IGFscGhhID0gaXNJbnNpZGUueCAqIGlzSW5zaWRlLnkgKiBwb3cobWF4KGJsZW5kQ2VudGVyRmFjdG9yLngsIGJsZW5kQ2VudGVyRmFjdG9yLnkpLCAzLik7XFxuXFxcbiAgICAgICAgdmVjMyBjb2xvciA9IG1peChjb2xvclZpZGVvLCB2ZWMzKDAuLDAuNiwxLiksIGFscGhhKTtcXG5cXFxuICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KGNvbG9yLDEuKTtcXG5cXFxuICAgICAgfSc7XG4gICAgICAgIGNvbnN0IGdsU2hhZGVyVmVydGV4ID0gdGhpcy5jb21waWxlU2hhZGVyKHNoYWRlclZlcnRleFNvdXJjZSwgdGhpcy5nbC5WRVJURVhfU0hBREVSLCAnVkVSVEVYJyk7XG4gICAgICAgIGNvbnN0IGdsU2hhZGVyRnJhZ21lbnQgPSB0aGlzLmNvbXBpbGVTaGFkZXIoc2hhZGVyRnJhZ21lbnRTb3VyY2UsIHRoaXMuZ2wuRlJBR01FTlRfU0hBREVSLCAnRlJBR01FTlQnKTtcbiAgICAgICAgdGhpcy5nbEhlYWRTZWFyY2hEcmF3U2hhZGVyUHJvZ3JhbSA9IHRoaXMuZ2wuY3JlYXRlUHJvZ3JhbSgpO1xuICAgICAgICB0aGlzLmdsLmF0dGFjaFNoYWRlcih0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtLCBnbFNoYWRlclZlcnRleCk7XG4gICAgICAgIHRoaXMuZ2wuYXR0YWNoU2hhZGVyKHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0sIGdsU2hhZGVyRnJhZ21lbnQpO1xuICAgICAgICB0aGlzLmdsLmxpbmtQcm9ncmFtKHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0pO1xuICAgICAgICBjb25zdCBzYW1wbGVyVmlkZW8gPSB0aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtLCAnc2FtcGxlclZpZGVvJyk7XG4gICAgICAgIHRoaXMuaGVhZFNlYXJjaFVuaWZvcm1YeXMgPSB0aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtLCAndXh5cycpO1xuICAgICAgICB0aGlzLmhlYWRTZWFyY2hVbmlmb3JtVmlkZW9UcmFuc2Zvcm1NYXQyID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5nbEhlYWRTZWFyY2hEcmF3U2hhZGVyUHJvZ3JhbSwgJ3ZpZGVvVHJhbnNmb3JtTWF0MicpO1xuICAgICAgICB0aGlzLmdsLnVzZVByb2dyYW0odGhpcy5nbEhlYWRTZWFyY2hEcmF3U2hhZGVyUHJvZ3JhbSk7XG4gICAgICAgIHRoaXMuZ2wudW5pZm9ybTFpKHNhbXBsZXJWaWRlbywgMCk7XG4gICAgfVxuICAgIGRyYXdIZWFkU2VhcmNoKGRldGVjdFN0YXRlKSB7XG4gICAgICAgIC8vIHVuYmluZCB0aGUgY3VycmVudCBGQk8gYW5kIHNldCB0aGUgdmlld3BvcnQgYXMgdGhlIHdob2xlIGNhbnZhczpcbiAgICAgICAgdGhpcy5nbC52aWV3cG9ydCgwLCAwLCB0aGlzLmN2LndpZHRoLCB0aGlzLmN2LmhlaWdodCk7XG4gICAgICAgIC8vIHVzZSB0aGUgaGVhZCBkcmF3IHNoYWRlciBwcm9ncmFtIGFuZCBzeW5jIHVuaWZvcm1zOlxuICAgICAgICB0aGlzLmdsLnVzZVByb2dyYW0odGhpcy5nbEhlYWRTZWFyY2hEcmF3U2hhZGVyUHJvZ3JhbSk7XG4gICAgICAgIHRoaXMuZ2wuYWN0aXZlVGV4dHVyZSh0aGlzLmdsLlRFWFRVUkUwKTtcbiAgICAgICAgdGhpcy5nbC5iaW5kVGV4dHVyZSh0aGlzLmdsLlRFWFRVUkVfMkQsIHRoaXMudmlkZW9UZXh0dXJlKTtcbiAgICAgICAgdGhpcy5nbC51bmlmb3JtM2YodGhpcy5oZWFkU2VhcmNoVW5pZm9ybVh5cywgZGV0ZWN0U3RhdGUueCwgZGV0ZWN0U3RhdGUueSwgZGV0ZWN0U3RhdGUucyk7XG4gICAgICAgIHRoaXMuZ2wudW5pZm9ybU1hdHJpeDJmdih0aGlzLmhlYWRTZWFyY2hVbmlmb3JtVmlkZW9UcmFuc2Zvcm1NYXQyLCBmYWxzZSwgdGhpcy52aWRlb1RyYW5zZm9ybU1hdDIpO1xuICAgICAgICAvLyBkcmF3IHRoZSBzcXVhcmUgbG9va2luZyBmb3IgdGhlIGhlYWRcbiAgICAgICAgLy8gdGhlIFZCTyBmaWxsaW5nIHRoZSB3aG9sZSBzY3JlZW4gaXMgc3RpbGwgYm91bmQgdG8gdGhlIGNvbnRleHRcbiAgICAgICAgLy8gZmlsbCB0aGUgdmlld1BvcnQ6XG4gICAgICAgIHRoaXMuZ2wuZHJhd0VsZW1lbnRzKHRoaXMuZ2wuVFJJQU5HTEVTLCAzLCB0aGlzLmdsLlVOU0lHTkVEX1NIT1JULCAwKTtcbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSBIZWFkQ29udHJvbFNlcnZpY2U7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuaW5pdEhlYWRDb250cm9sID0gZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuY29uc3QgSGVhZENvbnRyb2xTZXJ2aWNlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vSGVhZENvbnRyb2xTZXJ2aWNlXCIpKTtcbnZhciBIZWFkQ29udHJvbFNlcnZpY2VfMiA9IHJlcXVpcmUoXCIuL0hlYWRDb250cm9sU2VydmljZVwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9faW1wb3J0RGVmYXVsdChIZWFkQ29udHJvbFNlcnZpY2VfMikuZGVmYXVsdDsgfSB9KTtcbmNvbnN0IGluaXRIZWFkQ29udHJvbCA9ICgpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBoZWFkQ29udHJvbFNlcnZpY2UgPSBuZXcgSGVhZENvbnRyb2xTZXJ2aWNlXzEuZGVmYXVsdCgnaGVhZC1wcmV2aWV3Jywge1xuICAgICAgICAgICAgb25SZWFkeTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdoZWFkIGNvbnRyb2wgaXMgcmVhZHknKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25DYW1lcmFQZXJzbWlzc2lvbkZhaWxlZDogKCkgPT4gYWxlcnQoJ1RoaXMgZ2FtZSBpcyBoZWFkLWNvbnRyb2xsZWQuIFlvdSBuZWVkIHRvIGVuYWJsZSBjYW1lcmEgdG8gcGxheSB0aGUgZ2FtZS4nKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGhlYWRDb250cm9sU2VydmljZS50b2dnbGUodHJ1ZSk7XG4gICAgICAgIGhlYWRDb250cm9sU2VydmljZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZSBvcGVuZWQnLCAoKSA9PiBjb25zb2xlLmxvZygnbW91c2Ugb3BlbmVkJykpO1xuICAgICAgICBoZWFkQ29udHJvbFNlcnZpY2UuYWRkRXZlbnRMaXN0ZW5lcignbW91c2UgY2xvc2VkJywgKCkgPT4gY29uc29sZS5sb2coJ21vdXNlIGNsb3NlZCcpKTtcbiAgICAgICAgaGVhZENvbnRyb2xTZXJ2aWNlLmFkZEV2ZW50TGlzdGVuZXIoJ2xlZnQnLCAoKSA9PiBjb25zb2xlLmxvZygnbGVmdCcpKTtcbiAgICAgICAgaGVhZENvbnRyb2xTZXJ2aWNlLmFkZEV2ZW50TGlzdGVuZXIoJ3JpZ2h0JywgKCkgPT4gY29uc29sZS5sb2coJ3JpZ2h0JykpO1xuICAgIH0pO1xufTtcbmV4cG9ydHMuaW5pdEhlYWRDb250cm9sID0gaW5pdEhlYWRDb250cm9sO1xuIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pZiAoISgnY3JlYXRlSW1hZ2VCaXRtYXAnIGluIHdpbmRvdykpIHtcbiAgICB3aW5kb3cuY3JlYXRlSW1hZ2VCaXRtYXAgPSBmdW5jdGlvbiAoYmxvYikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgICAgICAgaW1nLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaW1nLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmluaXRJbWFnZUNhcHR1cmUgPSBleHBvcnRzLnRha2VQaG90byA9IHZvaWQgMDtcbnJlcXVpcmUoXCJpbWFnZS1jYXB0dXJlXCIpO1xucmVxdWlyZShcIi4vYml0bWFwUG9seWZpbGwudHNcIik7XG5sZXQgaW1hZ2VDYXB0dXJlO1xubGV0IGlzSW5pdCA9IGZhbHNlO1xuY29uc3QgdGFrZVBob3RvID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgaWYgKCFpbWFnZUNhcHR1cmUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB5aWVsZCBpbWFnZUNhcHR1cmVcbiAgICAgICAgLnRha2VQaG90bygpXG4gICAgICAgIC50aGVuKChibG9iKSA9PiBjcmVhdGVJbWFnZUJpdG1hcChibG9iKSlcbiAgICAgICAgLnRoZW4oKGltYWdlQml0bWFwKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0YWtlUGhvdG9DYW52YXMnKTtcbiAgICAgICAgY2FudmFzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBkcmF3Q2FudmFzKGNhbnZhcywgaW1hZ2VCaXRtYXApO1xuICAgICAgICAvL2NhbnZhcy50b0Jsb2IoYXN5bmMgKGJsb2IpID0+IHtcbiAgICAgICAgLy8gIHRyeSB7XG4gICAgICAgIC8vICAgIGF3YWl0IGNyZWF0ZUZpbGUoYmxvYik7XG4gICAgICAgIC8vICAgIGF3YWl0IHJlYWRGaWxlKCk7XG4gICAgICAgIC8vICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vICAgIHRocm93IGU7XG4gICAgICAgIC8vICB9XG4gICAgICAgIC8vfSk7XG4gICAgfSk7XG59KTtcbmV4cG9ydHMudGFrZVBob3RvID0gdGFrZVBob3RvO1xuZnVuY3Rpb24gZHJhd0NhbnZhcyhjYW52YXMsIGltZykge1xuICAgIGNhbnZhcy53aWR0aCA9IGdldENvbXB1dGVkU3R5bGUoY2FudmFzKS53aWR0aC5zcGxpdCgncHgnKVswXTtcbiAgICBjYW52YXMuaGVpZ2h0ID0gZ2V0Q29tcHV0ZWRTdHlsZShjYW52YXMpLmhlaWdodC5zcGxpdCgncHgnKVswXTtcbiAgICBsZXQgcmF0aW8gPSBNYXRoLm1pbihjYW52YXMud2lkdGggLyBpbWcud2lkdGgsIGNhbnZhcy5oZWlnaHQgLyBpbWcuaGVpZ2h0KTtcbiAgICBsZXQgeCA9IChjYW52YXMud2lkdGggLSBpbWcud2lkdGggKiByYXRpbykgLyAyO1xuICAgIGxldCB5ID0gKGNhbnZhcy5oZWlnaHQgLSBpbWcuaGVpZ2h0ICogcmF0aW8pIC8gMjtcbiAgICBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKS5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKS5kcmF3SW1hZ2UoaW1nLCAwLCAwLCBpbWcud2lkdGgsIGltZy5oZWlnaHQsIHgsIHksIGltZy53aWR0aCAqIHJhdGlvLCBpbWcuaGVpZ2h0ICogcmF0aW8pO1xufVxuY29uc3QgaW5pdEltYWdlQ2FwdHVyZSA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIGlmIChpc0luaXQpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBpc0luaXQgPSB0cnVlO1xuICAgIHJldHVybiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzXG4gICAgICAgIC5nZXRVc2VyTWVkaWEoeyB2aWRlbzogdHJ1ZSB9KVxuICAgICAgICAudGhlbigobWVkaWFTdHJlYW0pID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHRyYWNrID0gbWVkaWFTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXTtcbiAgICAgICAgICAgIGltYWdlQ2FwdHVyZSA9IG5ldyBJbWFnZUNhcHR1cmUodHJhY2spO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2ltYWdlIGNhcHR1cmUgaW5pdGllZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgfSlcbiAgICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgYWxlcnQoJ0ltYWdlIGNhcHR1cmUgaXMgbm90IHN1cHBvcnRlZCBvbiB5b3VyIGRldmljZSA6KCcpO1xuICAgIH0pO1xufSk7XG5leHBvcnRzLmluaXRJbWFnZUNhcHR1cmUgPSBpbml0SW1hZ2VDYXB0dXJlO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuc2F5U29tZXRoaW5nID0gZXhwb3J0cy5zZXRVcFVzZXIgPSBleHBvcnRzLlBIUkFTRVMgPSBleHBvcnRzLmluaXRWb2ljZVNlcnZpY2UgPSB2b2lkIDA7XG5sZXQgVk9JQ0U7XG5jb25zdCBpbml0Vm9pY2VTZXJ2aWNlID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgVk9JQ0UgPSB3aW5kb3cuc3BlZWNoU3ludGhlc2lzLmdldFZvaWNlcygpLmZpbmQoKHsgbGFuZyB9KSA9PiBsYW5nID09PSAnZW4tR0InKTtcbiAgICAgICAgICAgIGlmICghVk9JQ0UpIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLmluaXRWb2ljZVNlcnZpY2UoKS50aGVuKHJlc29sdmUpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd2b2ljZSBpbml0Jyk7XG4gICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICB9LCA1MDApO1xuICAgIH0pO1xufSk7XG5leHBvcnRzLmluaXRWb2ljZVNlcnZpY2UgPSBpbml0Vm9pY2VTZXJ2aWNlO1xuZXhwb3J0cy5QSFJBU0VTID0ge1xuICAgIEhFTExPOiAnYEhpLCAldXNlcm5hbWUlLiBIYXZlIGEgZ29vZCBnYW1lJyxcbiAgICBSSUdIVDogJ0dvb2QgcmlnaHQgdHVybiwgJXVzZXJuYW1lJScsXG59O1xubGV0IHVzZXJOYW1lID0gJyc7XG5jb25zdCBzZXRVcFVzZXIgPSAobmFtZSkgPT4ge1xuICAgIHVzZXJOYW1lID0gbmFtZTtcbn07XG5leHBvcnRzLnNldFVwVXNlciA9IHNldFVwVXNlcjtcbmNvbnN0IHNheVNvbWV0aGluZyA9ICh0ZXh0KSA9PiB7XG4gICAgaWYgKCFWT0lDRSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHV0dGVyYW5jZSA9IG5ldyBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UodGV4dC5yZXBsYWNlKCcldXNlcm5hbWUlJywgdXNlck5hbWUpKTtcbiAgICB1dHRlcmFuY2Uudm9pY2UgPSBWT0lDRTtcbiAgICB1dHRlcmFuY2Uudm9sdW1lID0gMTtcbiAgICB1dHRlcmFuY2UucGl0Y2ggPSAxO1xuICAgIHV0dGVyYW5jZS5yYXRlID0gMTtcbiAgICBzcGVlY2hTeW50aGVzaXMuY2FuY2VsKCk7XG4gICAgc3BlZWNoU3ludGhlc2lzLnNwZWFrKHV0dGVyYW5jZSk7XG59O1xuZXhwb3J0cy5zYXlTb21ldGhpbmcgPSBzYXlTb21ldGhpbmc7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIGRlZmluaXRpb24pIHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGVcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDYwNyk7XG4iXSwic291cmNlUm9vdCI6IiJ9