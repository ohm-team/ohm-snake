/*! For license information please see main.9b2de27fa3d52a2b832e.js.LICENSE.txt */
!function(){var e={608:function(e){var t,o,i,n,a;t=console.log,o=console.warn,i=console.error,n=console.debug,a={unbind:function(){console.log=t,console.warn=o,console.error=i,console.debug=n},bind:function(e,a){if("function"!=typeof e)return console.error("You must pass a valid callback function."),!1;a=Boolean(a);const r="info",s="warn",d="error",l="debug";console.log=console.info=function(){t&&(a||t.call(console,...arguments),e(r,arguments))},console.warn=function(){o&&(a||o.call(console,...arguments),e(s,arguments))},console.error=function(){i&&(a||i.call(console,...arguments),e(d,arguments))},console.debug=function(){n&&(a||n.call(console,...arguments),e(l,arguments))}}},void 0!==e.exports?e.exports=a:window&&"object"==typeof window?window.ConsoleSubscriber=a:console.error("Failed to export module.")},505:function(e,t,o){"use strict";o.r(t),o.d(t,{ImageCapture:function(){return i}});let i=window.ImageCapture;void 0===i&&(i=class{constructor(e){if("video"!==e.kind)throw new DOMException("NotSupportedError");this._videoStreamTrack=e,"readyState"in this._videoStreamTrack||(this._videoStreamTrack.readyState="live"),this._previewStream=new MediaStream([e]),this.videoElement=document.createElement("video"),this.videoElementPlaying=new Promise((e=>{this.videoElement.addEventListener("playing",e)})),HTMLMediaElement?this.videoElement.srcObject=this._previewStream:this.videoElement.src=URL.createObjectURL(this._previewStream),this.videoElement.muted=!0,this.videoElement.setAttribute("playsinline",""),this.videoElement.play(),this.canvasElement=document.createElement("canvas"),this.canvas2dContext=this.canvasElement.getContext("2d")}get videoStreamTrack(){return this._videoStreamTrack}getPhotoCapabilities(){return new Promise((function(e,t){const o={current:0,min:0,max:0};e({exposureCompensation:o,exposureMode:"none",fillLightMode:"none",focusMode:"none",imageHeight:o,imageWidth:o,iso:o,redEyeReduction:!1,whiteBalanceMode:"none",zoom:o}),t(new DOMException("OperationError"))}))}setOptions(e={}){return new Promise((function(e,t){}))}takePhoto(){const e=this;return new Promise((function(t,o){if("live"!==e._videoStreamTrack.readyState)return o(new DOMException("InvalidStateError"));e.videoElementPlaying.then((()=>{try{e.canvasElement.width=e.videoElement.videoWidth,e.canvasElement.height=e.videoElement.videoHeight,e.canvas2dContext.drawImage(e.videoElement,0,0),e.canvasElement.toBlob(t)}catch(e){o(new DOMException("UnknownError"))}}))}))}grabFrame(){const e=this;return new Promise((function(t,o){if("live"!==e._videoStreamTrack.readyState)return o(new DOMException("InvalidStateError"));e.videoElementPlaying.then((()=>{try{e.canvasElement.width=e.videoElement.videoWidth,e.canvasElement.height=e.videoElement.videoHeight,e.canvas2dContext.drawImage(e.videoElement,0,0),t(window.createImageBitmap(e.canvasElement))}catch(e){o(new DOMException("UnknownError"))}}))}))}}),window.ImageCapture=i},90:function(e,t,o){"use strict";o.r(t)},688:function(e,t,o){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.enableMobileConsole=void 0;const n=i(o(608));t.enableMobileConsole=()=>{const e=[];n.default.bind(((t,o)=>{5===e.length&&e.shift(),e.push({category:t,message:o[0]}),document.getElementById("console").innerHTML=e.map((e=>`<p>${e.message}</p>`)).join("")}))}},203:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},607:function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,a){function r(e){try{d(i.next(e))}catch(e){a(e)}}function s(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=o(688),a=o(341),r=o(717),s=o(614);o(203),o(90);const d=$("#startButton"),l=$("#preloader"),c=$("#start"),h=$("#game"),u=$("#nameInput"),m=e=>i(void 0,void 0,void 0,(function*(){try{console.log("start game"),h.show(),c.hide(),s.setUpUser(e),s.saySomething(s.PHRASES.HELLO),yield r.takePhoto()}catch(e){alert(e)}}));window.onload=()=>i(void 0,void 0,void 0,(function*(){n.enableMobileConsole(),yield i(void 0,void 0,void 0,(function*(){l.show(),h.hide(),c.hide(),yield i(void 0,void 0,void 0,(function*(){return Promise.all([r.initImageCapture(),s.initVoiceService(),a.initHeadControl()]).then((()=>{l.hide(),c.show()})).catch((e=>{console.log(e)}))})),u.on("input",(()=>{u.val()?d.prop("disabled",!1):d.prop("disabled",!0)})),d.click((()=>i(void 0,void 0,void 0,(function*(){yield m(u.val())}))))}))}))},800:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o={mouseOpeningTreshold:.6,mouseClosingTreshold:.5,headMovementStartedTreshold:.15,headMovementStoppedTreshold:.08};class i extends EventTarget{constructor(e,t){super(),this.movementLocks={vertical:!1,horizontal:!1,mouseOpened:!1},this.state={isLoaded:!1,isDetected:!1,isEnabled:!1},this.gl=null,this.cv=null,this.videoTexture=null,this.videoTransformMat2=null,this.glHeadSearchDrawShaderProgram=null,this.headSearchUniformXys=null,this.headSearchUniformVideoTransformMat2=null,this.handleMouseOpening=e=>{if(e.ry<-1*this.settings.headMovementStartedTreshold||e.ry>this.settings.headMovementStartedTreshold)return;let t=5*(e.expressions[0]-.2);return t=Math.min(Math.max(t,0),1),t>this.settings.mouseOpeningTreshold&&!this.movementLocks.mouseOpened?(this.movementLocks.mouseOpened=!0,void this.dispatchEvent(new Event("mouse opened"))):t<this.settings.mouseClosingTreshold&&this.movementLocks.mouseOpened?(this.movementLocks.mouseOpened=!1,void this.dispatchEvent(new Event("mouse closed"))):void 0},this.handleMove=e=>{0!==e.rx&&this.handleAxisMovement({axis:"vertical",axisPosition:e.rx,maxValue:"down",minValue:"up"}),0!==e.ry&&this.handleAxisMovement({axis:"horizontal",axisPosition:e.ry,maxValue:"left",minValue:"right"})},this.handleAxisMovement=({axis:e,axisPosition:t,maxValue:o,minValue:i})=>t<-1*this.settings.headMovementStartedTreshold&&!this.movementLocks[e]?(this.movementLocks[e]=!0,void this.dispatchEvent(new Event(i))):t>this.settings.headMovementStartedTreshold&&!this.movementLocks[e]?(this.movementLocks[e]=!0,void this.dispatchEvent(new Event(o))):void(t>-1*this.settings.headMovementStoppedTreshold&&t<this.settings.headMovementStoppedTreshold&&(this.movementLocks[e]=!1)),this.settings=Object.assign(Object.assign({},o),t),window.JEEFACEFILTERAPI.init({canvasId:e,NNCPath:"./vendor/",animateDelay:20,callbackReady:(e,o)=>{if(e)return(e="WEBCAM_UNAVAILABLE")?void(t.onCameraPersmissionFailed&&t.onCameraPersmissionFailed()):void console.error("AN ERROR HAPPENS. SORRY BRO :( . ERR =",e);this.gl=o.GL,this.videoTexture=o.videoTexture,this.videoTransformMat2=o.videoTransformMat2,this.cv=o.canvasElement,this.initHeadSearchDraw(),this.state.isLoaded=!0,t.onReady&&t.onReady()},callbackTrack:e=>{this.state.isEnabled&&(this.drawHeadSearch(e),this.handleMove(e),this.handleMouseOpening(e))}})}toggle(e){return this.state.isEnabled===e||(this.state.isEnabled=e),!0}compileShader(e,t,o){const i=this.gl.createShader(t);return this.gl.shaderSource(i,e),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(alert("ERROR IN "+o+" SHADER: "+this.gl.getShaderInfoLog(i)),null)}initHeadSearchDraw(){const e=this.compileShader("\n      attribute vec2 aat_position;\n      varying vec2 vUV;\n      \n      void main(void) {\n        gl_Position = vec4(aat_position, 0., 1.);\n        vUV = 0.5 + 0.5 * aat_position;\n        vUV.x = 1.-vUV.x; // mirror diplay\n      }",this.gl.VERTEX_SHADER,"VERTEX"),t=this.compileShader("\n      precision lowp float;\n      varying vec2 vUV;\n      \n      uniform sampler2D samplerVideo;\n      uniform mat2 videoTransformMat2;\n      uniform vec3 uxys;\n      \n      void main(void) {\n        vec2 uvVideoCentered = 2.0 * videoTransformMat2 * (vUV - 0.5);\n        vec2 uvVideo = uvVideoCentered + 0.5;\n        vec3 colorVideo = texture2D(samplerVideo, uvVideo).rgb;\n        vec2 pos = vUV*2.-vec2(1.,1.);\n        vec2 isInside = step(uxys.xy-uxys.z*vec2(1.,1.), pos);\n        isInside *= step(pos, uxys.xy+uxys.z*vec2(1.,1.));\n        vec2 blendCenterFactor = abs(pos-uxys.xy) / uxys.z;\n        float alpha = isInside.x * isInside.y * pow(max(blendCenterFactor.x, blendCenterFactor.y), 3.);\n        vec3 color = mix(colorVideo, vec3(0.,0.6,1.), alpha);\n        gl_FragColor = vec4(color,1.);\n      }",this.gl.FRAGMENT_SHADER,"FRAGMENT");this.glHeadSearchDrawShaderProgram=this.gl.createProgram(),this.gl.attachShader(this.glHeadSearchDrawShaderProgram,e),this.gl.attachShader(this.glHeadSearchDrawShaderProgram,t),this.gl.linkProgram(this.glHeadSearchDrawShaderProgram);const o=this.gl.getUniformLocation(this.glHeadSearchDrawShaderProgram,"samplerVideo");this.headSearchUniformXys=this.gl.getUniformLocation(this.glHeadSearchDrawShaderProgram,"uxys"),this.headSearchUniformVideoTransformMat2=this.gl.getUniformLocation(this.glHeadSearchDrawShaderProgram,"videoTransformMat2"),this.gl.useProgram(this.glHeadSearchDrawShaderProgram),this.gl.uniform1i(o,0)}drawHeadSearch(e){this.gl.viewport(0,0,this.cv.width,this.cv.height),this.gl.useProgram(this.glHeadSearchDrawShaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.videoTexture),this.gl.uniform3f(this.headSearchUniformXys,e.x,e.y,e.s),this.gl.uniformMatrix2fv(this.headSearchUniformVideoTransformMat2,!1,this.videoTransformMat2),this.gl.drawElements(this.gl.TRIANGLES,3,this.gl.UNSIGNED_SHORT,0)}}t.default=i},341:function(e,t,o){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.initHeadControl=t.default=void 0;const n=i(o(800));var a=o(800);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(a).default}}),t.initHeadControl=()=>new Promise(((e,t)=>{const o=new n.default("head-preview",{onReady:()=>{console.log("head control is ready"),e()},onCameraPersmissionFailed:()=>alert("This game is head-controlled. You need to enable camera to play the game.")});o.toggle(!0),o.addEventListener("mouse opened",(()=>console.log("mouse opened"))),o.addEventListener("mouse closed",(()=>console.log("mouse closed"))),o.addEventListener("left",(()=>console.log("left"))),o.addEventListener("right",(()=>console.log("right")))}))},717:function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,a){function r(e){try{d(i.next(e))}catch(e){a(e)}}function s(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}d((i=i.apply(e,t||[])).next())}))};let n;Object.defineProperty(t,"__esModule",{value:!0}),t.initImageCapture=t.takePhoto=void 0,o(505);let a=!1;t.takePhoto=()=>i(void 0,void 0,void 0,(function*(){n&&(yield n.takePhoto().then((e=>createImageBitmap(e))).then((e=>{const t=document.querySelector("#takePhotoCanvas");t.style.display="block",function(e,t){e.width=getComputedStyle(e).width.split("px")[0],e.height=getComputedStyle(e).height.split("px")[0];let o=Math.min(e.width/t.width,e.height/t.height),i=(e.width-t.width*o)/2,n=(e.height-t.height*o)/2;e.getContext("2d").clearRect(0,0,e.width,e.height),e.getContext("2d").drawImage(t,0,0,t.width,t.height,i,n,t.width*o,t.height*o)}(t,e)})))})),t.initImageCapture=()=>i(void 0,void 0,void 0,(function*(){return a?Promise.resolve():(a=!0,navigator.mediaDevices.getUserMedia({video:!0}).then((e=>{try{const t=e.getVideoTracks()[0];n=new ImageCapture(t),console.log("image capture initied")}catch(e){throw e}})).catch((()=>{alert("Image capture is not supported on your device :(")})))}))},614:function(e,t){"use strict";var o=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,a){function r(e){try{d(i.next(e))}catch(e){a(e)}}function s(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}d((i=i.apply(e,t||[])).next())}))};let i;Object.defineProperty(t,"__esModule",{value:!0}),t.saySomething=t.setUpUser=t.PHRASES=t.initVoiceService=void 0,t.initVoiceService=()=>o(void 0,void 0,void 0,(function*(){return new Promise((e=>{setTimeout((()=>{i=window.speechSynthesis.getVoices().find((({lang:e})=>"en-GB"===e)),i?(console.log("voice init"),e(!0)):t.initVoiceService().then(e)}),500)}))})),t.PHRASES={HELLO:"`Hi, %username%. Have a good game",RIGHT:"Good right turn, %username%"};let n="";t.setUpUser=e=>{n=e},t.saySomething=e=>{if(!i)return;const t=new SpeechSynthesisUtterance(e.replace("%username%",n));t.voice=i,t.volume=1,t.pitch=1,t.rate=1,speechSynthesis.cancel(),speechSynthesis.speak(t)}}},t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,o),n.exports}o.d=function(e,t){for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o(607)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vaG0tc25ha2UvLi9ub2RlX21vZHVsZXMvY29uc29sZS1zdWJzY3JpYmVyL2luZGV4LmpzIiwid2VicGFjazovL29obS1zbmFrZS8uL25vZGVfbW9kdWxlcy9pbWFnZS1jYXB0dXJlL3NyYy9pbWFnZWNhcHR1cmUuanMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL2NvbnNvbGUudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL2RlY2xhcmUudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL29obS1zbmFrZS8uL3NyYy9zZXJ2aWNlcy9IZWFkQ29udHJvbFNlcnZpY2UvSGVhZENvbnRyb2xTZXJ2aWNlLnRzIiwid2VicGFjazovL29obS1zbmFrZS8uL3NyYy9zZXJ2aWNlcy9IZWFkQ29udHJvbFNlcnZpY2UvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL3NlcnZpY2VzL0ltYWdlQ2FwdHVyZVNlcnZpY2UvaW1hZ2VDYXB0dXJlLnRzIiwid2VicGFjazovL29obS1zbmFrZS8uL3NyYy9zZXJ2aWNlcy9Wb2ljZVNlcnZpY2Uvdm9pY2UudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL29obS1zbmFrZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6WyJfbG9nIiwiX3dhcm4iLCJfZXJyb3IiLCJfZGVidWciLCJDb25zb2xlU3Vic2NyaWJlciIsImNvbnNvbGUiLCJsb2ciLCJ3YXJuIiwiZXJyb3IiLCJkZWJ1ZyIsInVuYmluZCIsImJpbmQiLCJjYiIsInByZXZlbnRMb2dnaW5nIiwiQm9vbGVhbiIsIkNBVEVHT1JZX0lORk8iLCJDQVRFR09SWV9XQVJOIiwiQ0FURUdPUllfRVJST1IiLCJDQVRFR09SWV9ERUJVRyIsImluZm8iLCJjYWxsIiwiYXJndW1lbnRzIiwibW9kdWxlIiwiZXhwb3J0cyIsIndpbmRvdyIsIkltYWdlQ2FwdHVyZSIsInZpZGVvU3RyZWFtVHJhY2siLCJraW5kIiwiRE9NRXhjZXB0aW9uIiwidGhpcyIsIl92aWRlb1N0cmVhbVRyYWNrIiwicmVhZHlTdGF0ZSIsIl9wcmV2aWV3U3RyZWFtIiwiTWVkaWFTdHJlYW0iLCJ2aWRlb0VsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ2aWRlb0VsZW1lbnRQbGF5aW5nIiwiUHJvbWlzZSIsInJlc29sdmUiLCJhZGRFdmVudExpc3RlbmVyIiwiSFRNTE1lZGlhRWxlbWVudCIsInNyY09iamVjdCIsInNyYyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIm11dGVkIiwic2V0QXR0cmlidXRlIiwicGxheSIsImNhbnZhc0VsZW1lbnQiLCJjYW52YXMyZENvbnRleHQiLCJnZXRDb250ZXh0IiwicmVqZWN0IiwiTWVkaWFTZXR0aW5nc1JhbmdlIiwiY3VycmVudCIsIm1pbiIsIm1heCIsImV4cG9zdXJlQ29tcGVuc2F0aW9uIiwiZXhwb3N1cmVNb2RlIiwiZmlsbExpZ2h0TW9kZSIsImZvY3VzTW9kZSIsImltYWdlSGVpZ2h0IiwiaW1hZ2VXaWR0aCIsImlzbyIsInJlZEV5ZVJlZHVjdGlvbiIsIndoaXRlQmFsYW5jZU1vZGUiLCJ6b29tIiwicGhvdG9TZXR0aW5ncyIsInNlbGYiLCJ0aGVuIiwid2lkdGgiLCJ2aWRlb1dpZHRoIiwiaGVpZ2h0IiwidmlkZW9IZWlnaHQiLCJkcmF3SW1hZ2UiLCJ0b0Jsb2IiLCJjcmVhdGVJbWFnZUJpdG1hcCIsIl9faW1wb3J0RGVmYXVsdCIsIm1vZCIsIl9fZXNNb2R1bGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiZW5hYmxlTW9iaWxlQ29uc29sZSIsImNvbnNvbGVfc3Vic2NyaWJlcl8xIiwiYnVmZmVyIiwiZGVmYXVsdCIsImNhdGVnb3J5IiwiYXJncyIsImxlbmd0aCIsInNoaWZ0IiwicHVzaCIsIm1lc3NhZ2UiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsIm1hcCIsIm0iLCJqb2luIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiZnVsZmlsbGVkIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwiYXBwbHkiLCJjb25zb2xlXzEiLCJIZWFkQ29udHJvbFNlcnZpY2VfMSIsImltYWdlQ2FwdHVyZV8xIiwidm9pY2VfMSIsInN0YXJ0QnV0dG9uIiwiJCIsInByZWxvYWRlciIsInN0YXJ0U2NyZWVuIiwiZ2FtZVNjcmVlbiIsIm5hbWVJbnB1dCIsInN0YXJ0R2FtZSIsInBsYXllck5hbWUiLCJzaG93IiwiaGlkZSIsInNldFVwVXNlciIsInNheVNvbWV0aGluZyIsIlBIUkFTRVMiLCJIRUxMTyIsInRha2VQaG90byIsImFsZXJ0Iiwib25sb2FkIiwiYWxsIiwiaW5pdEltYWdlQ2FwdHVyZSIsImluaXRWb2ljZVNlcnZpY2UiLCJpbml0SGVhZENvbnRyb2wiLCJjYXRjaCIsIm9uIiwidmFsIiwicHJvcCIsImNsaWNrIiwiZGVmYXVsdFNldHRpbmdzIiwibW91c2VPcGVuaW5nVHJlc2hvbGQiLCJtb3VzZUNsb3NpbmdUcmVzaG9sZCIsImhlYWRNb3ZlbWVudFN0YXJ0ZWRUcmVzaG9sZCIsImhlYWRNb3ZlbWVudFN0b3BwZWRUcmVzaG9sZCIsIkhlYWRDb250cm9sU2VydmljZSIsIkV2ZW50VGFyZ2V0IiwiY2FudmFzSWQiLCJzZXR0aW5ncyIsInN1cGVyIiwibW92ZW1lbnRMb2NrcyIsInZlcnRpY2FsIiwiaG9yaXpvbnRhbCIsIm1vdXNlT3BlbmVkIiwic3RhdGUiLCJpc0xvYWRlZCIsImlzRGV0ZWN0ZWQiLCJpc0VuYWJsZWQiLCJnbCIsImN2IiwidmlkZW9UZXh0dXJlIiwidmlkZW9UcmFuc2Zvcm1NYXQyIiwiZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0iLCJoZWFkU2VhcmNoVW5pZm9ybVh5cyIsImhlYWRTZWFyY2hVbmlmb3JtVmlkZW9UcmFuc2Zvcm1NYXQyIiwiaGFuZGxlTW91c2VPcGVuaW5nIiwiZGV0ZWN0U3RhdGUiLCJyeSIsIm1vdXRoT3BlbmluZyIsImV4cHJlc3Npb25zIiwiTWF0aCIsImRpc3BhdGNoRXZlbnQiLCJFdmVudCIsImhhbmRsZU1vdmUiLCJtdiIsInJ4IiwiaGFuZGxlQXhpc01vdmVtZW50IiwiYXhpcyIsImF4aXNQb3NpdGlvbiIsIm1heFZhbHVlIiwibWluVmFsdWUiLCJhc3NpZ24iLCJKRUVGQUNFRklMVEVSQVBJIiwiaW5pdCIsIk5OQ1BhdGgiLCJhbmltYXRlRGVsYXkiLCJjYWxsYmFja1JlYWR5IiwiZXJyQ29kZSIsImplZUZhY2VGaWx0ZXJPYmoiLCJvbkNhbWVyYVBlcnNtaXNzaW9uRmFpbGVkIiwiaW5pdEhlYWRTZWFyY2hEcmF3Iiwib25SZWFkeSIsImNhbGxiYWNrVHJhY2siLCJkcmF3SGVhZFNlYXJjaCIsInNvdXJjZSIsImdsVHlwZSIsInR5cGVTdHJpbmciLCJnbFNoYWRlciIsImNyZWF0ZVNoYWRlciIsInNoYWRlclNvdXJjZSIsImNvbXBpbGVTaGFkZXIiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsImdldFNoYWRlckluZm9Mb2ciLCJnbFNoYWRlclZlcnRleCIsIlZFUlRFWF9TSEFERVIiLCJnbFNoYWRlckZyYWdtZW50IiwiRlJBR01FTlRfU0hBREVSIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwic2FtcGxlclZpZGVvIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwidXNlUHJvZ3JhbSIsInVuaWZvcm0xaSIsInZpZXdwb3J0IiwiYWN0aXZlVGV4dHVyZSIsIlRFWFRVUkUwIiwiYmluZFRleHR1cmUiLCJURVhUVVJFXzJEIiwidW5pZm9ybTNmIiwieCIsInkiLCJzIiwidW5pZm9ybU1hdHJpeDJmdiIsImRyYXdFbGVtZW50cyIsIlRSSUFOR0xFUyIsIlVOU0lHTkVEX1NIT1JUIiwiSGVhZENvbnRyb2xTZXJ2aWNlXzIiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiaGVhZENvbnRyb2xTZXJ2aWNlIiwidG9nZ2xlIiwiaW1hZ2VDYXB0dXJlIiwiaXNJbml0IiwiYmxvYiIsImltYWdlQml0bWFwIiwiY2FudmFzIiwicXVlcnlTZWxlY3RvciIsInN0eWxlIiwiZGlzcGxheSIsImltZyIsImdldENvbXB1dGVkU3R5bGUiLCJzcGxpdCIsInJhdGlvIiwiY2xlYXJSZWN0IiwiZHJhd0NhbnZhcyIsIm5hdmlnYXRvciIsIm1lZGlhRGV2aWNlcyIsImdldFVzZXJNZWRpYSIsInZpZGVvIiwibWVkaWFTdHJlYW0iLCJ0cmFjayIsImdldFZpZGVvVHJhY2tzIiwiVk9JQ0UiLCJzZXRUaW1lb3V0Iiwic3BlZWNoU3ludGhlc2lzIiwiZ2V0Vm9pY2VzIiwiZmluZCIsImxhbmciLCJSSUdIVCIsInVzZXJOYW1lIiwibmFtZSIsInRleHQiLCJ1dHRlcmFuY2UiLCJTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UiLCJyZXBsYWNlIiwidm9pY2UiLCJ2b2x1bWUiLCJwaXRjaCIsInJhdGUiLCJjYW5jZWwiLCJzcGVhayIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJvYmoiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyJdLCJtYXBwaW5ncyI6IjttQ0FLQSxJQUNRQSxFQUNBQyxFQUNBQyxFQUNBQyxFQUVBQyxFQUxBSixFQUFPSyxRQUFRQyxJQUNmTCxFQUFRSSxRQUFR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QXlCRSxHQUFZLENBR2pEN1AsUUFBUyxJQU9WLE9BSEE4UCxFQUFvQkQsR0FBVWhRLEtBQUtFLEVBQU9DLFFBQVNELEVBQVFBLEVBQU9DLFFBQVM0UCxHQUdwRTdQLEVBQU9DLFFDbkJmNFAsRUFBb0JHLEVBQUksU0FBUy9QLEVBQVNnUSxHQUN6QyxJQUFJLElBQUlDLEtBQU9ELEVBQ1hKLEVBQW9CTSxFQUFFRixFQUFZQyxLQUFTTCxFQUFvQk0sRUFBRWxRLEVBQVNpUSxJQUM1RXhNLE9BQU9DLGVBQWUxRCxFQUFTaVEsRUFBSyxDQUFFbEQsWUFBWSxFQUFNQyxJQUFLZ0QsRUFBV0MsTUNKM0VMLEVBQW9CTSxFQUFJLFNBQVNDLEVBQUsvSSxHQUFRLE9BQU8zRCxPQUFPMk0sVUFBVUMsZUFBZXhRLEtBQUtzUSxFQUFLL0ksSUNDL0Z3SSxFQUFvQlUsRUFBSSxTQUFTdFEsR0FDWCxvQkFBWHVRLFFBQTBCQSxPQUFPQyxhQUMxQy9NLE9BQU9DLGVBQWUxRCxFQUFTdVEsT0FBT0MsWUFBYSxDQUFFN00sTUFBTyxXQUU3REYsT0FBT0MsZUFBZTFELEVBQVMsYUFBYyxDQUFFMkQsT0FBTyxLQ0Z2RGlNLEVBQW9CLEsiLCJmaWxlIjoibWFpbi5kYWQ3MDRkZDhmOGQ0YzBhMWEzNC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU3Vic2NyaWJlIHRvIHRoZSBjb25zb2xlIG91dHB1dCBcbiAqXG4gKiBAYXV0aG9yIFNhbXNvbiBSYWR1XG4gKi8gXG4oZnVuY3Rpb24oKXtcbiAgICB2YXIgX2xvZyA9IGNvbnNvbGUubG9nO1xuICAgIHZhciBfd2FybiA9IGNvbnNvbGUud2FybjtcbiAgICB2YXIgX2Vycm9yID0gY29uc29sZS5lcnJvcjtcbiAgICB2YXIgX2RlYnVnID0gY29uc29sZS5kZWJ1ZztcblxuICAgIHZhciBDb25zb2xlU3Vic2NyaWJlciA9IHtcbiAgICAgICAgdW5iaW5kOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgY29uc29sZS5sb2cgPSBfbG9nO1xuICAgICAgICAgICAgY29uc29sZS53YXJuID0gX3dhcm47XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yID0gX2Vycm9yO1xuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyA9IF9kZWJ1ZztcbiAgICAgICAgfSwgXG4gICAgICAgIGJpbmQ6IGZ1bmN0aW9uKGNiLCBwcmV2ZW50TG9nZ2luZyl7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiWW91IG11c3QgcGFzcyBhIHZhbGlkIGNhbGxiYWNrIGZ1bmN0aW9uLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHByZXZlbnRMb2dnaW5nID0gQm9vbGVhbihwcmV2ZW50TG9nZ2luZyk7IC8vZm9yY2UgYm9vbFxuXG4gICAgICAgICAgICBjb25zdCBDQVRFR09SWV9JTkZPID0gXCJpbmZvXCI7XG4gICAgICAgICAgICBjb25zdCBDQVRFR09SWV9XQVJOID0gXCJ3YXJuXCI7XG4gICAgICAgICAgICBjb25zdCBDQVRFR09SWV9FUlJPUiA9IFwiZXJyb3JcIjtcbiAgICAgICAgICAgIGNvbnN0IENBVEVHT1JZX0RFQlVHID0gXCJkZWJ1Z1wiO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyA9IGNvbnNvbGUuaW5mbyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgaWYgKF9sb2cpe1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXByZXZlbnRMb2dnaW5nKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9sb2cuY2FsbChjb25zb2xlLCAuLi5hcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNiKENBVEVHT1JZX0lORk8sIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc29sZS53YXJuID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpZiAoX3dhcm4pe1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXByZXZlbnRMb2dnaW5nKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF93YXJuLmNhbGwoY29uc29sZSwgLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYihDQVRFR09SWV9XQVJOLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGlmIChfZXJyb3Ipe1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXByZXZlbnRMb2dnaW5nKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lcnJvci5jYWxsKGNvbnNvbGUsIC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2IoQ0FURUdPUllfRVJST1IsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgaWYgKF9kZWJ1Zyl7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcHJldmVudExvZ2dpbmcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2RlYnVnLmNhbGwoY29uc29sZSwgLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYihDQVRFR09SWV9ERUJVRywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvL2V4cG9ydFxuICAgIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgIT09ICd1bmRlZmluZWQnKXtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBDb25zb2xlU3Vic2NyaWJlcjtcbiAgICB9XG4gICAgZWxzZSBpZiAod2luZG93ICYmIHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKXtcbiAgICAgICAgd2luZG93LkNvbnNvbGVTdWJzY3JpYmVyID0gQ29uc29sZVN1YnNjcmliZXI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGV4cG9ydCBtb2R1bGUuXCIpO1xuICAgIH1cbn0pKCk7XG4iLCIvKipcbiAqIE1lZGlhU3RyZWFtIEltYWdlQ2FwdHVyZSBwb2x5ZmlsbFxuICpcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuZXhwb3J0IGxldCBJbWFnZUNhcHR1cmUgPSB3aW5kb3cuSW1hZ2VDYXB0dXJlO1xuXG5pZiAodHlwZW9mIEltYWdlQ2FwdHVyZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgSW1hZ2VDYXB0dXJlID0gY2xhc3Mge1xuXG4gICAgLyoqXG4gICAgICogVE9ETyBodHRwczovL3d3dy53My5vcmcvVFIvaW1hZ2UtY2FwdHVyZS8jY29uc3RydWN0b3JzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge01lZGlhU3RyZWFtVHJhY2t9IHZpZGVvU3RyZWFtVHJhY2sgLSBBIE1lZGlhU3RyZWFtVHJhY2sgb2YgdGhlICd2aWRlbycga2luZFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHZpZGVvU3RyZWFtVHJhY2spIHtcbiAgICAgIGlmICh2aWRlb1N0cmVhbVRyYWNrLmtpbmQgIT09ICd2aWRlbycpXG4gICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJ05vdFN1cHBvcnRlZEVycm9yJyk7XG5cbiAgICAgIHRoaXMuX3ZpZGVvU3RyZWFtVHJhY2sgPSB2aWRlb1N0cmVhbVRyYWNrO1xuICAgICAgaWYgKCEoJ3JlYWR5U3RhdGUnIGluIHRoaXMuX3ZpZGVvU3RyZWFtVHJhY2spKSB7XG4gICAgICAgIC8vIFBvbHlmaWxsIGZvciBGaXJlZm94XG4gICAgICAgIHRoaXMuX3ZpZGVvU3RyZWFtVHJhY2sucmVhZHlTdGF0ZSA9ICdsaXZlJztcbiAgICAgIH1cblxuICAgICAgLy8gTWVkaWFTdHJlYW0gY29uc3RydWN0b3Igbm90IGF2YWlsYWJsZSB1bnRpbCBDaHJvbWUgNTUgLSBodHRwczovL3d3dy5jaHJvbWVzdGF0dXMuY29tL2ZlYXR1cmUvNTkxMjE3MjU0Njc1MjUxMlxuICAgICAgdGhpcy5fcHJldmlld1N0cmVhbSA9IG5ldyBNZWRpYVN0cmVhbShbdmlkZW9TdHJlYW1UcmFja10pO1xuICAgICAgdGhpcy52aWRlb0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgICAgdGhpcy52aWRlb0VsZW1lbnRQbGF5aW5nID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXlpbmcnLCByZXNvbHZlKTtcbiAgICAgIH0pO1xuICAgICAgaWYgKEhUTUxNZWRpYUVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuc3JjT2JqZWN0ID0gdGhpcy5fcHJldmlld1N0cmVhbTsgIC8vIFNhZmFyaSAxMSBkb2Vzbid0IGFsbG93IHVzZSBvZiBjcmVhdGVPYmplY3RVUkwgZm9yIE1lZGlhU3RyZWFtXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHRoaXMuX3ByZXZpZXdTdHJlYW0pO1xuICAgICAgfVxuICAgICAgdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQgPSB0cnVlO1xuICAgICAgdGhpcy52aWRlb0VsZW1lbnQuc2V0QXR0cmlidXRlKCdwbGF5c2lubGluZScsICcnKTsgLy8gUmVxdWlyZWQgYnkgU2FmYXJpIG9uIGlPUyAxMS4gU2VlIGh0dHBzOi8vd2Via2l0Lm9yZy9ibG9nLzY3ODRcbiAgICAgIHRoaXMudmlkZW9FbGVtZW50LnBsYXkoKTtcblxuICAgICAgdGhpcy5jYW52YXNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAvLyBUT0RPIEZpcmVmb3ggaGFzIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9PZmZzY3JlZW5DYW52YXNcbiAgICAgIHRoaXMuY2FudmFzMmRDb250ZXh0ID0gdGhpcy5jYW52YXNFbGVtZW50LmdldENvbnRleHQoJzJkJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogaHR0cHM6Ly93M2MuZ2l0aHViLmlvL21lZGlhY2FwdHVyZS1pbWFnZS9pbmRleC5odG1sI2RvbS1pbWFnZWNhcHR1cmUtdmlkZW9zdHJlYW10cmFja1xuICAgICAqIEByZXR1cm4ge01lZGlhU3RyZWFtVHJhY2t9IFRoZSBNZWRpYVN0cmVhbVRyYWNrIHBhc3NlZCBpbnRvIHRoZSBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGdldCB2aWRlb1N0cmVhbVRyYWNrKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3ZpZGVvU3RyZWFtVHJhY2s7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyBodHRwczovL3d3dy53My5vcmcvVFIvaW1hZ2UtY2FwdHVyZS8jZG9tLWltYWdlY2FwdHVyZS1nZXRwaG90b2NhcGFiaWxpdGllc1xuICAgICAqIEByZXR1cm4ge1Byb21pc2U8UGhvdG9DYXBhYmlsaXRpZXM+fSBGdWxmaWxsZWQgcHJvbWlzZSB3aXRoXG4gICAgICogW1Bob3RvQ2FwYWJpbGl0aWVzXShodHRwczovL3d3dy53My5vcmcvVFIvaW1hZ2UtY2FwdHVyZS8jaWRsLWRlZi1waG90b2NhcGFiaWxpdGllcylcbiAgICAgKiBvYmplY3Qgb24gc3VjY2VzcywgcmVqZWN0ZWQgcHJvbWlzZSBvbiBmYWlsdXJlXG4gICAgICovXG4gICAgZ2V0UGhvdG9DYXBhYmlsaXRpZXMoKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZXhlY3V0b3JHUEMocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIC8vIFRPRE8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93M2MvbWVkaWFjYXB0dXJlLWltYWdlL2lzc3Vlcy85N1xuICAgICAgICBjb25zdCBNZWRpYVNldHRpbmdzUmFuZ2UgPSB7XG4gICAgICAgICAgY3VycmVudDogMCwgbWluOiAwLCBtYXg6IDAsXG4gICAgICAgIH07XG4gICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgIGV4cG9zdXJlQ29tcGVuc2F0aW9uOiBNZWRpYVNldHRpbmdzUmFuZ2UsXG4gICAgICAgICAgZXhwb3N1cmVNb2RlOiAnbm9uZScsXG4gICAgICAgICAgZmlsbExpZ2h0TW9kZTogJ25vbmUnLFxuICAgICAgICAgIGZvY3VzTW9kZTogJ25vbmUnLFxuICAgICAgICAgIGltYWdlSGVpZ2h0OiBNZWRpYVNldHRpbmdzUmFuZ2UsXG4gICAgICAgICAgaW1hZ2VXaWR0aDogTWVkaWFTZXR0aW5nc1JhbmdlLFxuICAgICAgICAgIGlzbzogTWVkaWFTZXR0aW5nc1JhbmdlLFxuICAgICAgICAgIHJlZEV5ZVJlZHVjdGlvbjogZmFsc2UsXG4gICAgICAgICAgd2hpdGVCYWxhbmNlTW9kZTogJ25vbmUnLFxuICAgICAgICAgIHpvb206IE1lZGlhU2V0dGluZ3NSYW5nZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlamVjdChuZXcgRE9NRXhjZXB0aW9uKCdPcGVyYXRpb25FcnJvcicpKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEltcGxlbWVudHMgaHR0cHM6Ly93d3cudzMub3JnL1RSL2ltYWdlLWNhcHR1cmUvI2RvbS1pbWFnZWNhcHR1cmUtc2V0b3B0aW9uc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwaG90b1NldHRpbmdzIC0gUGhvdG8gc2V0dGluZ3MgZGljdGlvbmFyeSwgaHR0cHM6Ly93d3cudzMub3JnL1RSL2ltYWdlLWNhcHR1cmUvI2lkbC1kZWYtcGhvdG9zZXR0aW5nc1xuICAgICAqIEByZXR1cm4ge1Byb21pc2U8dm9pZD59IEZ1bGZpbGxlZCBwcm9taXNlIG9uIHN1Y2Nlc3MsIHJlamVjdGVkIHByb21pc2Ugb24gZmFpbHVyZVxuICAgICAqL1xuICAgIHNldE9wdGlvbnMocGhvdG9TZXR0aW5ncyA9IHt9KSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZXhlY3V0b3JTTyhyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgLy8gVE9ET1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVE9ET1xuICAgICAqIEltcGxlbWVudHMgaHR0cHM6Ly93d3cudzMub3JnL1RSL2ltYWdlLWNhcHR1cmUvI2RvbS1pbWFnZWNhcHR1cmUtdGFrZXBob3RvXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxCbG9iPn0gRnVsZmlsbGVkIHByb21pc2Ugd2l0aCBbQmxvYl0oaHR0cHM6Ly93d3cudzMub3JnL1RSL0ZpbGVBUEkvI2Jsb2IpXG4gICAgICogYXJndW1lbnQgb24gc3VjY2VzczsgcmVqZWN0ZWQgcHJvbWlzZSBvbiBmYWlsdXJlXG4gICAgICovXG4gICAgdGFrZVBob3RvKCkge1xuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZXhlY3V0b3JUUChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgLy8gYElmIHRoZSByZWFkeVN0YXRlIG9mIHRoZSBNZWRpYVN0cmVhbVRyYWNrIHByb3ZpZGVkIGluIHRoZSBjb25zdHJ1Y3RvciBpcyBub3QgbGl2ZSxcbiAgICAgICAgLy8gcmV0dXJuIGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIGEgbmV3IERPTUV4Y2VwdGlvbiB3aG9zZSBuYW1lIGlzIFwiSW52YWxpZFN0YXRlRXJyb3JcIi5gXG4gICAgICAgIGlmIChzZWxmLl92aWRlb1N0cmVhbVRyYWNrLnJlYWR5U3RhdGUgIT09ICdsaXZlJykge1xuICAgICAgICAgIHJldHVybiByZWplY3QobmV3IERPTUV4Y2VwdGlvbignSW52YWxpZFN0YXRlRXJyb3InKSk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi52aWRlb0VsZW1lbnRQbGF5aW5nLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzZWxmLmNhbnZhc0VsZW1lbnQud2lkdGggPSBzZWxmLnZpZGVvRWxlbWVudC52aWRlb1dpZHRoO1xuICAgICAgICAgICAgc2VsZi5jYW52YXNFbGVtZW50LmhlaWdodCA9IHNlbGYudmlkZW9FbGVtZW50LnZpZGVvSGVpZ2h0O1xuICAgICAgICAgICAgc2VsZi5jYW52YXMyZENvbnRleHQuZHJhd0ltYWdlKHNlbGYudmlkZW9FbGVtZW50LCAwLCAwKTtcbiAgICAgICAgICAgIHNlbGYuY2FudmFzRWxlbWVudC50b0Jsb2IocmVzb2x2ZSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRE9NRXhjZXB0aW9uKCdVbmtub3duRXJyb3InKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEltcGxlbWVudHMgaHR0cHM6Ly93d3cudzMub3JnL1RSL2ltYWdlLWNhcHR1cmUvI2RvbS1pbWFnZWNhcHR1cmUtZ3JhYmZyYW1lXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxJbWFnZUJpdG1hcD59IEZ1bGZpbGxlZCBwcm9taXNlIHdpdGhcbiAgICAgKiBbSW1hZ2VCaXRtYXBdKGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNTEvd2ViYXBwYXBpcy5odG1sI3dlYmFwcGFwaXMtaW1hZ2VzKVxuICAgICAqIGFyZ3VtZW50IG9uIHN1Y2Nlc3M7IHJlamVjdGVkIHByb21pc2Ugb24gZmFpbHVyZVxuICAgICAqL1xuICAgIGdyYWJGcmFtZSgpIHtcbiAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGV4ZWN1dG9yR0YocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIC8vIGBJZiB0aGUgcmVhZHlTdGF0ZSBvZiB0aGUgTWVkaWFTdHJlYW1UcmFjayBwcm92aWRlZCBpbiB0aGUgY29uc3RydWN0b3IgaXMgbm90IGxpdmUsXG4gICAgICAgIC8vIHJldHVybiBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCBhIG5ldyBET01FeGNlcHRpb24gd2hvc2UgbmFtZSBpcyBcIkludmFsaWRTdGF0ZUVycm9yXCIuYFxuICAgICAgICBpZiAoc2VsZi5fdmlkZW9TdHJlYW1UcmFjay5yZWFkeVN0YXRlICE9PSAnbGl2ZScpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBET01FeGNlcHRpb24oJ0ludmFsaWRTdGF0ZUVycm9yJykpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYudmlkZW9FbGVtZW50UGxheWluZy50aGVuKCgpID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2VsZi5jYW52YXNFbGVtZW50LndpZHRoID0gc2VsZi52aWRlb0VsZW1lbnQudmlkZW9XaWR0aDtcbiAgICAgICAgICAgIHNlbGYuY2FudmFzRWxlbWVudC5oZWlnaHQgPSBzZWxmLnZpZGVvRWxlbWVudC52aWRlb0hlaWdodDtcbiAgICAgICAgICAgIHNlbGYuY2FudmFzMmRDb250ZXh0LmRyYXdJbWFnZShzZWxmLnZpZGVvRWxlbWVudCwgMCwgMCk7XG4gICAgICAgICAgICAvLyBUT0RPIHBvbHlmaWxsIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JbWFnZUJpdG1hcEZhY3Rvcmllcy9jcmVhdGVJbWFnZUJpdG1hcCBmb3IgSUVcbiAgICAgICAgICAgIHJlc29sdmUod2luZG93LmNyZWF0ZUltYWdlQml0bWFwKHNlbGYuY2FudmFzRWxlbWVudCkpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZWplY3QobmV3IERPTUV4Y2VwdGlvbignVW5rbm93bkVycm9yJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG5cbndpbmRvdy5JbWFnZUNhcHR1cmUgPSBJbWFnZUNhcHR1cmU7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZW5hYmxlTW9iaWxlQ29uc29sZSA9IHZvaWQgMDtcbmNvbnN0IGNvbnNvbGVfc3Vic2NyaWJlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJjb25zb2xlLXN1YnNjcmliZXJcIikpO1xuY29uc3QgZW5hYmxlTW9iaWxlQ29uc29sZSA9ICgpID0+IHtcbiAgICBjb25zdCBidWZmZXIgPSBbXTtcbiAgICBjb25zb2xlX3N1YnNjcmliZXJfMS5kZWZhdWx0LmJpbmQoKGNhdGVnb3J5LCBhcmdzKSA9PiB7XG4gICAgICAgIGlmIChidWZmZXIubGVuZ3RoID09PSA1KSB7XG4gICAgICAgICAgICBidWZmZXIuc2hpZnQoKTtcbiAgICAgICAgfVxuICAgICAgICBidWZmZXIucHVzaCh7IGNhdGVnb3J5LCBtZXNzYWdlOiBhcmdzWzBdIH0pO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uc29sZScpLmlubmVySFRNTCA9IGJ1ZmZlci5tYXAoKG0pID0+IGA8cD4ke20ubWVzc2FnZX08L3A+YCkuam9pbignJyk7XG4gICAgfSk7XG59O1xuZXhwb3J0cy5lbmFibGVNb2JpbGVDb25zb2xlID0gZW5hYmxlTW9iaWxlQ29uc29sZTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IGNvbnNvbGVfMSA9IHJlcXVpcmUoXCIuL2NvbnNvbGVcIik7XG5jb25zdCBIZWFkQ29udHJvbFNlcnZpY2VfMSA9IHJlcXVpcmUoXCIuL3NlcnZpY2VzL0hlYWRDb250cm9sU2VydmljZVwiKTtcbmNvbnN0IGltYWdlQ2FwdHVyZV8xID0gcmVxdWlyZShcIi4vc2VydmljZXMvSW1hZ2VDYXB0dXJlU2VydmljZS9pbWFnZUNhcHR1cmVcIik7XG5jb25zdCB2b2ljZV8xID0gcmVxdWlyZShcIi4vc2VydmljZXMvVm9pY2VTZXJ2aWNlL3ZvaWNlXCIpO1xucmVxdWlyZShcIi4vZGVjbGFyZVwiKTtcbnJlcXVpcmUoXCIuL3N0eWxlL2luZGV4LnNjc3NcIik7XG5jb25zdCBzdGFydEJ1dHRvbiA9ICQoJyNzdGFydEJ1dHRvbicpO1xuY29uc3QgcHJlbG9hZGVyID0gJCgnI3ByZWxvYWRlcicpO1xuY29uc3Qgc3RhcnRTY3JlZW4gPSAkKCcjc3RhcnQnKTtcbmNvbnN0IGdhbWVTY3JlZW4gPSAkKCcjZ2FtZScpO1xuY29uc3QgbmFtZUlucHV0ID0gJCgnI25hbWVJbnB1dCcpO1xuY29uc3QgaW5pdEFsbEFQSSA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbaW1hZ2VDYXB0dXJlXzEuaW5pdEltYWdlQ2FwdHVyZSgpLCB2b2ljZV8xLmluaXRWb2ljZVNlcnZpY2UoKSwgSGVhZENvbnRyb2xTZXJ2aWNlXzEuaW5pdEhlYWRDb250cm9sKCldKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHByZWxvYWRlci5oaWRlKCk7XG4gICAgICAgIHN0YXJ0U2NyZWVuLnNob3coKTtcbiAgICB9KVxuICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgfSk7XG59KTtcbmNvbnN0IGluaXRBcHAgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICBwcmVsb2FkZXIuc2hvdygpO1xuICAgIGdhbWVTY3JlZW4uaGlkZSgpO1xuICAgIHN0YXJ0U2NyZWVuLmhpZGUoKTtcbiAgICB5aWVsZCBpbml0QWxsQVBJKCk7XG4gICAgbmFtZUlucHV0Lm9uKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgaWYgKG5hbWVJbnB1dC52YWwoKSkge1xuICAgICAgICAgICAgc3RhcnRCdXR0b24ucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdGFydEJ1dHRvbi5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgc3RhcnRCdXR0b24uY2xpY2soKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHlpZWxkIHN0YXJ0R2FtZShuYW1lSW5wdXQudmFsKCkpO1xuICAgIH0pKTtcbn0pO1xuY29uc3Qgc3RhcnRHYW1lID0gKHBsYXllck5hbWUpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzdGFydCBnYW1lJyk7XG4gICAgICAgIGdhbWVTY3JlZW4uc2hvdygpO1xuICAgICAgICBzdGFydFNjcmVlbi5oaWRlKCk7XG4gICAgICAgIHZvaWNlXzEuc2V0VXBVc2VyKHBsYXllck5hbWUpO1xuICAgICAgICB2b2ljZV8xLnNheVNvbWV0aGluZyh2b2ljZV8xLlBIUkFTRVMuSEVMTE8pO1xuICAgICAgICB5aWVsZCBpbWFnZUNhcHR1cmVfMS50YWtlUGhvdG8oKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgYWxlcnQoZSk7XG4gICAgfVxufSk7XG53aW5kb3cub25sb2FkID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc29sZV8xLmVuYWJsZU1vYmlsZUNvbnNvbGUoKTtcbiAgICB5aWVsZCBpbml0QXBwKCk7XG59KTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgZGVmYXVsdFNldHRpbmdzID0ge1xuICAgIG1vdXNlT3BlbmluZ1RyZXNob2xkOiAwLjYsXG4gICAgbW91c2VDbG9zaW5nVHJlc2hvbGQ6IDAuNSxcbiAgICBoZWFkTW92ZW1lbnRTdGFydGVkVHJlc2hvbGQ6IDAuMTUsXG4gICAgaGVhZE1vdmVtZW50U3RvcHBlZFRyZXNob2xkOiAwLjA4LFxufTtcbmNsYXNzIEhlYWRDb250cm9sU2VydmljZSBleHRlbmRzIEV2ZW50VGFyZ2V0IHtcbiAgICBjb25zdHJ1Y3RvcihjYW52YXNJZCwgc2V0dGluZ3MpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5tb3ZlbWVudExvY2tzID0ge1xuICAgICAgICAgICAgdmVydGljYWw6IGZhbHNlLFxuICAgICAgICAgICAgaG9yaXpvbnRhbDogZmFsc2UsXG4gICAgICAgICAgICBtb3VzZU9wZW5lZDogZmFsc2UsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBpc0xvYWRlZDogZmFsc2UsXG4gICAgICAgICAgICBpc0RldGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGlzRW5hYmxlZDogZmFsc2UsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2wgPSBudWxsO1xuICAgICAgICB0aGlzLmN2ID0gbnVsbDtcbiAgICAgICAgdGhpcy52aWRlb1RleHR1cmUgPSBudWxsO1xuICAgICAgICB0aGlzLnZpZGVvVHJhbnNmb3JtTWF0MiA9IG51bGw7XG4gICAgICAgIHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0gPSBudWxsO1xuICAgICAgICB0aGlzLmhlYWRTZWFyY2hVbmlmb3JtWHlzID0gbnVsbDtcbiAgICAgICAgdGhpcy5oZWFkU2VhcmNoVW5pZm9ybVZpZGVvVHJhbnNmb3JtTWF0MiA9IG51bGw7XG4gICAgICAgIHRoaXMuaGFuZGxlTW91c2VPcGVuaW5nID0gKGRldGVjdFN0YXRlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZGV0ZWN0U3RhdGUucnkgPCAtMSAqIHRoaXMuc2V0dGluZ3MuaGVhZE1vdmVtZW50U3RhcnRlZFRyZXNob2xkIHx8IGRldGVjdFN0YXRlLnJ5ID4gdGhpcy5zZXR0aW5ncy5oZWFkTW92ZW1lbnRTdGFydGVkVHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICAvLyBIZWFkIHNob3VsZCBiZSBpbiB0aGUgY2VudGVyIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG1vdXRoT3BlbmluZyA9IChkZXRlY3RTdGF0ZS5leHByZXNzaW9uc1swXSAtIDAuMikgKiA1LjA7XG4gICAgICAgICAgICBtb3V0aE9wZW5pbmcgPSBNYXRoLm1pbihNYXRoLm1heChtb3V0aE9wZW5pbmcsIDApLCAxKTtcbiAgICAgICAgICAgIGlmIChtb3V0aE9wZW5pbmcgPiB0aGlzLnNldHRpbmdzLm1vdXNlT3BlbmluZ1RyZXNob2xkICYmICF0aGlzLm1vdmVtZW50TG9ja3MubW91c2VPcGVuZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVtZW50TG9ja3MubW91c2VPcGVuZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ21vdXNlIG9wZW5lZCcpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW91dGhPcGVuaW5nIDwgdGhpcy5zZXR0aW5ncy5tb3VzZUNsb3NpbmdUcmVzaG9sZCAmJiB0aGlzLm1vdmVtZW50TG9ja3MubW91c2VPcGVuZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVtZW50TG9ja3MubW91c2VPcGVuZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdtb3VzZSBjbG9zZWQnKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZU1vdmUgPSAobXYpID0+IHtcbiAgICAgICAgICAgIGlmIChtdi5yeCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQXhpc01vdmVtZW50KHsgYXhpczogJ3ZlcnRpY2FsJywgYXhpc1Bvc2l0aW9uOiBtdi5yeCwgbWF4VmFsdWU6ICdkb3duJywgbWluVmFsdWU6ICd1cCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobXYucnkgIT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUF4aXNNb3ZlbWVudCh7IGF4aXM6ICdob3Jpem9udGFsJywgYXhpc1Bvc2l0aW9uOiBtdi5yeSwgbWF4VmFsdWU6ICdsZWZ0JywgbWluVmFsdWU6ICdyaWdodCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlQXhpc01vdmVtZW50ID0gKHsgYXhpcywgYXhpc1Bvc2l0aW9uLCBtYXhWYWx1ZSwgbWluVmFsdWUsIH0pID0+IHtcbiAgICAgICAgICAgIGlmIChheGlzUG9zaXRpb24gPCAtMSAqIHRoaXMuc2V0dGluZ3MuaGVhZE1vdmVtZW50U3RhcnRlZFRyZXNob2xkICYmICF0aGlzLm1vdmVtZW50TG9ja3NbYXhpc10pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVtZW50TG9ja3NbYXhpc10gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQobWluVmFsdWUpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXhpc1Bvc2l0aW9uID4gdGhpcy5zZXR0aW5ncy5oZWFkTW92ZW1lbnRTdGFydGVkVHJlc2hvbGQgJiYgIXRoaXMubW92ZW1lbnRMb2Nrc1theGlzXSkge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZW1lbnRMb2Nrc1theGlzXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChtYXhWYWx1ZSkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChheGlzUG9zaXRpb24gPiAtMSAqIHRoaXMuc2V0dGluZ3MuaGVhZE1vdmVtZW50U3RvcHBlZFRyZXNob2xkICYmIGF4aXNQb3NpdGlvbiA8IHRoaXMuc2V0dGluZ3MuaGVhZE1vdmVtZW50U3RvcHBlZFRyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlbWVudExvY2tzW2F4aXNdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0U2V0dGluZ3MpLCBzZXR0aW5ncyk7XG4gICAgICAgIHdpbmRvdy5KRUVGQUNFRklMVEVSQVBJLmluaXQoe1xuICAgICAgICAgICAgY2FudmFzSWQ6IGNhbnZhc0lkLFxuICAgICAgICAgICAgTk5DUGF0aDogJy4vdmVuZG9yLycsXG4gICAgICAgICAgICBhbmltYXRlRGVsYXk6IDIwLFxuICAgICAgICAgICAgY2FsbGJhY2tSZWFkeTogKGVyckNvZGUsIGplZUZhY2VGaWx0ZXJPYmopID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyQ29kZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGVyckNvZGUgPSAnV0VCQ0FNX1VOQVZBSUxBQkxFJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLm9uQ2FtZXJhUGVyc21pc3Npb25GYWlsZWQgJiYgc2V0dGluZ3Mub25DYW1lcmFQZXJzbWlzc2lvbkZhaWxlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FOIEVSUk9SIEhBUFBFTlMuIFNPUlJZIEJSTyA6KCAuIEVSUiA9JywgZXJyQ29kZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5nbCA9IGplZUZhY2VGaWx0ZXJPYmpbJ0dMJ107XG4gICAgICAgICAgICAgICAgdGhpcy52aWRlb1RleHR1cmUgPSBqZWVGYWNlRmlsdGVyT2JqWyd2aWRlb1RleHR1cmUnXTtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZGVvVHJhbnNmb3JtTWF0MiA9IGplZUZhY2VGaWx0ZXJPYmpbJ3ZpZGVvVHJhbnNmb3JtTWF0MiddO1xuICAgICAgICAgICAgICAgIHRoaXMuY3YgPSBqZWVGYWNlRmlsdGVyT2JqWydjYW52YXNFbGVtZW50J107XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0SGVhZFNlYXJjaERyYXcoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5vblJlYWR5ICYmIHNldHRpbmdzLm9uUmVhZHkoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBjYWxsZWQgYXQgZWFjaCByZW5kZXIgaXRlcmF0aW9uIChkcmF3aW5nIGxvb3ApOlxuICAgICAgICAgICAgY2FsbGJhY2tUcmFjazogKGRldGVjdFN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmlzRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0hlYWRTZWFyY2goZGV0ZWN0U3RhdGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTW92ZShkZXRlY3RTdGF0ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVNb3VzZU9wZW5pbmcoZGV0ZWN0U3RhdGUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRvZ2dsZShpc0VuYWJsZWQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNFbmFibGVkID09PSBpc0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUuaXNFbmFibGVkID0gaXNFbmFibGVkO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29tcGlsZVNoYWRlcihzb3VyY2UsIGdsVHlwZSwgdHlwZVN0cmluZykge1xuICAgICAgICBjb25zdCBnbFNoYWRlciA9IHRoaXMuZ2wuY3JlYXRlU2hhZGVyKGdsVHlwZSk7XG4gICAgICAgIHRoaXMuZ2wuc2hhZGVyU291cmNlKGdsU2hhZGVyLCBzb3VyY2UpO1xuICAgICAgICB0aGlzLmdsLmNvbXBpbGVTaGFkZXIoZ2xTaGFkZXIpO1xuICAgICAgICBpZiAoIXRoaXMuZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKGdsU2hhZGVyLCB0aGlzLmdsLkNPTVBJTEVfU1RBVFVTKSkge1xuICAgICAgICAgICAgYWxlcnQoJ0VSUk9SIElOICcgKyB0eXBlU3RyaW5nICsgJyBTSEFERVI6ICcgKyB0aGlzLmdsLmdldFNoYWRlckluZm9Mb2coZ2xTaGFkZXIpKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnbFNoYWRlcjtcbiAgICB9XG4gICAgaW5pdEhlYWRTZWFyY2hEcmF3KCkge1xuICAgICAgICAvLyBidWlsZCB0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtOlxuICAgICAgICBjb25zdCBzaGFkZXJWZXJ0ZXhTb3VyY2UgPSAnXFxuXFxcbiAgICAgIGF0dHJpYnV0ZSB2ZWMyIGFhdF9wb3NpdGlvbjtcXG5cXFxuICAgICAgdmFyeWluZyB2ZWMyIHZVVjtcXG5cXFxuICAgICAgXFxuXFxcbiAgICAgIHZvaWQgbWFpbih2b2lkKSB7XFxuXFxcbiAgICAgICAgZ2xfUG9zaXRpb24gPSB2ZWM0KGFhdF9wb3NpdGlvbiwgMC4sIDEuKTtcXG5cXFxuICAgICAgICB2VVYgPSAwLjUgKyAwLjUgKiBhYXRfcG9zaXRpb247XFxuXFxcbiAgICAgICAgdlVWLnggPSAxLi12VVYueDsgLy8gbWlycm9yIGRpcGxheVxcblxcXG4gICAgICB9JztcbiAgICAgICAgY29uc3Qgc2hhZGVyRnJhZ21lbnRTb3VyY2UgPSAnXFxuXFxcbiAgICAgIHByZWNpc2lvbiBsb3dwIGZsb2F0O1xcblxcXG4gICAgICB2YXJ5aW5nIHZlYzIgdlVWO1xcblxcXG4gICAgICBcXG5cXFxuICAgICAgdW5pZm9ybSBzYW1wbGVyMkQgc2FtcGxlclZpZGVvO1xcblxcXG4gICAgICB1bmlmb3JtIG1hdDIgdmlkZW9UcmFuc2Zvcm1NYXQyO1xcblxcXG4gICAgICB1bmlmb3JtIHZlYzMgdXh5cztcXG5cXFxuICAgICAgXFxuXFxcbiAgICAgIHZvaWQgbWFpbih2b2lkKSB7XFxuXFxcbiAgICAgICAgdmVjMiB1dlZpZGVvQ2VudGVyZWQgPSAyLjAgKiB2aWRlb1RyYW5zZm9ybU1hdDIgKiAodlVWIC0gMC41KTtcXG5cXFxuICAgICAgICB2ZWMyIHV2VmlkZW8gPSB1dlZpZGVvQ2VudGVyZWQgKyAwLjU7XFxuXFxcbiAgICAgICAgdmVjMyBjb2xvclZpZGVvID0gdGV4dHVyZTJEKHNhbXBsZXJWaWRlbywgdXZWaWRlbykucmdiO1xcblxcXG4gICAgICAgIHZlYzIgcG9zID0gdlVWKjIuLXZlYzIoMS4sMS4pO1xcblxcXG4gICAgICAgIHZlYzIgaXNJbnNpZGUgPSBzdGVwKHV4eXMueHktdXh5cy56KnZlYzIoMS4sMS4pLCBwb3MpO1xcblxcXG4gICAgICAgIGlzSW5zaWRlICo9IHN0ZXAocG9zLCB1eHlzLnh5K3V4eXMueip2ZWMyKDEuLDEuKSk7XFxuXFxcbiAgICAgICAgdmVjMiBibGVuZENlbnRlckZhY3RvciA9IGFicyhwb3MtdXh5cy54eSkgLyB1eHlzLno7XFxuXFxcbiAgICAgICAgZmxvYXQgYWxwaGEgPSBpc0luc2lkZS54ICogaXNJbnNpZGUueSAqIHBvdyhtYXgoYmxlbmRDZW50ZXJGYWN0b3IueCwgYmxlbmRDZW50ZXJGYWN0b3IueSksIDMuKTtcXG5cXFxuICAgICAgICB2ZWMzIGNvbG9yID0gbWl4KGNvbG9yVmlkZW8sIHZlYzMoMC4sMC42LDEuKSwgYWxwaGEpO1xcblxcXG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoY29sb3IsMS4pO1xcblxcXG4gICAgICB9JztcbiAgICAgICAgY29uc3QgZ2xTaGFkZXJWZXJ0ZXggPSB0aGlzLmNvbXBpbGVTaGFkZXIoc2hhZGVyVmVydGV4U291cmNlLCB0aGlzLmdsLlZFUlRFWF9TSEFERVIsICdWRVJURVgnKTtcbiAgICAgICAgY29uc3QgZ2xTaGFkZXJGcmFnbWVudCA9IHRoaXMuY29tcGlsZVNoYWRlcihzaGFkZXJGcmFnbWVudFNvdXJjZSwgdGhpcy5nbC5GUkFHTUVOVF9TSEFERVIsICdGUkFHTUVOVCcpO1xuICAgICAgICB0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtID0gdGhpcy5nbC5jcmVhdGVQcm9ncmFtKCk7XG4gICAgICAgIHRoaXMuZ2wuYXR0YWNoU2hhZGVyKHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0sIGdsU2hhZGVyVmVydGV4KTtcbiAgICAgICAgdGhpcy5nbC5hdHRhY2hTaGFkZXIodGhpcy5nbEhlYWRTZWFyY2hEcmF3U2hhZGVyUHJvZ3JhbSwgZ2xTaGFkZXJGcmFnbWVudCk7XG4gICAgICAgIHRoaXMuZ2wubGlua1Byb2dyYW0odGhpcy5nbEhlYWRTZWFyY2hEcmF3U2hhZGVyUHJvZ3JhbSk7XG4gICAgICAgIGNvbnN0IHNhbXBsZXJWaWRlbyA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0sICdzYW1wbGVyVmlkZW8nKTtcbiAgICAgICAgdGhpcy5oZWFkU2VhcmNoVW5pZm9ybVh5cyA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0sICd1eHlzJyk7XG4gICAgICAgIHRoaXMuaGVhZFNlYXJjaFVuaWZvcm1WaWRlb1RyYW5zZm9ybU1hdDIgPSB0aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtLCAndmlkZW9UcmFuc2Zvcm1NYXQyJyk7XG4gICAgICAgIHRoaXMuZ2wudXNlUHJvZ3JhbSh0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtKTtcbiAgICAgICAgdGhpcy5nbC51bmlmb3JtMWkoc2FtcGxlclZpZGVvLCAwKTtcbiAgICB9XG4gICAgZHJhd0hlYWRTZWFyY2goZGV0ZWN0U3RhdGUpIHtcbiAgICAgICAgLy8gdW5iaW5kIHRoZSBjdXJyZW50IEZCTyBhbmQgc2V0IHRoZSB2aWV3cG9ydCBhcyB0aGUgd2hvbGUgY2FudmFzOlxuICAgICAgICB0aGlzLmdsLnZpZXdwb3J0KDAsIDAsIHRoaXMuY3Yud2lkdGgsIHRoaXMuY3YuaGVpZ2h0KTtcbiAgICAgICAgLy8gdXNlIHRoZSBoZWFkIGRyYXcgc2hhZGVyIHByb2dyYW0gYW5kIHN5bmMgdW5pZm9ybXM6XG4gICAgICAgIHRoaXMuZ2wudXNlUHJvZ3JhbSh0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtKTtcbiAgICAgICAgdGhpcy5nbC5hY3RpdmVUZXh0dXJlKHRoaXMuZ2wuVEVYVFVSRTApO1xuICAgICAgICB0aGlzLmdsLmJpbmRUZXh0dXJlKHRoaXMuZ2wuVEVYVFVSRV8yRCwgdGhpcy52aWRlb1RleHR1cmUpO1xuICAgICAgICB0aGlzLmdsLnVuaWZvcm0zZih0aGlzLmhlYWRTZWFyY2hVbmlmb3JtWHlzLCBkZXRlY3RTdGF0ZS54LCBkZXRlY3RTdGF0ZS55LCBkZXRlY3RTdGF0ZS5zKTtcbiAgICAgICAgdGhpcy5nbC51bmlmb3JtTWF0cml4MmZ2KHRoaXMuaGVhZFNlYXJjaFVuaWZvcm1WaWRlb1RyYW5zZm9ybU1hdDIsIGZhbHNlLCB0aGlzLnZpZGVvVHJhbnNmb3JtTWF0Mik7XG4gICAgICAgIC8vIGRyYXcgdGhlIHNxdWFyZSBsb29raW5nIGZvciB0aGUgaGVhZFxuICAgICAgICAvLyB0aGUgVkJPIGZpbGxpbmcgdGhlIHdob2xlIHNjcmVlbiBpcyBzdGlsbCBib3VuZCB0byB0aGUgY29udGV4dFxuICAgICAgICAvLyBmaWxsIHRoZSB2aWV3UG9ydDpcbiAgICAgICAgdGhpcy5nbC5kcmF3RWxlbWVudHModGhpcy5nbC5UUklBTkdMRVMsIDMsIHRoaXMuZ2wuVU5TSUdORURfU0hPUlQsIDApO1xuICAgIH1cbn1cbmV4cG9ydHMuZGVmYXVsdCA9IEhlYWRDb250cm9sU2VydmljZTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5pbml0SGVhZENvbnRyb2wgPSBleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5jb25zdCBIZWFkQ29udHJvbFNlcnZpY2VfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9IZWFkQ29udHJvbFNlcnZpY2VcIikpO1xudmFyIEhlYWRDb250cm9sU2VydmljZV8yID0gcmVxdWlyZShcIi4vSGVhZENvbnRyb2xTZXJ2aWNlXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX19pbXBvcnREZWZhdWx0KEhlYWRDb250cm9sU2VydmljZV8yKS5kZWZhdWx0OyB9IH0pO1xuY29uc3QgaW5pdEhlYWRDb250cm9sID0gKCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGhlYWRDb250cm9sU2VydmljZSA9IG5ldyBIZWFkQ29udHJvbFNlcnZpY2VfMS5kZWZhdWx0KCdoZWFkLXByZXZpZXcnLCB7XG4gICAgICAgICAgICBvblJlYWR5OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2hlYWQgY29udHJvbCBpcyByZWFkeScpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkNhbWVyYVBlcnNtaXNzaW9uRmFpbGVkOiAoKSA9PiBhbGVydCgnVGhpcyBnYW1lIGlzIGhlYWQtY29udHJvbGxlZC4gWW91IG5lZWQgdG8gZW5hYmxlIGNhbWVyYSB0byBwbGF5IHRoZSBnYW1lLicpLFxuICAgICAgICB9KTtcbiAgICAgICAgaGVhZENvbnRyb2xTZXJ2aWNlLnRvZ2dsZSh0cnVlKTtcbiAgICAgICAgaGVhZENvbnRyb2xTZXJ2aWNlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlIG9wZW5lZCcsICgpID0+IGNvbnNvbGUubG9nKCdtb3VzZSBvcGVuZWQnKSk7XG4gICAgICAgIGhlYWRDb250cm9sU2VydmljZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZSBjbG9zZWQnLCAoKSA9PiBjb25zb2xlLmxvZygnbW91c2UgY2xvc2VkJykpO1xuICAgICAgICBoZWFkQ29udHJvbFNlcnZpY2UuYWRkRXZlbnRMaXN0ZW5lcignbGVmdCcsICgpID0+IGNvbnNvbGUubG9nKCdsZWZ0JykpO1xuICAgICAgICBoZWFkQ29udHJvbFNlcnZpY2UuYWRkRXZlbnRMaXN0ZW5lcigncmlnaHQnLCAoKSA9PiBjb25zb2xlLmxvZygncmlnaHQnKSk7XG4gICAgfSk7XG59O1xuZXhwb3J0cy5pbml0SGVhZENvbnRyb2wgPSBpbml0SGVhZENvbnRyb2w7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5pbml0SW1hZ2VDYXB0dXJlID0gZXhwb3J0cy50YWtlUGhvdG8gPSB2b2lkIDA7XG5yZXF1aXJlKFwiaW1hZ2UtY2FwdHVyZVwiKTtcbmxldCBpbWFnZUNhcHR1cmU7XG5sZXQgaXNJbml0ID0gZmFsc2U7XG5jb25zdCB0YWtlUGhvdG8gPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICBpZiAoIWltYWdlQ2FwdHVyZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHlpZWxkIGltYWdlQ2FwdHVyZVxuICAgICAgICAudGFrZVBob3RvKClcbiAgICAgICAgLnRoZW4oKGJsb2IpID0+IGNyZWF0ZUltYWdlQml0bWFwKGJsb2IpKVxuICAgICAgICAudGhlbigoaW1hZ2VCaXRtYXApID0+IHtcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rha2VQaG90b0NhbnZhcycpO1xuICAgICAgICBjYW52YXMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGRyYXdDYW52YXMoY2FudmFzLCBpbWFnZUJpdG1hcCk7XG4gICAgICAgIC8vY2FudmFzLnRvQmxvYihhc3luYyAoYmxvYikgPT4ge1xuICAgICAgICAvLyAgdHJ5IHtcbiAgICAgICAgLy8gICAgYXdhaXQgY3JlYXRlRmlsZShibG9iKTtcbiAgICAgICAgLy8gICAgYXdhaXQgcmVhZEZpbGUoKTtcbiAgICAgICAgLy8gIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gICAgdGhyb3cgZTtcbiAgICAgICAgLy8gIH1cbiAgICAgICAgLy99KTtcbiAgICB9KTtcbn0pO1xuZXhwb3J0cy50YWtlUGhvdG8gPSB0YWtlUGhvdG87XG5mdW5jdGlvbiBkcmF3Q2FudmFzKGNhbnZhcywgaW1nKSB7XG4gICAgY2FudmFzLndpZHRoID0gZ2V0Q29tcHV0ZWRTdHlsZShjYW52YXMpLndpZHRoLnNwbGl0KCdweCcpWzBdO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBnZXRDb21wdXRlZFN0eWxlKGNhbnZhcykuaGVpZ2h0LnNwbGl0KCdweCcpWzBdO1xuICAgIGxldCByYXRpbyA9IE1hdGgubWluKGNhbnZhcy53aWR0aCAvIGltZy53aWR0aCwgY2FudmFzLmhlaWdodCAvIGltZy5oZWlnaHQpO1xuICAgIGxldCB4ID0gKGNhbnZhcy53aWR0aCAtIGltZy53aWR0aCAqIHJhdGlvKSAvIDI7XG4gICAgbGV0IHkgPSAoY2FudmFzLmhlaWdodCAtIGltZy5oZWlnaHQgKiByYXRpbykgLyAyO1xuICAgIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpLmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpLmRyYXdJbWFnZShpbWcsIDAsIDAsIGltZy53aWR0aCwgaW1nLmhlaWdodCwgeCwgeSwgaW1nLndpZHRoICogcmF0aW8sIGltZy5oZWlnaHQgKiByYXRpbyk7XG59XG5jb25zdCBpbml0SW1hZ2VDYXB0dXJlID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgaWYgKGlzSW5pdCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGlzSW5pdCA9IHRydWU7XG4gICAgcmV0dXJuIG5hdmlnYXRvci5tZWRpYURldmljZXNcbiAgICAgICAgLmdldFVzZXJNZWRpYSh7IHZpZGVvOiB0cnVlIH0pXG4gICAgICAgIC50aGVuKChtZWRpYVN0cmVhbSkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdHJhY2sgPSBtZWRpYVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdO1xuICAgICAgICAgICAgaW1hZ2VDYXB0dXJlID0gbmV3IEltYWdlQ2FwdHVyZSh0cmFjayk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaW1hZ2UgY2FwdHVyZSBpbml0aWVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICBhbGVydCgnSW1hZ2UgY2FwdHVyZSBpcyBub3Qgc3VwcG9ydGVkIG9uIHlvdXIgZGV2aWNlIDooJyk7XG4gICAgfSk7XG59KTtcbmV4cG9ydHMuaW5pdEltYWdlQ2FwdHVyZSA9IGluaXRJbWFnZUNhcHR1cmU7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5zYXlTb21ldGhpbmcgPSBleHBvcnRzLnNldFVwVXNlciA9IGV4cG9ydHMuUEhSQVNFUyA9IGV4cG9ydHMuaW5pdFZvaWNlU2VydmljZSA9IHZvaWQgMDtcbmxldCBWT0lDRTtcbmNvbnN0IGluaXRWb2ljZVNlcnZpY2UgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBWT0lDRSA9IHdpbmRvdy5zcGVlY2hTeW50aGVzaXMuZ2V0Vm9pY2VzKCkuZmluZCgoeyBsYW5nIH0pID0+IGxhbmcgPT09ICdlbi1HQicpO1xuICAgICAgICAgICAgaWYgKCFWT0lDRSkge1xuICAgICAgICAgICAgICAgIGV4cG9ydHMuaW5pdFZvaWNlU2VydmljZSgpLnRoZW4ocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3ZvaWNlIGluaXQnKTtcbiAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0sIDUwMCk7XG4gICAgfSk7XG59KTtcbmV4cG9ydHMuaW5pdFZvaWNlU2VydmljZSA9IGluaXRWb2ljZVNlcnZpY2U7XG5leHBvcnRzLlBIUkFTRVMgPSB7XG4gICAgSEVMTE86ICdgSGksICV1c2VybmFtZSUuIEhhdmUgYSBnb29kIGdhbWUnLFxuICAgIFJJR0hUOiAnR29vZCByaWdodCB0dXJuLCAldXNlcm5hbWUlJyxcbn07XG5sZXQgdXNlck5hbWUgPSAnJztcbmNvbnN0IHNldFVwVXNlciA9IChuYW1lKSA9PiB7XG4gICAgdXNlck5hbWUgPSBuYW1lO1xufTtcbmV4cG9ydHMuc2V0VXBVc2VyID0gc2V0VXBVc2VyO1xuY29uc3Qgc2F5U29tZXRoaW5nID0gKHRleHQpID0+IHtcbiAgICBpZiAoIVZPSUNFKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdXR0ZXJhbmNlID0gbmV3IFNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZSh0ZXh0LnJlcGxhY2UoJyV1c2VybmFtZSUnLCB1c2VyTmFtZSkpO1xuICAgIHV0dGVyYW5jZS52b2ljZSA9IFZPSUNFO1xuICAgIHV0dGVyYW5jZS52b2x1bWUgPSAxO1xuICAgIHV0dGVyYW5jZS5waXRjaCA9IDE7XG4gICAgdXR0ZXJhbmNlLnJhdGUgPSAxO1xuICAgIHNwZWVjaFN5bnRoZXNpcy5jYW5jZWwoKTtcbiAgICBzcGVlY2hTeW50aGVzaXMuc3BlYWsodXR0ZXJhbmNlKTtcbn07XG5leHBvcnRzLnNheVNvbWV0aGluZyA9IHNheVNvbWV0aGluZztcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgZGVmaW5pdGlvbikge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmosIHByb3ApIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApOyB9IiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZVxuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbl9fd2VicGFja19yZXF1aXJlX18oNjA3KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=