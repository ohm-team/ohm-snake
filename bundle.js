/*! For license information please see bundle.js.LICENSE.txt */
!function(){var e={608:function(e){var t,o,i,n,a;t=console.log,o=console.warn,i=console.error,n=console.debug,a={unbind:function(){console.log=t,console.warn=o,console.error=i,console.debug=n},bind:function(e,a){if("function"!=typeof e)return console.error("You must pass a valid callback function."),!1;a=Boolean(a);const r="info",s="warn",d="error",l="debug";console.log=console.info=function(){t&&(a||t.call(console,...arguments),e(r,arguments))},console.warn=function(){o&&(a||o.call(console,...arguments),e(s,arguments))},console.error=function(){i&&(a||i.call(console,...arguments),e(d,arguments))},console.debug=function(){n&&(a||n.call(console,...arguments),e(l,arguments))}}},void 0!==e.exports?e.exports=a:window&&"object"==typeof window?window.ConsoleSubscriber=a:console.error("Failed to export module.")},505:function(e,t,o){"use strict";o.r(t),o.d(t,{ImageCapture:function(){return i}});let i=window.ImageCapture;void 0===i&&(i=class{constructor(e){if("video"!==e.kind)throw new DOMException("NotSupportedError");this._videoStreamTrack=e,"readyState"in this._videoStreamTrack||(this._videoStreamTrack.readyState="live"),this._previewStream=new MediaStream([e]),this.videoElement=document.createElement("video"),this.videoElementPlaying=new Promise((e=>{this.videoElement.addEventListener("playing",e)})),HTMLMediaElement?this.videoElement.srcObject=this._previewStream:this.videoElement.src=URL.createObjectURL(this._previewStream),this.videoElement.muted=!0,this.videoElement.setAttribute("playsinline",""),this.videoElement.play(),this.canvasElement=document.createElement("canvas"),this.canvas2dContext=this.canvasElement.getContext("2d")}get videoStreamTrack(){return this._videoStreamTrack}getPhotoCapabilities(){return new Promise((function(e,t){const o={current:0,min:0,max:0};e({exposureCompensation:o,exposureMode:"none",fillLightMode:"none",focusMode:"none",imageHeight:o,imageWidth:o,iso:o,redEyeReduction:!1,whiteBalanceMode:"none",zoom:o}),t(new DOMException("OperationError"))}))}setOptions(e={}){return new Promise((function(e,t){}))}takePhoto(){const e=this;return new Promise((function(t,o){if("live"!==e._videoStreamTrack.readyState)return o(new DOMException("InvalidStateError"));e.videoElementPlaying.then((()=>{try{e.canvasElement.width=e.videoElement.videoWidth,e.canvasElement.height=e.videoElement.videoHeight,e.canvas2dContext.drawImage(e.videoElement,0,0),e.canvasElement.toBlob(t)}catch(e){o(new DOMException("UnknownError"))}}))}))}grabFrame(){const e=this;return new Promise((function(t,o){if("live"!==e._videoStreamTrack.readyState)return o(new DOMException("InvalidStateError"));e.videoElementPlaying.then((()=>{try{e.canvasElement.width=e.videoElement.videoWidth,e.canvasElement.height=e.videoElement.videoHeight,e.canvas2dContext.drawImage(e.videoElement,0,0),t(window.createImageBitmap(e.canvasElement))}catch(e){o(new DOMException("UnknownError"))}}))}))}}),window.ImageCapture=i},90:function(e,t,o){"use strict";o.r(t)},688:function(e,t,o){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.enableMobileConsole=void 0;const n=i(o(608));t.enableMobileConsole=()=>{const e=[];n.default.bind(((t,o)=>{5===e.length&&e.shift(),e.push({category:t,message:o[0]}),document.getElementById("console").innerHTML=e.map((e=>`<p>${e.message}</p>`)).join("")}))}},203:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},607:function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,a){function r(e){try{d(i.next(e))}catch(e){a(e)}}function s(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=o(688),a=o(341),r=o(717),s=o(614);o(203),o(90);const d=$("#startButton"),l=$("#preloader"),c=$("#start"),h=$("#game"),u=$("#nameInput"),m=e=>i(void 0,void 0,void 0,(function*(){try{yield r.takePhoto(),h.show(),c.hide(),s.setUpUser(e),s.saySomething(s.PHRASES.HELLO)}catch(e){alert(e)}}));window.onload=()=>i(void 0,void 0,void 0,(function*(){n.enableMobileConsole(),yield i(void 0,void 0,void 0,(function*(){l.show(),h.hide(),c.hide(),yield i(void 0,void 0,void 0,(function*(){return Promise.all([r.initImageCapture(),s.initVoiceService(),a.initHeadControl()]).then((()=>{l.hide(),c.show()})).catch((e=>{console.log(e)}))})),u.on("input",(()=>{u.val()?d.prop("disabled",!1):d.prop("disabled",!0)})),d.click((()=>i(void 0,void 0,void 0,(function*(){console.log("start game"),yield m(u.val())}))))}))}))},800:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o={mouseOpeningTreshold:.6,mouseClosingTreshold:.5,headMovementStartedTreshold:.15,headMovementStoppedTreshold:.08};class i extends EventTarget{constructor(e,t){super(),this.movementLocks={vertical:!1,horizontal:!1,mouseOpened:!1},this.state={isLoaded:!1,isDetected:!1,isEnabled:!1},this.gl=null,this.cv=null,this.videoTexture=null,this.videoTransformMat2=null,this.glHeadSearchDrawShaderProgram=null,this.headSearchUniformXys=null,this.headSearchUniformVideoTransformMat2=null,this.handleMouseOpening=e=>{if(e.ry<-1*this.settings.headMovementStartedTreshold||e.ry>this.settings.headMovementStartedTreshold)return;let t=5*(e.expressions[0]-.2);return t=Math.min(Math.max(t,0),1),t>this.settings.mouseOpeningTreshold&&!this.movementLocks.mouseOpened?(this.movementLocks.mouseOpened=!0,void this.dispatchEvent(new Event("mouse opened"))):t<this.settings.mouseClosingTreshold&&this.movementLocks.mouseOpened?(this.movementLocks.mouseOpened=!1,void this.dispatchEvent(new Event("mouse closed"))):void 0},this.handleMove=e=>{0!==e.rx&&this.handleAxisMovement({axis:"vertical",axisPosition:e.rx,maxValue:"down",minValue:"up"}),0!==e.ry&&this.handleAxisMovement({axis:"horizontal",axisPosition:e.ry,maxValue:"left",minValue:"right"})},this.handleAxisMovement=({axis:e,axisPosition:t,maxValue:o,minValue:i})=>t<-1*this.settings.headMovementStartedTreshold&&!this.movementLocks[e]?(this.movementLocks[e]=!0,void this.dispatchEvent(new Event(i))):t>this.settings.headMovementStartedTreshold&&!this.movementLocks[e]?(this.movementLocks[e]=!0,void this.dispatchEvent(new Event(o))):void(t>-1*this.settings.headMovementStoppedTreshold&&t<this.settings.headMovementStoppedTreshold&&(this.movementLocks[e]=!1)),this.settings=Object.assign(Object.assign({},o),t),window.JEEFACEFILTERAPI.init({canvasId:e,NNCPath:"./vendor/",animateDelay:20,callbackReady:(e,o)=>{if(e)return(e="WEBCAM_UNAVAILABLE")?void(t.onCameraPersmissionFailed&&t.onCameraPersmissionFailed()):void console.error("AN ERROR HAPPENS. SORRY BRO :( . ERR =",e);this.gl=o.GL,this.videoTexture=o.videoTexture,this.videoTransformMat2=o.videoTransformMat2,this.cv=o.canvasElement,this.initHeadSearchDraw(),this.state.isLoaded=!0,t.onReady&&t.onReady()},callbackTrack:e=>{this.state.isEnabled&&(this.drawHeadSearch(e),this.handleMove(e),this.handleMouseOpening(e))}})}toggle(e){return this.state.isEnabled===e||(this.state.isEnabled=e),!0}compileShader(e,t,o){const i=this.gl.createShader(t);return this.gl.shaderSource(i,e),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(alert("ERROR IN "+o+" SHADER: "+this.gl.getShaderInfoLog(i)),null)}initHeadSearchDraw(){const e=this.compileShader("\n      attribute vec2 aat_position;\n      varying vec2 vUV;\n      \n      void main(void) {\n        gl_Position = vec4(aat_position, 0., 1.);\n        vUV = 0.5 + 0.5 * aat_position;\n        vUV.x = 1.-vUV.x; // mirror diplay\n      }",this.gl.VERTEX_SHADER,"VERTEX"),t=this.compileShader("\n      precision lowp float;\n      varying vec2 vUV;\n      \n      uniform sampler2D samplerVideo;\n      uniform mat2 videoTransformMat2;\n      uniform vec3 uxys;\n      \n      void main(void) {\n        vec2 uvVideoCentered = 2.0 * videoTransformMat2 * (vUV - 0.5);\n        vec2 uvVideo = uvVideoCentered + 0.5;\n        vec3 colorVideo = texture2D(samplerVideo, uvVideo).rgb;\n        vec2 pos = vUV*2.-vec2(1.,1.);\n        vec2 isInside = step(uxys.xy-uxys.z*vec2(1.,1.), pos);\n        isInside *= step(pos, uxys.xy+uxys.z*vec2(1.,1.));\n        vec2 blendCenterFactor = abs(pos-uxys.xy) / uxys.z;\n        float alpha = isInside.x * isInside.y * pow(max(blendCenterFactor.x, blendCenterFactor.y), 3.);\n        vec3 color = mix(colorVideo, vec3(0.,0.6,1.), alpha);\n        gl_FragColor = vec4(color,1.);\n      }",this.gl.FRAGMENT_SHADER,"FRAGMENT");this.glHeadSearchDrawShaderProgram=this.gl.createProgram(),this.gl.attachShader(this.glHeadSearchDrawShaderProgram,e),this.gl.attachShader(this.glHeadSearchDrawShaderProgram,t),this.gl.linkProgram(this.glHeadSearchDrawShaderProgram);const o=this.gl.getUniformLocation(this.glHeadSearchDrawShaderProgram,"samplerVideo");this.headSearchUniformXys=this.gl.getUniformLocation(this.glHeadSearchDrawShaderProgram,"uxys"),this.headSearchUniformVideoTransformMat2=this.gl.getUniformLocation(this.glHeadSearchDrawShaderProgram,"videoTransformMat2"),this.gl.useProgram(this.glHeadSearchDrawShaderProgram),this.gl.uniform1i(o,0)}drawHeadSearch(e){this.gl.viewport(0,0,this.cv.width,this.cv.height),this.gl.useProgram(this.glHeadSearchDrawShaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.videoTexture),this.gl.uniform3f(this.headSearchUniformXys,e.x,e.y,e.s),this.gl.uniformMatrix2fv(this.headSearchUniformVideoTransformMat2,!1,this.videoTransformMat2),this.gl.drawElements(this.gl.TRIANGLES,3,this.gl.UNSIGNED_SHORT,0)}}t.default=i},341:function(e,t,o){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.initHeadControl=t.default=void 0;const n=i(o(800));var a=o(800);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(a).default}}),t.initHeadControl=()=>new Promise(((e,t)=>{const o=new n.default("head-preview",{onReady:()=>{console.log("head control is ready"),e()},onCameraPersmissionFailed:()=>alert("This game is head-controlled. You need to enable camera to play the game.")});o.toggle(!0),o.addEventListener("mouse opened",(()=>console.log("mouse opened"))),o.addEventListener("mouse closed",(()=>console.log("mouse closed"))),o.addEventListener("left",(()=>console.log("left"))),o.addEventListener("right",(()=>console.log("right")))}))},717:function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,a){function r(e){try{d(i.next(e))}catch(e){a(e)}}function s(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}d((i=i.apply(e,t||[])).next())}))};let n;Object.defineProperty(t,"__esModule",{value:!0}),t.initImageCapture=t.takePhoto=void 0,o(505);let a=!1;t.takePhoto=()=>i(void 0,void 0,void 0,(function*(){n&&(yield n.takePhoto().then((e=>createImageBitmap(e))).then((e=>{const t=document.querySelector("#takePhotoCanvas");t.style.display="block",function(e,t){e.width=getComputedStyle(e).width.split("px")[0],e.height=getComputedStyle(e).height.split("px")[0];let o=Math.min(e.width/t.width,e.height/t.height),i=(e.width-t.width*o)/2,n=(e.height-t.height*o)/2;e.getContext("2d").clearRect(0,0,e.width,e.height),e.getContext("2d").drawImage(t,0,0,t.width,t.height,i,n,t.width*o,t.height*o)}(t,e)})))})),t.initImageCapture=()=>i(void 0,void 0,void 0,(function*(){return a?Promise.resolve():(a=!0,navigator.mediaDevices.getUserMedia({video:!0}).then((e=>{try{const t=e.getVideoTracks()[0];n=new ImageCapture(t),console.log("image capture initied")}catch(e){throw e}})).catch((()=>{alert("Image capture is not supported on your device :(")})))}))},614:function(e,t){"use strict";var o=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,a){function r(e){try{d(i.next(e))}catch(e){a(e)}}function s(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}d((i=i.apply(e,t||[])).next())}))};let i;Object.defineProperty(t,"__esModule",{value:!0}),t.saySomething=t.setUpUser=t.PHRASES=t.initVoiceService=void 0,t.initVoiceService=()=>o(void 0,void 0,void 0,(function*(){return new Promise((e=>{setTimeout((()=>{i=window.speechSynthesis.getVoices().find((({lang:e})=>"en-GB"===e)),e(!0)}),500)}))})),t.PHRASES={HELLO:"`Hi, %username%. Have a good game",RIGHT:"Good right turn, %username%"};let n="";t.setUpUser=e=>{n=e},t.saySomething=e=>{if(!i)return;const t=new SpeechSynthesisUtterance(e.replace("%username%",n));t.voice=i,t.volume=1,t.pitch=1,t.rate=1,speechSynthesis.cancel(),speechSynthesis.speak(t)}}},t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,o),n.exports}o.d=function(e,t){for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o(607)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vaG0tc25ha2UvLi9ub2RlX21vZHVsZXMvY29uc29sZS1zdWJzY3JpYmVyL2luZGV4LmpzIiwid2VicGFjazovL29obS1zbmFrZS8uL25vZGVfbW9kdWxlcy9pbWFnZS1jYXB0dXJlL3NyYy9pbWFnZWNhcHR1cmUuanMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL2NvbnNvbGUudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL2RlY2xhcmUudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL29obS1zbmFrZS8uL3NyYy9zZXJ2aWNlcy9IZWFkQ29udHJvbFNlcnZpY2UvSGVhZENvbnRyb2xTZXJ2aWNlLnRzIiwid2VicGFjazovL29obS1zbmFrZS8uL3NyYy9zZXJ2aWNlcy9IZWFkQ29udHJvbFNlcnZpY2UvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL3NlcnZpY2VzL0ltYWdlQ2FwdHVyZVNlcnZpY2UvaW1hZ2VDYXB0dXJlLnRzIiwid2VicGFjazovL29obS1zbmFrZS8uL3NyYy9zZXJ2aWNlcy9Wb2ljZVNlcnZpY2Uvdm9pY2UudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL29obS1zbmFrZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6WyJfbG9nIiwiX3dhcm4iLCJfZXJyb3IiLCJfZGVidWciLCJDb25zb2xlU3Vic2NyaWJlciIsImNvbnNvbGUiLCJsb2ciLCJ3YXJuIiwiZXJyb3IiLCJkZWJ1ZyIsInVuYmluZCIsImJpbmQiLCJjYiIsInByZXZlbnRMb2dnaW5nIiwiQm9vbGVhbiIsIkNBVEVHT1JZX0lORk8iLCJDQVRFR09SWV9XQVJOIiwiQ0FURUdPUllfRVJST1IiLCJDQVRFR09SWV9ERUJVRyIsImluZm8iLCJjYWxsIiwiYXJndW1lbnRzIiwibW9kdWxlIiwiZXhwb3J0cyIsIndpbmRvdyIsIkltYWdlQ2FwdHVyZSIsInZpZGVvU3RyZWFtVHJhY2siLCJraW5kIiwiRE9NRXhjZXB0aW9uIiwidGhpcyIsIl92aWRlb1N0cmVhbVRyYWNrIiwicmVhZHlTdGF0ZSIsIl9wcmV2aWV3U3RyZWFtIiwiTWVkaWFTdHJlYW0iLCJ2aWRlb0VsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ2aWRlb0VsZW1lbnRQbGF5aW5nIiwiUHJvbWlzZSIsInJlc29sdmUiLCJhZGRFdmVudExpc3RlbmVyIiwiSFRNTE1lZGlhRWxlbWVudCIsInNyY09iamVjdCIsInNyYyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIm11dGVkIiwic2V0QXR0cmlidXRlIiwicGxheSIsImNhbnZhc0VsZW1lbnQiLCJjYW52YXMyZENvbnRleHQiLCJnZXRDb250ZXh0IiwicmVqZWN0IiwiTWVkaWFTZXR0aW5nc1JhbmdlIiwiY3VycmVudCIsIm1pbiIsIm1heCIsImV4cG9zdXJlQ29tcGVuc2F0aW9uIiwiZXhwb3N1cmVNb2RlIiwiZmlsbExpZ2h0TW9kZSIsImZvY3VzTW9kZSIsImltYWdlSGVpZ2h0IiwiaW1hZ2VXaWR0aCIsImlzbyIsInJlZEV5ZVJlZHVjdGlvbiIsIndoaXRlQmFsYW5jZU1vZGUiLCJ6b29tIiwicGhvdG9TZXR0aW5ncyIsInNlbGYiLCJ0aGVuIiwid2lkdGgiLCJ2aWRlb1dpZHRoIiwiaGVpZ2h0IiwidmlkZW9IZWlnaHQiLCJkcmF3SW1hZ2UiLCJ0b0Jsb2IiLCJjcmVhdGVJbWFnZUJpdG1hcCIsIl9faW1wb3J0RGVmYXVsdCIsIm1vZCIsIl9fZXNNb2R1bGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiZW5hYmxlTW9iaWxlQ29uc29sZSIsImNvbnNvbGVfc3Vic2NyaWJlcl8xIiwiYnVmZmVyIiwiZGVmYXVsdCIsImNhdGVnb3J5IiwiYXJncyIsImxlbmd0aCIsInNoaWZ0IiwicHVzaCIsIm1lc3NhZ2UiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsIm1hcCIsIm0iLCJqb2luIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiZnVsZmlsbGVkIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwiYXBwbHkiLCJjb25zb2xlXzEiLCJIZWFkQ29udHJvbFNlcnZpY2VfMSIsImltYWdlQ2FwdHVyZV8xIiwidm9pY2VfMSIsInN0YXJ0QnV0dG9uIiwiJCIsInByZWxvYWRlciIsInN0YXJ0U2NyZWVuIiwiZ2FtZVNjcmVlbiIsIm5hbWVJbnB1dCIsInN0YXJ0R2FtZSIsInBsYXllck5hbWUiLCJ0YWtlUGhvdG8iLCJzaG93IiwiaGlkZSIsInNldFVwVXNlciIsInNheVNvbWV0aGluZyIsIlBIUkFTRVMiLCJIRUxMTyIsImFsZXJ0Iiwib25sb2FkIiwiYWxsIiwiaW5pdEltYWdlQ2FwdHVyZSIsImluaXRWb2ljZVNlcnZpY2UiLCJpbml0SGVhZENvbnRyb2wiLCJjYXRjaCIsIm9uIiwidmFsIiwicHJvcCIsImNsaWNrIiwiZGVmYXVsdFNldHRpbmdzIiwibW91c2VPcGVuaW5nVHJlc2hvbGQiLCJtb3VzZUNsb3NpbmdUcmVzaG9sZCIsImhlYWRNb3ZlbWVudFN0YXJ0ZWRUcmVzaG9sZCIsImhlYWRNb3ZlbWVudFN0b3BwZWRUcmVzaG9sZCIsIkhlYWRDb250cm9sU2VydmljZSIsIkV2ZW50VGFyZ2V0IiwiY2FudmFzSWQiLCJzZXR0aW5ncyIsInN1cGVyIiwibW92ZW1lbnRMb2NrcyIsInZlcnRpY2FsIiwiaG9yaXpvbnRhbCIsIm1vdXNlT3BlbmVkIiwic3RhdGUiLCJpc0xvYWRlZCIsImlzRGV0ZWN0ZWQiLCJpc0VuYWJsZWQiLCJnbCIsImN2IiwidmlkZW9UZXh0dXJlIiwidmlkZW9UcmFuc2Zvcm1NYXQyIiwiZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0iLCJoZWFkU2VhcmNoVW5pZm9ybVh5cyIsImhlYWRTZWFyY2hVbmlmb3JtVmlkZW9UcmFuc2Zvcm1NYXQyIiwiaGFuZGxlTW91c2VPcGVuaW5nIiwiZGV0ZWN0U3RhdGUiLCJyeSIsIm1vdXRoT3BlbmluZyIsImV4cHJlc3Npb25zIiwiTWF0aCIsImRpc3BhdGNoRXZlbnQiLCJFdmVudCIsImhhbmRsZU1vdmUiLCJtdiIsInJ4IiwiaGFuZGxlQXhpc01vdmVtZW50IiwiYXhpcyIsImF4aXNQb3NpdGlvbiIsIm1heFZhbHVlIiwibWluVmFsdWUiLCJhc3NpZ24iLCJKRUVGQUNFRklMVEVSQVBJIiwiaW5pdCIsIk5OQ1BhdGgiLCJhbmltYXRlRGVsYXkiLCJjYWxsYmFja1JlYWR5IiwiZXJyQ29kZSIsImplZUZhY2VGaWx0ZXJPYmoiLCJvbkNhbWVyYVBlcnNtaXNzaW9uRmFpbGVkIiwiaW5pdEhlYWRTZWFyY2hEcmF3Iiwib25SZWFkeSIsImNhbGxiYWNrVHJhY2siLCJkcmF3SGVhZFNlYXJjaCIsInNvdXJjZSIsImdsVHlwZSIsInR5cGVTdHJpbmciLCJnbFNoYWRlciIsImNyZWF0ZVNoYWRlciIsInNoYWRlclNvdXJjZSIsImNvbXBpbGVTaGFkZXIiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsImdldFNoYWRlckluZm9Mb2ciLCJnbFNoYWRlclZlcnRleCIsIlZFUlRFWF9TSEFERVIiLCJnbFNoYWRlckZyYWdtZW50IiwiRlJBR01FTlRfU0hBREVSIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwic2FtcGxlclZpZGVvIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwidXNlUHJvZ3JhbSIsInVuaWZvcm0xaSIsInZpZXdwb3J0IiwiYWN0aXZlVGV4dHVyZSIsIlRFWFRVUkUwIiwiYmluZFRleHR1cmUiLCJURVhUVVJFXzJEIiwidW5pZm9ybTNmIiwieCIsInkiLCJzIiwidW5pZm9ybU1hdHJpeDJmdiIsImRyYXdFbGVtZW50cyIsIlRSSUFOR0xFUyIsIlVOU0lHTkVEX1NIT1JUIiwiSGVhZENvbnRyb2xTZXJ2aWNlXzIiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiaGVhZENvbnRyb2xTZXJ2aWNlIiwidG9nZ2xlIiwiaW1hZ2VDYXB0dXJlIiwiaXNJbml0IiwiYmxvYiIsImltYWdlQml0bWFwIiwiY2FudmFzIiwicXVlcnlTZWxlY3RvciIsInN0eWxlIiwiZGlzcGxheSIsImltZyIsImdldENvbXB1dGVkU3R5bGUiLCJzcGxpdCIsInJhdGlvIiwiY2xlYXJSZWN0IiwiZHJhd0NhbnZhcyIsIm5hdmlnYXRvciIsIm1lZGlhRGV2aWNlcyIsImdldFVzZXJNZWRpYSIsInZpZGVvIiwibWVkaWFTdHJlYW0iLCJ0cmFjayIsImdldFZpZGVvVHJhY2tzIiwiVk9JQ0UiLCJzZXRUaW1lb3V0Iiwic3BlZWNoU3ludGhlc2lzIiwiZ2V0Vm9pY2VzIiwiZmluZCIsImxhbmciLCJSSUdIVCIsInVzZXJOYW1lIiwibmFtZSIsInRleHQiLCJ1dHRlcmFuY2UiLCJTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UiLCJyZXBsYWNlIiwidm9pY2UiLCJ2b2x1bWUiLCJwaXRjaCIsInJhdGUiLCJjYW5jZWwiLCJzcGVhayIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJvYmoiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyJdLCJtYXBwaW5ncyI6IjttQ0FLQSxJQUNRQSxFQUNBQyxFQUNBQyxFQUNBQyxFQUVBQyxFQUxBSixFQUFPSyxRQUFRQyxJQUNmTCxFQUFRSSxRQUFR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QU9DLFFBQVNELEVBQVFBLEVBQU9DLFFBQVM0UCxHQUdwRTdQLEVBQU9DLFFDbkJmNFAsRUFBb0JHLEVBQUksU0FBUy9QLEVBQVNnUSxHQUN6QyxJQUFJLElBQUlDLEtBQU9ELEVBQ1hKLEVBQW9CTSxFQUFFRixFQUFZQyxLQUFTTCxFQUFvQk0sRUFBRWxRLEVBQVNpUSxJQUM1RXhNLE9BQU9DLGVBQWUxRCxFQUFTaVEsRUFBSyxDQUFFbEQsWUFBWSxFQUFNQyxJQUFLZ0QsRUFBV0MsTUNKM0VMLEVBQW9CTSxFQUFJLFNBQVNDLEVBQUsvSSxHQUFRLE9BQU8zRCxPQUFPMk0sVUFBVUMsZUFBZXhRLEtBQUtzUSxFQUFLL0ksSUNDL0Z3SSxFQUFvQlUsRUFBSSxTQUFTdFEsR0FDWCxvQkFBWHVRLFFBQTBCQSxPQUFPQyxhQUMxQy9NLE9BQU9DLGVBQWUxRCxFQUFTdVEsT0FBT0MsWUFBYSxDQUFFN00sTUFBTyxXQUU3REYsT0FBT0MsZUFBZTFELEVBQVMsYUFBYyxDQUFFMkQsT0FBTyxLQ0Z2RGlNLEVBQW9CLEsiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTdWJzY3JpYmUgdG8gdGhlIGNvbnNvbGUgb3V0cHV0IFxuICpcbiAqIEBhdXRob3IgU2Ftc29uIFJhZHVcbiAqLyBcbihmdW5jdGlvbigpe1xuICAgIHZhciBfbG9nID0gY29uc29sZS5sb2c7XG4gICAgdmFyIF93YXJuID0gY29uc29sZS53YXJuO1xuICAgIHZhciBfZXJyb3IgPSBjb25zb2xlLmVycm9yO1xuICAgIHZhciBfZGVidWcgPSBjb25zb2xlLmRlYnVnO1xuXG4gICAgdmFyIENvbnNvbGVTdWJzY3JpYmVyID0ge1xuICAgICAgICB1bmJpbmQ6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyA9IF9sb2c7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4gPSBfd2FybjtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IgPSBfZXJyb3I7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnID0gX2RlYnVnO1xuICAgICAgICB9LCBcbiAgICAgICAgYmluZDogZnVuY3Rpb24oY2IsIHByZXZlbnRMb2dnaW5nKXtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2IgIT09ICdmdW5jdGlvbicpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJZb3UgbXVzdCBwYXNzIGEgdmFsaWQgY2FsbGJhY2sgZnVuY3Rpb24uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcHJldmVudExvZ2dpbmcgPSBCb29sZWFuKHByZXZlbnRMb2dnaW5nKTsgLy9mb3JjZSBib29sXG5cbiAgICAgICAgICAgIGNvbnN0IENBVEVHT1JZX0lORk8gPSBcImluZm9cIjtcbiAgICAgICAgICAgIGNvbnN0IENBVEVHT1JZX1dBUk4gPSBcIndhcm5cIjtcbiAgICAgICAgICAgIGNvbnN0IENBVEVHT1JZX0VSUk9SID0gXCJlcnJvclwiO1xuICAgICAgICAgICAgY29uc3QgQ0FURUdPUllfREVCVUcgPSBcImRlYnVnXCI7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nID0gY29uc29sZS5pbmZvID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpZiAoX2xvZyl7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcHJldmVudExvZ2dpbmcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2xvZy5jYWxsKGNvbnNvbGUsIC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2IoQ0FURUdPUllfSU5GTywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zb2xlLndhcm4gPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGlmIChfd2Fybil7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcHJldmVudExvZ2dpbmcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX3dhcm4uY2FsbChjb25zb2xlLCAuLi5hcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNiKENBVEVHT1JZX1dBUk4sIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc29sZS5lcnJvciA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgaWYgKF9lcnJvcil7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcHJldmVudExvZ2dpbmcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2Vycm9yLmNhbGwoY29uc29sZSwgLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYihDQVRFR09SWV9FUlJPUiwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpZiAoX2RlYnVnKXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmV2ZW50TG9nZ2luZyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZGVidWcuY2FsbChjb25zb2xlLCAuLi5hcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNiKENBVEVHT1JZX0RFQlVHLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vZXhwb3J0XG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpe1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IENvbnNvbGVTdWJzY3JpYmVyO1xuICAgIH1cbiAgICBlbHNlIGlmICh3aW5kb3cgJiYgdHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpe1xuICAgICAgICB3aW5kb3cuQ29uc29sZVN1YnNjcmliZXIgPSBDb25zb2xlU3Vic2NyaWJlcjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZXhwb3J0IG1vZHVsZS5cIik7XG4gICAgfVxufSkoKTtcbiIsIi8qKlxuICogTWVkaWFTdHJlYW0gSW1hZ2VDYXB0dXJlIHBvbHlmaWxsXG4gKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5leHBvcnQgbGV0IEltYWdlQ2FwdHVyZSA9IHdpbmRvdy5JbWFnZUNhcHR1cmU7XG5cbmlmICh0eXBlb2YgSW1hZ2VDYXB0dXJlID09PSAndW5kZWZpbmVkJykge1xuICBJbWFnZUNhcHR1cmUgPSBjbGFzcyB7XG5cbiAgICAvKipcbiAgICAgKiBUT0RPIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9pbWFnZS1jYXB0dXJlLyNjb25zdHJ1Y3RvcnNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7TWVkaWFTdHJlYW1UcmFja30gdmlkZW9TdHJlYW1UcmFjayAtIEEgTWVkaWFTdHJlYW1UcmFjayBvZiB0aGUgJ3ZpZGVvJyBraW5kXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodmlkZW9TdHJlYW1UcmFjaykge1xuICAgICAgaWYgKHZpZGVvU3RyZWFtVHJhY2sua2luZCAhPT0gJ3ZpZGVvJylcbiAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbignTm90U3VwcG9ydGVkRXJyb3InKTtcblxuICAgICAgdGhpcy5fdmlkZW9TdHJlYW1UcmFjayA9IHZpZGVvU3RyZWFtVHJhY2s7XG4gICAgICBpZiAoISgncmVhZHlTdGF0ZScgaW4gdGhpcy5fdmlkZW9TdHJlYW1UcmFjaykpIHtcbiAgICAgICAgLy8gUG9seWZpbGwgZm9yIEZpcmVmb3hcbiAgICAgICAgdGhpcy5fdmlkZW9TdHJlYW1UcmFjay5yZWFkeVN0YXRlID0gJ2xpdmUnO1xuICAgICAgfVxuXG4gICAgICAvLyBNZWRpYVN0cmVhbSBjb25zdHJ1Y3RvciBub3QgYXZhaWxhYmxlIHVudGlsIENocm9tZSA1NSAtIGh0dHBzOi8vd3d3LmNocm9tZXN0YXR1cy5jb20vZmVhdHVyZS81OTEyMTcyNTQ2NzUyNTEyXG4gICAgICB0aGlzLl9wcmV2aWV3U3RyZWFtID0gbmV3IE1lZGlhU3RyZWFtKFt2aWRlb1N0cmVhbVRyYWNrXSk7XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudFBsYXlpbmcgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncGxheWluZycsIHJlc29sdmUpO1xuICAgICAgfSk7XG4gICAgICBpZiAoSFRNTE1lZGlhRWxlbWVudCkge1xuICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zcmNPYmplY3QgPSB0aGlzLl9wcmV2aWV3U3RyZWFtOyAgLy8gU2FmYXJpIDExIGRvZXNuJ3QgYWxsb3cgdXNlIG9mIGNyZWF0ZU9iamVjdFVSTCBmb3IgTWVkaWFTdHJlYW1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwodGhpcy5fcHJldmlld1N0cmVhbSk7XG4gICAgICB9XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudC5tdXRlZCA9IHRydWU7XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3BsYXlzaW5saW5lJywgJycpOyAvLyBSZXF1aXJlZCBieSBTYWZhcmkgb24gaU9TIDExLiBTZWUgaHR0cHM6Ly93ZWJraXQub3JnL2Jsb2cvNjc4NFxuICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpO1xuXG4gICAgICB0aGlzLmNhbnZhc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgIC8vIFRPRE8gRmlyZWZveCBoYXMgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL09mZnNjcmVlbkNhbnZhc1xuICAgICAgdGhpcy5jYW52YXMyZENvbnRleHQgPSB0aGlzLmNhbnZhc0VsZW1lbnQuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBodHRwczovL3czYy5naXRodWIuaW8vbWVkaWFjYXB0dXJlLWltYWdlL2luZGV4Lmh0bWwjZG9tLWltYWdlY2FwdHVyZS12aWRlb3N0cmVhbXRyYWNrXG4gICAgICogQHJldHVybiB7TWVkaWFTdHJlYW1UcmFja30gVGhlIE1lZGlhU3RyZWFtVHJhY2sgcGFzc2VkIGludG8gdGhlIGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgZ2V0IHZpZGVvU3RyZWFtVHJhY2soKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdmlkZW9TdHJlYW1UcmFjaztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9pbWFnZS1jYXB0dXJlLyNkb20taW1hZ2VjYXB0dXJlLWdldHBob3RvY2FwYWJpbGl0aWVzXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxQaG90b0NhcGFiaWxpdGllcz59IEZ1bGZpbGxlZCBwcm9taXNlIHdpdGhcbiAgICAgKiBbUGhvdG9DYXBhYmlsaXRpZXNdKGh0dHBzOi8vd3d3LnczLm9yZy9UUi9pbWFnZS1jYXB0dXJlLyNpZGwtZGVmLXBob3RvY2FwYWJpbGl0aWVzKVxuICAgICAqIG9iamVjdCBvbiBzdWNjZXNzLCByZWplY3RlZCBwcm9taXNlIG9uIGZhaWx1cmVcbiAgICAgKi9cbiAgICBnZXRQaG90b0NhcGFiaWxpdGllcygpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBleGVjdXRvckdQQyhyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgLy8gVE9ETyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3czYy9tZWRpYWNhcHR1cmUtaW1hZ2UvaXNzdWVzLzk3XG4gICAgICAgIGNvbnN0IE1lZGlhU2V0dGluZ3NSYW5nZSA9IHtcbiAgICAgICAgICBjdXJyZW50OiAwLCBtaW46IDAsIG1heDogMCxcbiAgICAgICAgfTtcbiAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgZXhwb3N1cmVDb21wZW5zYXRpb246IE1lZGlhU2V0dGluZ3NSYW5nZSxcbiAgICAgICAgICBleHBvc3VyZU1vZGU6ICdub25lJyxcbiAgICAgICAgICBmaWxsTGlnaHRNb2RlOiAnbm9uZScsXG4gICAgICAgICAgZm9jdXNNb2RlOiAnbm9uZScsXG4gICAgICAgICAgaW1hZ2VIZWlnaHQ6IE1lZGlhU2V0dGluZ3NSYW5nZSxcbiAgICAgICAgICBpbWFnZVdpZHRoOiBNZWRpYVNldHRpbmdzUmFuZ2UsXG4gICAgICAgICAgaXNvOiBNZWRpYVNldHRpbmdzUmFuZ2UsXG4gICAgICAgICAgcmVkRXllUmVkdWN0aW9uOiBmYWxzZSxcbiAgICAgICAgICB3aGl0ZUJhbGFuY2VNb2RlOiAnbm9uZScsXG4gICAgICAgICAgem9vbTogTWVkaWFTZXR0aW5nc1JhbmdlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVqZWN0KG5ldyBET01FeGNlcHRpb24oJ09wZXJhdGlvbkVycm9yJykpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyBodHRwczovL3d3dy53My5vcmcvVFIvaW1hZ2UtY2FwdHVyZS8jZG9tLWltYWdlY2FwdHVyZS1zZXRvcHRpb25zXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBob3RvU2V0dGluZ3MgLSBQaG90byBzZXR0aW5ncyBkaWN0aW9uYXJ5LCBodHRwczovL3d3dy53My5vcmcvVFIvaW1hZ2UtY2FwdHVyZS8jaWRsLWRlZi1waG90b3NldHRpbmdzXG4gICAgICogQHJldHVybiB7UHJvbWlzZTx2b2lkPn0gRnVsZmlsbGVkIHByb21pc2Ugb24gc3VjY2VzcywgcmVqZWN0ZWQgcHJvbWlzZSBvbiBmYWlsdXJlXG4gICAgICovXG4gICAgc2V0T3B0aW9ucyhwaG90b1NldHRpbmdzID0ge30pIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBleGVjdXRvclNPKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAvLyBUT0RPXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUT0RPXG4gICAgICogSW1wbGVtZW50cyBodHRwczovL3d3dy53My5vcmcvVFIvaW1hZ2UtY2FwdHVyZS8jZG9tLWltYWdlY2FwdHVyZS10YWtlcGhvdG9cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPEJsb2I+fSBGdWxmaWxsZWQgcHJvbWlzZSB3aXRoIFtCbG9iXShodHRwczovL3d3dy53My5vcmcvVFIvRmlsZUFQSS8jYmxvYilcbiAgICAgKiBhcmd1bWVudCBvbiBzdWNjZXNzOyByZWplY3RlZCBwcm9taXNlIG9uIGZhaWx1cmVcbiAgICAgKi9cbiAgICB0YWtlUGhvdG8oKSB7XG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBleGVjdXRvclRQKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAvLyBgSWYgdGhlIHJlYWR5U3RhdGUgb2YgdGhlIE1lZGlhU3RyZWFtVHJhY2sgcHJvdmlkZWQgaW4gdGhlIGNvbnN0cnVjdG9yIGlzIG5vdCBsaXZlLFxuICAgICAgICAvLyByZXR1cm4gYSBwcm9taXNlIHJlamVjdGVkIHdpdGggYSBuZXcgRE9NRXhjZXB0aW9uIHdob3NlIG5hbWUgaXMgXCJJbnZhbGlkU3RhdGVFcnJvclwiLmBcbiAgICAgICAgaWYgKHNlbGYuX3ZpZGVvU3RyZWFtVHJhY2sucmVhZHlTdGF0ZSAhPT0gJ2xpdmUnKSB7XG4gICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgRE9NRXhjZXB0aW9uKCdJbnZhbGlkU3RhdGVFcnJvcicpKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLnZpZGVvRWxlbWVudFBsYXlpbmcudGhlbigoKSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNlbGYuY2FudmFzRWxlbWVudC53aWR0aCA9IHNlbGYudmlkZW9FbGVtZW50LnZpZGVvV2lkdGg7XG4gICAgICAgICAgICBzZWxmLmNhbnZhc0VsZW1lbnQuaGVpZ2h0ID0gc2VsZi52aWRlb0VsZW1lbnQudmlkZW9IZWlnaHQ7XG4gICAgICAgICAgICBzZWxmLmNhbnZhczJkQ29udGV4dC5kcmF3SW1hZ2Uoc2VsZi52aWRlb0VsZW1lbnQsIDAsIDApO1xuICAgICAgICAgICAgc2VsZi5jYW52YXNFbGVtZW50LnRvQmxvYihyZXNvbHZlKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBET01FeGNlcHRpb24oJ1Vua25vd25FcnJvcicpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyBodHRwczovL3d3dy53My5vcmcvVFIvaW1hZ2UtY2FwdHVyZS8jZG9tLWltYWdlY2FwdHVyZS1ncmFiZnJhbWVcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPEltYWdlQml0bWFwPn0gRnVsZmlsbGVkIHByb21pc2Ugd2l0aFxuICAgICAqIFtJbWFnZUJpdG1hcF0oaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1MS93ZWJhcHBhcGlzLmh0bWwjd2ViYXBwYXBpcy1pbWFnZXMpXG4gICAgICogYXJndW1lbnQgb24gc3VjY2VzczsgcmVqZWN0ZWQgcHJvbWlzZSBvbiBmYWlsdXJlXG4gICAgICovXG4gICAgZ3JhYkZyYW1lKCkge1xuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZXhlY3V0b3JHRihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgLy8gYElmIHRoZSByZWFkeVN0YXRlIG9mIHRoZSBNZWRpYVN0cmVhbVRyYWNrIHByb3ZpZGVkIGluIHRoZSBjb25zdHJ1Y3RvciBpcyBub3QgbGl2ZSxcbiAgICAgICAgLy8gcmV0dXJuIGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIGEgbmV3IERPTUV4Y2VwdGlvbiB3aG9zZSBuYW1lIGlzIFwiSW52YWxpZFN0YXRlRXJyb3JcIi5gXG4gICAgICAgIGlmIChzZWxmLl92aWRlb1N0cmVhbVRyYWNrLnJlYWR5U3RhdGUgIT09ICdsaXZlJykge1xuICAgICAgICAgIHJldHVybiByZWplY3QobmV3IERPTUV4Y2VwdGlvbignSW52YWxpZFN0YXRlRXJyb3InKSk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi52aWRlb0VsZW1lbnRQbGF5aW5nLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzZWxmLmNhbnZhc0VsZW1lbnQud2lkdGggPSBzZWxmLnZpZGVvRWxlbWVudC52aWRlb1dpZHRoO1xuICAgICAgICAgICAgc2VsZi5jYW52YXNFbGVtZW50LmhlaWdodCA9IHNlbGYudmlkZW9FbGVtZW50LnZpZGVvSGVpZ2h0O1xuICAgICAgICAgICAgc2VsZi5jYW52YXMyZENvbnRleHQuZHJhd0ltYWdlKHNlbGYudmlkZW9FbGVtZW50LCAwLCAwKTtcbiAgICAgICAgICAgIC8vIFRPRE8gcG9seWZpbGwgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0ltYWdlQml0bWFwRmFjdG9yaWVzL2NyZWF0ZUltYWdlQml0bWFwIGZvciBJRVxuICAgICAgICAgICAgcmVzb2x2ZSh3aW5kb3cuY3JlYXRlSW1hZ2VCaXRtYXAoc2VsZi5jYW52YXNFbGVtZW50KSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRE9NRXhjZXB0aW9uKCdVbmtub3duRXJyb3InKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxud2luZG93LkltYWdlQ2FwdHVyZSA9IEltYWdlQ2FwdHVyZTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5lbmFibGVNb2JpbGVDb25zb2xlID0gdm9pZCAwO1xuY29uc3QgY29uc29sZV9zdWJzY3JpYmVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImNvbnNvbGUtc3Vic2NyaWJlclwiKSk7XG5jb25zdCBlbmFibGVNb2JpbGVDb25zb2xlID0gKCkgPT4ge1xuICAgIGNvbnN0IGJ1ZmZlciA9IFtdO1xuICAgIGNvbnNvbGVfc3Vic2NyaWJlcl8xLmRlZmF1bHQuYmluZCgoY2F0ZWdvcnksIGFyZ3MpID0+IHtcbiAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDUpIHtcbiAgICAgICAgICAgIGJ1ZmZlci5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgICAgIGJ1ZmZlci5wdXNoKHsgY2F0ZWdvcnksIG1lc3NhZ2U6IGFyZ3NbMF0gfSk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25zb2xlJykuaW5uZXJIVE1MID0gYnVmZmVyLm1hcCgobSkgPT4gYDxwPiR7bS5tZXNzYWdlfTwvcD5gKS5qb2luKCcnKTtcbiAgICB9KTtcbn07XG5leHBvcnRzLmVuYWJsZU1vYmlsZUNvbnNvbGUgPSBlbmFibGVNb2JpbGVDb25zb2xlO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgY29uc29sZV8xID0gcmVxdWlyZShcIi4vY29uc29sZVwiKTtcbmNvbnN0IEhlYWRDb250cm9sU2VydmljZV8xID0gcmVxdWlyZShcIi4vc2VydmljZXMvSGVhZENvbnRyb2xTZXJ2aWNlXCIpO1xuY29uc3QgaW1hZ2VDYXB0dXJlXzEgPSByZXF1aXJlKFwiLi9zZXJ2aWNlcy9JbWFnZUNhcHR1cmVTZXJ2aWNlL2ltYWdlQ2FwdHVyZVwiKTtcbmNvbnN0IHZvaWNlXzEgPSByZXF1aXJlKFwiLi9zZXJ2aWNlcy9Wb2ljZVNlcnZpY2Uvdm9pY2VcIik7XG5yZXF1aXJlKFwiLi9kZWNsYXJlXCIpO1xucmVxdWlyZShcIi4vc3R5bGUvaW5kZXguc2Nzc1wiKTtcbmNvbnN0IHN0YXJ0QnV0dG9uID0gJCgnI3N0YXJ0QnV0dG9uJyk7XG5jb25zdCBwcmVsb2FkZXIgPSAkKCcjcHJlbG9hZGVyJyk7XG5jb25zdCBzdGFydFNjcmVlbiA9ICQoJyNzdGFydCcpO1xuY29uc3QgZ2FtZVNjcmVlbiA9ICQoJyNnYW1lJyk7XG5jb25zdCBuYW1lSW5wdXQgPSAkKCcjbmFtZUlucHV0Jyk7XG5jb25zdCBpbml0QWxsQVBJID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFtpbWFnZUNhcHR1cmVfMS5pbml0SW1hZ2VDYXB0dXJlKCksIHZvaWNlXzEuaW5pdFZvaWNlU2VydmljZSgpLCBIZWFkQ29udHJvbFNlcnZpY2VfMS5pbml0SGVhZENvbnRyb2woKV0pXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgcHJlbG9hZGVyLmhpZGUoKTtcbiAgICAgICAgc3RhcnRTY3JlZW4uc2hvdygpO1xuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICB9KTtcbn0pO1xuY29uc3QgaW5pdEFwcCA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIHByZWxvYWRlci5zaG93KCk7XG4gICAgZ2FtZVNjcmVlbi5oaWRlKCk7XG4gICAgc3RhcnRTY3JlZW4uaGlkZSgpO1xuICAgIHlpZWxkIGluaXRBbGxBUEkoKTtcbiAgICBuYW1lSW5wdXQub24oJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICBpZiAobmFtZUlucHV0LnZhbCgpKSB7XG4gICAgICAgICAgICBzdGFydEJ1dHRvbi5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0YXJ0QnV0dG9uLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBzdGFydEJ1dHRvbi5jbGljaygoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3N0YXJ0IGdhbWUnKTtcbiAgICAgICAgeWllbGQgc3RhcnRHYW1lKG5hbWVJbnB1dC52YWwoKSk7XG4gICAgfSkpO1xufSk7XG5jb25zdCBzdGFydEdhbWUgPSAocGxheWVyTmFtZSkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgeWllbGQgaW1hZ2VDYXB0dXJlXzEudGFrZVBob3RvKCk7XG4gICAgICAgIGdhbWVTY3JlZW4uc2hvdygpO1xuICAgICAgICBzdGFydFNjcmVlbi5oaWRlKCk7XG4gICAgICAgIHZvaWNlXzEuc2V0VXBVc2VyKHBsYXllck5hbWUpO1xuICAgICAgICB2b2ljZV8xLnNheVNvbWV0aGluZyh2b2ljZV8xLlBIUkFTRVMuSEVMTE8pO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBhbGVydChlKTtcbiAgICB9XG59KTtcbndpbmRvdy5vbmxvYWQgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICBjb25zb2xlXzEuZW5hYmxlTW9iaWxlQ29uc29sZSgpO1xuICAgIHlpZWxkIGluaXRBcHAoKTtcbn0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBkZWZhdWx0U2V0dGluZ3MgPSB7XG4gICAgbW91c2VPcGVuaW5nVHJlc2hvbGQ6IDAuNixcbiAgICBtb3VzZUNsb3NpbmdUcmVzaG9sZDogMC41LFxuICAgIGhlYWRNb3ZlbWVudFN0YXJ0ZWRUcmVzaG9sZDogMC4xNSxcbiAgICBoZWFkTW92ZW1lbnRTdG9wcGVkVHJlc2hvbGQ6IDAuMDgsXG59O1xuY2xhc3MgSGVhZENvbnRyb2xTZXJ2aWNlIGV4dGVuZHMgRXZlbnRUYXJnZXQge1xuICAgIGNvbnN0cnVjdG9yKGNhbnZhc0lkLCBzZXR0aW5ncykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm1vdmVtZW50TG9ja3MgPSB7XG4gICAgICAgICAgICB2ZXJ0aWNhbDogZmFsc2UsXG4gICAgICAgICAgICBob3Jpem9udGFsOiBmYWxzZSxcbiAgICAgICAgICAgIG1vdXNlT3BlbmVkOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGlzTG9hZGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGlzRGV0ZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nbCA9IG51bGw7XG4gICAgICAgIHRoaXMuY3YgPSBudWxsO1xuICAgICAgICB0aGlzLnZpZGVvVGV4dHVyZSA9IG51bGw7XG4gICAgICAgIHRoaXMudmlkZW9UcmFuc2Zvcm1NYXQyID0gbnVsbDtcbiAgICAgICAgdGhpcy5nbEhlYWRTZWFyY2hEcmF3U2hhZGVyUHJvZ3JhbSA9IG51bGw7XG4gICAgICAgIHRoaXMuaGVhZFNlYXJjaFVuaWZvcm1YeXMgPSBudWxsO1xuICAgICAgICB0aGlzLmhlYWRTZWFyY2hVbmlmb3JtVmlkZW9UcmFuc2Zvcm1NYXQyID0gbnVsbDtcbiAgICAgICAgdGhpcy5oYW5kbGVNb3VzZU9wZW5pbmcgPSAoZGV0ZWN0U3RhdGUpID0+IHtcbiAgICAgICAgICAgIGlmIChkZXRlY3RTdGF0ZS5yeSA8IC0xICogdGhpcy5zZXR0aW5ncy5oZWFkTW92ZW1lbnRTdGFydGVkVHJlc2hvbGQgfHwgZGV0ZWN0U3RhdGUucnkgPiB0aGlzLnNldHRpbmdzLmhlYWRNb3ZlbWVudFN0YXJ0ZWRUcmVzaG9sZCkge1xuICAgICAgICAgICAgICAgIC8vIEhlYWQgc2hvdWxkIGJlIGluIHRoZSBjZW50ZXIgcG9zaXRpb25cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbW91dGhPcGVuaW5nID0gKGRldGVjdFN0YXRlLmV4cHJlc3Npb25zWzBdIC0gMC4yKSAqIDUuMDtcbiAgICAgICAgICAgIG1vdXRoT3BlbmluZyA9IE1hdGgubWluKE1hdGgubWF4KG1vdXRoT3BlbmluZywgMCksIDEpO1xuICAgICAgICAgICAgaWYgKG1vdXRoT3BlbmluZyA+IHRoaXMuc2V0dGluZ3MubW91c2VPcGVuaW5nVHJlc2hvbGQgJiYgIXRoaXMubW92ZW1lbnRMb2Nrcy5tb3VzZU9wZW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZW1lbnRMb2Nrcy5tb3VzZU9wZW5lZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnbW91c2Ugb3BlbmVkJykpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb3V0aE9wZW5pbmcgPCB0aGlzLnNldHRpbmdzLm1vdXNlQ2xvc2luZ1RyZXNob2xkICYmIHRoaXMubW92ZW1lbnRMb2Nrcy5tb3VzZU9wZW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZW1lbnRMb2Nrcy5tb3VzZU9wZW5lZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ21vdXNlIGNsb3NlZCcpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlTW92ZSA9IChtdikgPT4ge1xuICAgICAgICAgICAgaWYgKG12LnJ4ICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVBeGlzTW92ZW1lbnQoeyBheGlzOiAndmVydGljYWwnLCBheGlzUG9zaXRpb246IG12LnJ4LCBtYXhWYWx1ZTogJ2Rvd24nLCBtaW5WYWx1ZTogJ3VwJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtdi5yeSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQXhpc01vdmVtZW50KHsgYXhpczogJ2hvcml6b250YWwnLCBheGlzUG9zaXRpb246IG12LnJ5LCBtYXhWYWx1ZTogJ2xlZnQnLCBtaW5WYWx1ZTogJ3JpZ2h0JyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVBeGlzTW92ZW1lbnQgPSAoeyBheGlzLCBheGlzUG9zaXRpb24sIG1heFZhbHVlLCBtaW5WYWx1ZSwgfSkgPT4ge1xuICAgICAgICAgICAgaWYgKGF4aXNQb3NpdGlvbiA8IC0xICogdGhpcy5zZXR0aW5ncy5oZWFkTW92ZW1lbnRTdGFydGVkVHJlc2hvbGQgJiYgIXRoaXMubW92ZW1lbnRMb2Nrc1theGlzXSkge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZW1lbnRMb2Nrc1theGlzXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChtaW5WYWx1ZSkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChheGlzUG9zaXRpb24gPiB0aGlzLnNldHRpbmdzLmhlYWRNb3ZlbWVudFN0YXJ0ZWRUcmVzaG9sZCAmJiAhdGhpcy5tb3ZlbWVudExvY2tzW2F4aXNdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlbWVudExvY2tzW2F4aXNdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KG1heFZhbHVlKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGF4aXNQb3NpdGlvbiA+IC0xICogdGhpcy5zZXR0aW5ncy5oZWFkTW92ZW1lbnRTdG9wcGVkVHJlc2hvbGQgJiYgYXhpc1Bvc2l0aW9uIDwgdGhpcy5zZXR0aW5ncy5oZWFkTW92ZW1lbnRTdG9wcGVkVHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVtZW50TG9ja3NbYXhpc10gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRTZXR0aW5ncyksIHNldHRpbmdzKTtcbiAgICAgICAgd2luZG93LkpFRUZBQ0VGSUxURVJBUEkuaW5pdCh7XG4gICAgICAgICAgICBjYW52YXNJZDogY2FudmFzSWQsXG4gICAgICAgICAgICBOTkNQYXRoOiAnLi92ZW5kb3IvJyxcbiAgICAgICAgICAgIGFuaW1hdGVEZWxheTogMjAsXG4gICAgICAgICAgICBjYWxsYmFja1JlYWR5OiAoZXJyQ29kZSwgamVlRmFjZUZpbHRlck9iaikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnJDb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoZXJyQ29kZSA9ICdXRUJDQU1fVU5BVkFJTEFCTEUnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3Mub25DYW1lcmFQZXJzbWlzc2lvbkZhaWxlZCAmJiBzZXR0aW5ncy5vbkNhbWVyYVBlcnNtaXNzaW9uRmFpbGVkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQU4gRVJST1IgSEFQUEVOUy4gU09SUlkgQlJPIDooIC4gRVJSID0nLCBlcnJDb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmdsID0gamVlRmFjZUZpbHRlck9ialsnR0wnXTtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZGVvVGV4dHVyZSA9IGplZUZhY2VGaWx0ZXJPYmpbJ3ZpZGVvVGV4dHVyZSddO1xuICAgICAgICAgICAgICAgIHRoaXMudmlkZW9UcmFuc2Zvcm1NYXQyID0gamVlRmFjZUZpbHRlck9ialsndmlkZW9UcmFuc2Zvcm1NYXQyJ107XG4gICAgICAgICAgICAgICAgdGhpcy5jdiA9IGplZUZhY2VGaWx0ZXJPYmpbJ2NhbnZhc0VsZW1lbnQnXTtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRIZWFkU2VhcmNoRHJhdygpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNMb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNldHRpbmdzLm9uUmVhZHkgJiYgc2V0dGluZ3Mub25SZWFkeSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIGNhbGxlZCBhdCBlYWNoIHJlbmRlciBpdGVyYXRpb24gKGRyYXdpbmcgbG9vcCk6XG4gICAgICAgICAgICBjYWxsYmFja1RyYWNrOiAoZGV0ZWN0U3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc3RhdGUuaXNFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3SGVhZFNlYXJjaChkZXRlY3RTdGF0ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVNb3ZlKGRldGVjdFN0YXRlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU1vdXNlT3BlbmluZyhkZXRlY3RTdGF0ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9nZ2xlKGlzRW5hYmxlZCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc0VuYWJsZWQgPT09IGlzRW5hYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZS5pc0VuYWJsZWQgPSBpc0VuYWJsZWQ7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb21waWxlU2hhZGVyKHNvdXJjZSwgZ2xUeXBlLCB0eXBlU3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGdsU2hhZGVyID0gdGhpcy5nbC5jcmVhdGVTaGFkZXIoZ2xUeXBlKTtcbiAgICAgICAgdGhpcy5nbC5zaGFkZXJTb3VyY2UoZ2xTaGFkZXIsIHNvdXJjZSk7XG4gICAgICAgIHRoaXMuZ2wuY29tcGlsZVNoYWRlcihnbFNoYWRlcik7XG4gICAgICAgIGlmICghdGhpcy5nbC5nZXRTaGFkZXJQYXJhbWV0ZXIoZ2xTaGFkZXIsIHRoaXMuZ2wuQ09NUElMRV9TVEFUVVMpKSB7XG4gICAgICAgICAgICBhbGVydCgnRVJST1IgSU4gJyArIHR5cGVTdHJpbmcgKyAnIFNIQURFUjogJyArIHRoaXMuZ2wuZ2V0U2hhZGVySW5mb0xvZyhnbFNoYWRlcikpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdsU2hhZGVyO1xuICAgIH1cbiAgICBpbml0SGVhZFNlYXJjaERyYXcoKSB7XG4gICAgICAgIC8vIGJ1aWxkIHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW06XG4gICAgICAgIGNvbnN0IHNoYWRlclZlcnRleFNvdXJjZSA9ICdcXG5cXFxuICAgICAgYXR0cmlidXRlIHZlYzIgYWF0X3Bvc2l0aW9uO1xcblxcXG4gICAgICB2YXJ5aW5nIHZlYzIgdlVWO1xcblxcXG4gICAgICBcXG5cXFxuICAgICAgdm9pZCBtYWluKHZvaWQpIHtcXG5cXFxuICAgICAgICBnbF9Qb3NpdGlvbiA9IHZlYzQoYWF0X3Bvc2l0aW9uLCAwLiwgMS4pO1xcblxcXG4gICAgICAgIHZVViA9IDAuNSArIDAuNSAqIGFhdF9wb3NpdGlvbjtcXG5cXFxuICAgICAgICB2VVYueCA9IDEuLXZVVi54OyAvLyBtaXJyb3IgZGlwbGF5XFxuXFxcbiAgICAgIH0nO1xuICAgICAgICBjb25zdCBzaGFkZXJGcmFnbWVudFNvdXJjZSA9ICdcXG5cXFxuICAgICAgcHJlY2lzaW9uIGxvd3AgZmxvYXQ7XFxuXFxcbiAgICAgIHZhcnlpbmcgdmVjMiB2VVY7XFxuXFxcbiAgICAgIFxcblxcXG4gICAgICB1bmlmb3JtIHNhbXBsZXIyRCBzYW1wbGVyVmlkZW87XFxuXFxcbiAgICAgIHVuaWZvcm0gbWF0MiB2aWRlb1RyYW5zZm9ybU1hdDI7XFxuXFxcbiAgICAgIHVuaWZvcm0gdmVjMyB1eHlzO1xcblxcXG4gICAgICBcXG5cXFxuICAgICAgdm9pZCBtYWluKHZvaWQpIHtcXG5cXFxuICAgICAgICB2ZWMyIHV2VmlkZW9DZW50ZXJlZCA9IDIuMCAqIHZpZGVvVHJhbnNmb3JtTWF0MiAqICh2VVYgLSAwLjUpO1xcblxcXG4gICAgICAgIHZlYzIgdXZWaWRlbyA9IHV2VmlkZW9DZW50ZXJlZCArIDAuNTtcXG5cXFxuICAgICAgICB2ZWMzIGNvbG9yVmlkZW8gPSB0ZXh0dXJlMkQoc2FtcGxlclZpZGVvLCB1dlZpZGVvKS5yZ2I7XFxuXFxcbiAgICAgICAgdmVjMiBwb3MgPSB2VVYqMi4tdmVjMigxLiwxLik7XFxuXFxcbiAgICAgICAgdmVjMiBpc0luc2lkZSA9IHN0ZXAodXh5cy54eS11eHlzLnoqdmVjMigxLiwxLiksIHBvcyk7XFxuXFxcbiAgICAgICAgaXNJbnNpZGUgKj0gc3RlcChwb3MsIHV4eXMueHkrdXh5cy56KnZlYzIoMS4sMS4pKTtcXG5cXFxuICAgICAgICB2ZWMyIGJsZW5kQ2VudGVyRmFjdG9yID0gYWJzKHBvcy11eHlzLnh5KSAvIHV4eXMuejtcXG5cXFxuICAgICAgICBmbG9hdCBhbHBoYSA9IGlzSW5zaWRlLnggKiBpc0luc2lkZS55ICogcG93KG1heChibGVuZENlbnRlckZhY3Rvci54LCBibGVuZENlbnRlckZhY3Rvci55KSwgMy4pO1xcblxcXG4gICAgICAgIHZlYzMgY29sb3IgPSBtaXgoY29sb3JWaWRlbywgdmVjMygwLiwwLjYsMS4pLCBhbHBoYSk7XFxuXFxcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNChjb2xvciwxLik7XFxuXFxcbiAgICAgIH0nO1xuICAgICAgICBjb25zdCBnbFNoYWRlclZlcnRleCA9IHRoaXMuY29tcGlsZVNoYWRlcihzaGFkZXJWZXJ0ZXhTb3VyY2UsIHRoaXMuZ2wuVkVSVEVYX1NIQURFUiwgJ1ZFUlRFWCcpO1xuICAgICAgICBjb25zdCBnbFNoYWRlckZyYWdtZW50ID0gdGhpcy5jb21waWxlU2hhZGVyKHNoYWRlckZyYWdtZW50U291cmNlLCB0aGlzLmdsLkZSQUdNRU5UX1NIQURFUiwgJ0ZSQUdNRU5UJyk7XG4gICAgICAgIHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0gPSB0aGlzLmdsLmNyZWF0ZVByb2dyYW0oKTtcbiAgICAgICAgdGhpcy5nbC5hdHRhY2hTaGFkZXIodGhpcy5nbEhlYWRTZWFyY2hEcmF3U2hhZGVyUHJvZ3JhbSwgZ2xTaGFkZXJWZXJ0ZXgpO1xuICAgICAgICB0aGlzLmdsLmF0dGFjaFNoYWRlcih0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtLCBnbFNoYWRlckZyYWdtZW50KTtcbiAgICAgICAgdGhpcy5nbC5saW5rUHJvZ3JhbSh0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtKTtcbiAgICAgICAgY29uc3Qgc2FtcGxlclZpZGVvID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5nbEhlYWRTZWFyY2hEcmF3U2hhZGVyUHJvZ3JhbSwgJ3NhbXBsZXJWaWRlbycpO1xuICAgICAgICB0aGlzLmhlYWRTZWFyY2hVbmlmb3JtWHlzID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5nbEhlYWRTZWFyY2hEcmF3U2hhZGVyUHJvZ3JhbSwgJ3V4eXMnKTtcbiAgICAgICAgdGhpcy5oZWFkU2VhcmNoVW5pZm9ybVZpZGVvVHJhbnNmb3JtTWF0MiA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0sICd2aWRlb1RyYW5zZm9ybU1hdDInKTtcbiAgICAgICAgdGhpcy5nbC51c2VQcm9ncmFtKHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0pO1xuICAgICAgICB0aGlzLmdsLnVuaWZvcm0xaShzYW1wbGVyVmlkZW8sIDApO1xuICAgIH1cbiAgICBkcmF3SGVhZFNlYXJjaChkZXRlY3RTdGF0ZSkge1xuICAgICAgICAvLyB1bmJpbmQgdGhlIGN1cnJlbnQgRkJPIGFuZCBzZXQgdGhlIHZpZXdwb3J0IGFzIHRoZSB3aG9sZSBjYW52YXM6XG4gICAgICAgIHRoaXMuZ2wudmlld3BvcnQoMCwgMCwgdGhpcy5jdi53aWR0aCwgdGhpcy5jdi5oZWlnaHQpO1xuICAgICAgICAvLyB1c2UgdGhlIGhlYWQgZHJhdyBzaGFkZXIgcHJvZ3JhbSBhbmQgc3luYyB1bmlmb3JtczpcbiAgICAgICAgdGhpcy5nbC51c2VQcm9ncmFtKHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0pO1xuICAgICAgICB0aGlzLmdsLmFjdGl2ZVRleHR1cmUodGhpcy5nbC5URVhUVVJFMCk7XG4gICAgICAgIHRoaXMuZ2wuYmluZFRleHR1cmUodGhpcy5nbC5URVhUVVJFXzJELCB0aGlzLnZpZGVvVGV4dHVyZSk7XG4gICAgICAgIHRoaXMuZ2wudW5pZm9ybTNmKHRoaXMuaGVhZFNlYXJjaFVuaWZvcm1YeXMsIGRldGVjdFN0YXRlLngsIGRldGVjdFN0YXRlLnksIGRldGVjdFN0YXRlLnMpO1xuICAgICAgICB0aGlzLmdsLnVuaWZvcm1NYXRyaXgyZnYodGhpcy5oZWFkU2VhcmNoVW5pZm9ybVZpZGVvVHJhbnNmb3JtTWF0MiwgZmFsc2UsIHRoaXMudmlkZW9UcmFuc2Zvcm1NYXQyKTtcbiAgICAgICAgLy8gZHJhdyB0aGUgc3F1YXJlIGxvb2tpbmcgZm9yIHRoZSBoZWFkXG4gICAgICAgIC8vIHRoZSBWQk8gZmlsbGluZyB0aGUgd2hvbGUgc2NyZWVuIGlzIHN0aWxsIGJvdW5kIHRvIHRoZSBjb250ZXh0XG4gICAgICAgIC8vIGZpbGwgdGhlIHZpZXdQb3J0OlxuICAgICAgICB0aGlzLmdsLmRyYXdFbGVtZW50cyh0aGlzLmdsLlRSSUFOR0xFUywgMywgdGhpcy5nbC5VTlNJR05FRF9TSE9SVCwgMCk7XG4gICAgfVxufVxuZXhwb3J0cy5kZWZhdWx0ID0gSGVhZENvbnRyb2xTZXJ2aWNlO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmluaXRIZWFkQ29udHJvbCA9IGV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbmNvbnN0IEhlYWRDb250cm9sU2VydmljZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0hlYWRDb250cm9sU2VydmljZVwiKSk7XG52YXIgSGVhZENvbnRyb2xTZXJ2aWNlXzIgPSByZXF1aXJlKFwiLi9IZWFkQ29udHJvbFNlcnZpY2VcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2ltcG9ydERlZmF1bHQoSGVhZENvbnRyb2xTZXJ2aWNlXzIpLmRlZmF1bHQ7IH0gfSk7XG5jb25zdCBpbml0SGVhZENvbnRyb2wgPSAoKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgaGVhZENvbnRyb2xTZXJ2aWNlID0gbmV3IEhlYWRDb250cm9sU2VydmljZV8xLmRlZmF1bHQoJ2hlYWQtcHJldmlldycsIHtcbiAgICAgICAgICAgIG9uUmVhZHk6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaGVhZCBjb250cm9sIGlzIHJlYWR5Jyk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uQ2FtZXJhUGVyc21pc3Npb25GYWlsZWQ6ICgpID0+IGFsZXJ0KCdUaGlzIGdhbWUgaXMgaGVhZC1jb250cm9sbGVkLiBZb3UgbmVlZCB0byBlbmFibGUgY2FtZXJhIHRvIHBsYXkgdGhlIGdhbWUuJyksXG4gICAgICAgIH0pO1xuICAgICAgICBoZWFkQ29udHJvbFNlcnZpY2UudG9nZ2xlKHRydWUpO1xuICAgICAgICBoZWFkQ29udHJvbFNlcnZpY2UuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Ugb3BlbmVkJywgKCkgPT4gY29uc29sZS5sb2coJ21vdXNlIG9wZW5lZCcpKTtcbiAgICAgICAgaGVhZENvbnRyb2xTZXJ2aWNlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlIGNsb3NlZCcsICgpID0+IGNvbnNvbGUubG9nKCdtb3VzZSBjbG9zZWQnKSk7XG4gICAgICAgIGhlYWRDb250cm9sU2VydmljZS5hZGRFdmVudExpc3RlbmVyKCdsZWZ0JywgKCkgPT4gY29uc29sZS5sb2coJ2xlZnQnKSk7XG4gICAgICAgIGhlYWRDb250cm9sU2VydmljZS5hZGRFdmVudExpc3RlbmVyKCdyaWdodCcsICgpID0+IGNvbnNvbGUubG9nKCdyaWdodCcpKTtcbiAgICB9KTtcbn07XG5leHBvcnRzLmluaXRIZWFkQ29udHJvbCA9IGluaXRIZWFkQ29udHJvbDtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmluaXRJbWFnZUNhcHR1cmUgPSBleHBvcnRzLnRha2VQaG90byA9IHZvaWQgMDtcbnJlcXVpcmUoXCJpbWFnZS1jYXB0dXJlXCIpO1xubGV0IGltYWdlQ2FwdHVyZTtcbmxldCBpc0luaXQgPSBmYWxzZTtcbmNvbnN0IHRha2VQaG90byA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIGlmICghaW1hZ2VDYXB0dXJlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgeWllbGQgaW1hZ2VDYXB0dXJlXG4gICAgICAgIC50YWtlUGhvdG8oKVxuICAgICAgICAudGhlbigoYmxvYikgPT4gY3JlYXRlSW1hZ2VCaXRtYXAoYmxvYikpXG4gICAgICAgIC50aGVuKChpbWFnZUJpdG1hcCkgPT4ge1xuICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFrZVBob3RvQ2FudmFzJyk7XG4gICAgICAgIGNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgZHJhd0NhbnZhcyhjYW52YXMsIGltYWdlQml0bWFwKTtcbiAgICAgICAgLy9jYW52YXMudG9CbG9iKGFzeW5jIChibG9iKSA9PiB7XG4gICAgICAgIC8vICB0cnkge1xuICAgICAgICAvLyAgICBhd2FpdCBjcmVhdGVGaWxlKGJsb2IpO1xuICAgICAgICAvLyAgICBhd2FpdCByZWFkRmlsZSgpO1xuICAgICAgICAvLyAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyAgICB0aHJvdyBlO1xuICAgICAgICAvLyAgfVxuICAgICAgICAvL30pO1xuICAgIH0pO1xufSk7XG5leHBvcnRzLnRha2VQaG90byA9IHRha2VQaG90bztcbmZ1bmN0aW9uIGRyYXdDYW52YXMoY2FudmFzLCBpbWcpIHtcbiAgICBjYW52YXMud2lkdGggPSBnZXRDb21wdXRlZFN0eWxlKGNhbnZhcykud2lkdGguc3BsaXQoJ3B4JylbMF07XG4gICAgY2FudmFzLmhlaWdodCA9IGdldENvbXB1dGVkU3R5bGUoY2FudmFzKS5oZWlnaHQuc3BsaXQoJ3B4JylbMF07XG4gICAgbGV0IHJhdGlvID0gTWF0aC5taW4oY2FudmFzLndpZHRoIC8gaW1nLndpZHRoLCBjYW52YXMuaGVpZ2h0IC8gaW1nLmhlaWdodCk7XG4gICAgbGV0IHggPSAoY2FudmFzLndpZHRoIC0gaW1nLndpZHRoICogcmF0aW8pIC8gMjtcbiAgICBsZXQgeSA9IChjYW52YXMuaGVpZ2h0IC0gaW1nLmhlaWdodCAqIHJhdGlvKSAvIDI7XG4gICAgY2FudmFzLmdldENvbnRleHQoJzJkJykuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgY2FudmFzLmdldENvbnRleHQoJzJkJykuZHJhd0ltYWdlKGltZywgMCwgMCwgaW1nLndpZHRoLCBpbWcuaGVpZ2h0LCB4LCB5LCBpbWcud2lkdGggKiByYXRpbywgaW1nLmhlaWdodCAqIHJhdGlvKTtcbn1cbmNvbnN0IGluaXRJbWFnZUNhcHR1cmUgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICBpZiAoaXNJbml0KSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgaXNJbml0ID0gdHJ1ZTtcbiAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlc1xuICAgICAgICAuZ2V0VXNlck1lZGlhKHsgdmlkZW86IHRydWUgfSlcbiAgICAgICAgLnRoZW4oKG1lZGlhU3RyZWFtKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0cmFjayA9IG1lZGlhU3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF07XG4gICAgICAgICAgICBpbWFnZUNhcHR1cmUgPSBuZXcgSW1hZ2VDYXB0dXJlKHRyYWNrKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbWFnZSBjYXB0dXJlIGluaXRpZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgIGFsZXJ0KCdJbWFnZSBjYXB0dXJlIGlzIG5vdCBzdXBwb3J0ZWQgb24geW91ciBkZXZpY2UgOignKTtcbiAgICB9KTtcbn0pO1xuZXhwb3J0cy5pbml0SW1hZ2VDYXB0dXJlID0gaW5pdEltYWdlQ2FwdHVyZTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnNheVNvbWV0aGluZyA9IGV4cG9ydHMuc2V0VXBVc2VyID0gZXhwb3J0cy5QSFJBU0VTID0gZXhwb3J0cy5pbml0Vm9pY2VTZXJ2aWNlID0gdm9pZCAwO1xubGV0IFZPSUNFO1xuY29uc3QgaW5pdFZvaWNlU2VydmljZSA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIFZPSUNFID0gd2luZG93LnNwZWVjaFN5bnRoZXNpcy5nZXRWb2ljZXMoKS5maW5kKCh7IGxhbmcgfSkgPT4gbGFuZyA9PT0gJ2VuLUdCJyk7XG4gICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICB9LCA1MDApO1xuICAgIH0pO1xufSk7XG5leHBvcnRzLmluaXRWb2ljZVNlcnZpY2UgPSBpbml0Vm9pY2VTZXJ2aWNlO1xuZXhwb3J0cy5QSFJBU0VTID0ge1xuICAgIEhFTExPOiAnYEhpLCAldXNlcm5hbWUlLiBIYXZlIGEgZ29vZCBnYW1lJyxcbiAgICBSSUdIVDogJ0dvb2QgcmlnaHQgdHVybiwgJXVzZXJuYW1lJScsXG59O1xubGV0IHVzZXJOYW1lID0gJyc7XG5jb25zdCBzZXRVcFVzZXIgPSAobmFtZSkgPT4ge1xuICAgIHVzZXJOYW1lID0gbmFtZTtcbn07XG5leHBvcnRzLnNldFVwVXNlciA9IHNldFVwVXNlcjtcbmNvbnN0IHNheVNvbWV0aGluZyA9ICh0ZXh0KSA9PiB7XG4gICAgaWYgKCFWT0lDRSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHV0dGVyYW5jZSA9IG5ldyBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UodGV4dC5yZXBsYWNlKCcldXNlcm5hbWUlJywgdXNlck5hbWUpKTtcbiAgICB1dHRlcmFuY2Uudm9pY2UgPSBWT0lDRTtcbiAgICB1dHRlcmFuY2Uudm9sdW1lID0gMTtcbiAgICB1dHRlcmFuY2UucGl0Y2ggPSAxO1xuICAgIHV0dGVyYW5jZS5yYXRlID0gMTtcbiAgICBzcGVlY2hTeW50aGVzaXMuY2FuY2VsKCk7XG4gICAgc3BlZWNoU3ludGhlc2lzLnNwZWFrKHV0dGVyYW5jZSk7XG59O1xuZXhwb3J0cy5zYXlTb21ldGhpbmcgPSBzYXlTb21ldGhpbmc7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIGRlZmluaXRpb24pIHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGVcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDYwNyk7XG4iXSwic291cmNlUm9vdCI6IiJ9