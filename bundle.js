/*! For license information please see bundle.js.LICENSE.txt */
!function(){var e={608:function(e){var t,o,i,n,a;t=console.log,o=console.warn,i=console.error,n=console.debug,a={unbind:function(){console.log=t,console.warn=o,console.error=i,console.debug=n},bind:function(e,a){if("function"!=typeof e)return console.error("You must pass a valid callback function."),!1;a=Boolean(a);const r="info",s="warn",d="error",l="debug";console.log=console.info=function(){t&&(a||t.call(console,...arguments),e(r,arguments))},console.warn=function(){o&&(a||o.call(console,...arguments),e(s,arguments))},console.error=function(){i&&(a||i.call(console,...arguments),e(d,arguments))},console.debug=function(){n&&(a||n.call(console,...arguments),e(l,arguments))}}},void 0!==e.exports?e.exports=a:window&&"object"==typeof window?window.ConsoleSubscriber=a:console.error("Failed to export module.")},505:function(e,t,o){"use strict";o.r(t),o.d(t,{ImageCapture:function(){return i}});let i=window.ImageCapture;void 0===i&&(i=class{constructor(e){if("video"!==e.kind)throw new DOMException("NotSupportedError");this._videoStreamTrack=e,"readyState"in this._videoStreamTrack||(this._videoStreamTrack.readyState="live"),this._previewStream=new MediaStream([e]),this.videoElement=document.createElement("video"),this.videoElementPlaying=new Promise((e=>{this.videoElement.addEventListener("playing",e)})),HTMLMediaElement?this.videoElement.srcObject=this._previewStream:this.videoElement.src=URL.createObjectURL(this._previewStream),this.videoElement.muted=!0,this.videoElement.setAttribute("playsinline",""),this.videoElement.play(),this.canvasElement=document.createElement("canvas"),this.canvas2dContext=this.canvasElement.getContext("2d")}get videoStreamTrack(){return this._videoStreamTrack}getPhotoCapabilities(){return new Promise((function(e,t){const o={current:0,min:0,max:0};e({exposureCompensation:o,exposureMode:"none",fillLightMode:"none",focusMode:"none",imageHeight:o,imageWidth:o,iso:o,redEyeReduction:!1,whiteBalanceMode:"none",zoom:o}),t(new DOMException("OperationError"))}))}setOptions(e={}){return new Promise((function(e,t){}))}takePhoto(){const e=this;return new Promise((function(t,o){if("live"!==e._videoStreamTrack.readyState)return o(new DOMException("InvalidStateError"));e.videoElementPlaying.then((()=>{try{e.canvasElement.width=e.videoElement.videoWidth,e.canvasElement.height=e.videoElement.videoHeight,e.canvas2dContext.drawImage(e.videoElement,0,0),e.canvasElement.toBlob(t)}catch(e){o(new DOMException("UnknownError"))}}))}))}grabFrame(){const e=this;return new Promise((function(t,o){if("live"!==e._videoStreamTrack.readyState)return o(new DOMException("InvalidStateError"));e.videoElementPlaying.then((()=>{try{e.canvasElement.width=e.videoElement.videoWidth,e.canvasElement.height=e.videoElement.videoHeight,e.canvas2dContext.drawImage(e.videoElement,0,0),t(window.createImageBitmap(e.canvasElement))}catch(e){o(new DOMException("UnknownError"))}}))}))}}),window.ImageCapture=i},90:function(e,t,o){"use strict";o.r(t)},688:function(e,t,o){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.enableMobileConsole=void 0;const n=i(o(608));t.enableMobileConsole=()=>{const e=[];n.default.bind(((t,o)=>{5===e.length&&e.shift(),e.push({category:t,message:o[0]}),document.getElementById("console").innerHTML=e.map((e=>`<p>${e.message}</p>`)).join("")}))}},203:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},607:function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,a){function r(e){try{d(i.next(e))}catch(e){a(e)}}function s(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=o(688),a=o(341),r=o(717),s=o(614);o(203),o(90);const d=$("#startButton"),l=$("#preloader"),c=$("#start"),h=$("#game"),u=$("#nameInput"),m=e=>i(void 0,void 0,void 0,(function*(){try{yield r.takePhoto(),h.show(),c.hide(),s.setUpUser(e)}catch(e){alert(e)}}));window.onload=()=>i(void 0,void 0,void 0,(function*(){n.enableMobileConsole(),yield i(void 0,void 0,void 0,(function*(){l.show(),h.hide(),c.hide(),yield i(void 0,void 0,void 0,(function*(){return Promise.all([r.initImageCapture(),s.initVoiceService(),a.initHeadControl()]).then((()=>{l.hide(),c.show()})).catch((e=>{console.log(e)}))})),u.on("input",(()=>{u.val()?d.prop("disabled",!1):d.prop("disabled",!0)})),d.click((()=>i(void 0,void 0,void 0,(function*(){yield m(u.val())}))))}))}))},800:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o={mouseOpeningTreshold:.6,mouseClosingTreshold:.5,headMovementStartedTreshold:.15,headMovementStoppedTreshold:.08};class i extends EventTarget{constructor(e,t){super(),this.movementLocks={vertical:!1,horizontal:!1,mouseOpened:!1},this.state={isLoaded:!1,isDetected:!1,isEnabled:!1},this.gl=null,this.cv=null,this.videoTexture=null,this.videoTransformMat2=null,this.glHeadSearchDrawShaderProgram=null,this.headSearchUniformXys=null,this.headSearchUniformVideoTransformMat2=null,this.handleMouseOpening=e=>{if(e.ry<-1*this.settings.headMovementStartedTreshold||e.ry>this.settings.headMovementStartedTreshold)return;let t=5*(e.expressions[0]-.2);return t=Math.min(Math.max(t,0),1),t>this.settings.mouseOpeningTreshold&&!this.movementLocks.mouseOpened?(this.movementLocks.mouseOpened=!0,void this.dispatchEvent(new Event("mouse opened"))):t<this.settings.mouseClosingTreshold&&this.movementLocks.mouseOpened?(this.movementLocks.mouseOpened=!1,void this.dispatchEvent(new Event("mouse closed"))):void 0},this.handleMove=e=>{0!==e.rx&&this.handleAxisMovement({axis:"vertical",axisPosition:e.rx,maxValue:"down",minValue:"up"}),0!==e.ry&&this.handleAxisMovement({axis:"horizontal",axisPosition:e.ry,maxValue:"left",minValue:"right"})},this.handleAxisMovement=({axis:e,axisPosition:t,maxValue:o,minValue:i})=>t<-1*this.settings.headMovementStartedTreshold&&!this.movementLocks[e]?(this.movementLocks[e]=!0,void this.dispatchEvent(new Event(i))):t>this.settings.headMovementStartedTreshold&&!this.movementLocks[e]?(this.movementLocks[e]=!0,void this.dispatchEvent(new Event(o))):void(t>-1*this.settings.headMovementStoppedTreshold&&t<this.settings.headMovementStoppedTreshold&&(this.movementLocks[e]=!1)),this.settings=Object.assign(Object.assign({},o),t),window.JEEFACEFILTERAPI.init({canvasId:e,NNCPath:"./vendor/",animateDelay:20,callbackReady:(e,o)=>{if(e)return(e="WEBCAM_UNAVAILABLE")?void(t.onCameraPersmissionFailed&&t.onCameraPersmissionFailed()):void console.error("AN ERROR HAPPENS. SORRY BRO :( . ERR =",e);this.gl=o.GL,this.videoTexture=o.videoTexture,this.videoTransformMat2=o.videoTransformMat2,this.cv=o.canvasElement,this.initHeadSearchDraw(),this.state.isLoaded=!0,t.onReady&&t.onReady()},callbackTrack:e=>{this.state.isEnabled&&(this.drawHeadSearch(e),this.handleMove(e),this.handleMouseOpening(e))}})}toggle(e){return this.state.isEnabled===e||(this.state.isEnabled=e),!0}compileShader(e,t,o){const i=this.gl.createShader(t);return this.gl.shaderSource(i,e),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(alert("ERROR IN "+o+" SHADER: "+this.gl.getShaderInfoLog(i)),null)}initHeadSearchDraw(){const e=this.compileShader("\n      attribute vec2 aat_position;\n      varying vec2 vUV;\n      \n      void main(void) {\n        gl_Position = vec4(aat_position, 0., 1.);\n        vUV = 0.5 + 0.5 * aat_position;\n        vUV.x = 1.-vUV.x; // mirror diplay\n      }",this.gl.VERTEX_SHADER,"VERTEX"),t=this.compileShader("\n      precision lowp float;\n      varying vec2 vUV;\n      \n      uniform sampler2D samplerVideo;\n      uniform mat2 videoTransformMat2;\n      uniform vec3 uxys;\n      \n      void main(void) {\n        vec2 uvVideoCentered = 2.0 * videoTransformMat2 * (vUV - 0.5);\n        vec2 uvVideo = uvVideoCentered + 0.5;\n        vec3 colorVideo = texture2D(samplerVideo, uvVideo).rgb;\n        vec2 pos = vUV*2.-vec2(1.,1.);\n        vec2 isInside = step(uxys.xy-uxys.z*vec2(1.,1.), pos);\n        isInside *= step(pos, uxys.xy+uxys.z*vec2(1.,1.));\n        vec2 blendCenterFactor = abs(pos-uxys.xy) / uxys.z;\n        float alpha = isInside.x * isInside.y * pow(max(blendCenterFactor.x, blendCenterFactor.y), 3.);\n        vec3 color = mix(colorVideo, vec3(0.,0.6,1.), alpha);\n        gl_FragColor = vec4(color,1.);\n      }",this.gl.FRAGMENT_SHADER,"FRAGMENT");this.glHeadSearchDrawShaderProgram=this.gl.createProgram(),this.gl.attachShader(this.glHeadSearchDrawShaderProgram,e),this.gl.attachShader(this.glHeadSearchDrawShaderProgram,t),this.gl.linkProgram(this.glHeadSearchDrawShaderProgram);const o=this.gl.getUniformLocation(this.glHeadSearchDrawShaderProgram,"samplerVideo");this.headSearchUniformXys=this.gl.getUniformLocation(this.glHeadSearchDrawShaderProgram,"uxys"),this.headSearchUniformVideoTransformMat2=this.gl.getUniformLocation(this.glHeadSearchDrawShaderProgram,"videoTransformMat2"),this.gl.useProgram(this.glHeadSearchDrawShaderProgram),this.gl.uniform1i(o,0)}drawHeadSearch(e){this.gl.viewport(0,0,this.cv.width,this.cv.height),this.gl.useProgram(this.glHeadSearchDrawShaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.videoTexture),this.gl.uniform3f(this.headSearchUniformXys,e.x,e.y,e.s),this.gl.uniformMatrix2fv(this.headSearchUniformVideoTransformMat2,!1,this.videoTransformMat2),this.gl.drawElements(this.gl.TRIANGLES,3,this.gl.UNSIGNED_SHORT,0)}}t.default=i},341:function(e,t,o){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.initHeadControl=t.default=void 0;const n=i(o(800));var a=o(800);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(a).default}}),t.initHeadControl=()=>new Promise(((e,t)=>{const o=new n.default("head-preview",{onReady:()=>{console.log("head control is ready"),e()},onCameraPersmissionFailed:()=>alert("This game is head-controlled. You need to enable camera to play the game.")});o.toggle(!0),o.addEventListener("mouse opened",(()=>console.log("mouse opened"))),o.addEventListener("mouse closed",(()=>console.log("mouse closed"))),o.addEventListener("left",(()=>console.log("left"))),o.addEventListener("right",(()=>console.log("right")))}))},717:function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,a){function r(e){try{d(i.next(e))}catch(e){a(e)}}function s(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}d((i=i.apply(e,t||[])).next())}))};let n;Object.defineProperty(t,"__esModule",{value:!0}),t.initImageCapture=t.takePhoto=void 0,o(505);let a=!1;t.takePhoto=()=>i(void 0,void 0,void 0,(function*(){n&&(yield n.takePhoto().then((e=>createImageBitmap(e))).then((e=>{const t=document.querySelector("#takePhotoCanvas");t.style.display="block",function(e,t){e.width=getComputedStyle(e).width.split("px")[0],e.height=getComputedStyle(e).height.split("px")[0];let o=Math.min(e.width/t.width,e.height/t.height),i=(e.width-t.width*o)/2,n=(e.height-t.height*o)/2;e.getContext("2d").clearRect(0,0,e.width,e.height),e.getContext("2d").drawImage(t,0,0,t.width,t.height,i,n,t.width*o,t.height*o)}(t,e)})))})),t.initImageCapture=()=>i(void 0,void 0,void 0,(function*(){return a?Promise.resolve():(a=!0,navigator.mediaDevices.getUserMedia({video:!0}).then((e=>{const t=e.getVideoTracks()[0];console.log(ImageCapture);try{n=new ImageCapture(t)}catch(e){throw e}})).catch((()=>{alert("Image capture is not supported on your device :(")})))}))},614:function(e,t){"use strict";var o=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,a){function r(e){try{d(i.next(e))}catch(e){a(e)}}function s(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}d((i=i.apply(e,t||[])).next())}))};let i;Object.defineProperty(t,"__esModule",{value:!0}),t.saySomething=t.setUpUser=t.PHRASES=t.initVoiceService=void 0,t.initVoiceService=()=>o(void 0,void 0,void 0,(function*(){return new Promise((e=>{setTimeout((()=>{i=window.speechSynthesis.getVoices().find((({lang:e})=>"en-GB"===e)),e(!0)}),500)}))})),t.PHRASES={HELLO:"`Hi, %username%. Have a good game",RIGHT:"Good right turn, %username%"};let n="";t.setUpUser=e=>{n=e},t.saySomething=e=>{if(!i)return;const t=new SpeechSynthesisUtterance(e.replace("%username%",n));t.voice=i,t.volume=1,t.pitch=1,t.rate=1,speechSynthesis.cancel(),speechSynthesis.speak(t)}}},t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,o),n.exports}o.d=function(e,t){for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o(607)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vaG0tc25ha2UvLi9ub2RlX21vZHVsZXMvY29uc29sZS1zdWJzY3JpYmVyL2luZGV4LmpzIiwid2VicGFjazovL29obS1zbmFrZS8uL25vZGVfbW9kdWxlcy9pbWFnZS1jYXB0dXJlL3NyYy9pbWFnZWNhcHR1cmUuanMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL2NvbnNvbGUudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL2RlY2xhcmUudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL29obS1zbmFrZS8uL3NyYy9zZXJ2aWNlcy9IZWFkQ29udHJvbFNlcnZpY2UvSGVhZENvbnRyb2xTZXJ2aWNlLnRzIiwid2VicGFjazovL29obS1zbmFrZS8uL3NyYy9zZXJ2aWNlcy9IZWFkQ29udHJvbFNlcnZpY2UvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL3NlcnZpY2VzL0ltYWdlQ2FwdHVyZVNlcnZpY2UvaW1hZ2VDYXB0dXJlLnRzIiwid2VicGFjazovL29obS1zbmFrZS8uL3NyYy9zZXJ2aWNlcy9Wb2ljZVNlcnZpY2Uvdm9pY2UudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL29obS1zbmFrZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6WyJfbG9nIiwiX3dhcm4iLCJfZXJyb3IiLCJfZGVidWciLCJDb25zb2xlU3Vic2NyaWJlciIsImNvbnNvbGUiLCJsb2ciLCJ3YXJuIiwiZXJyb3IiLCJkZWJ1ZyIsInVuYmluZCIsImJpbmQiLCJjYiIsInByZXZlbnRMb2dnaW5nIiwiQm9vbGVhbiIsIkNBVEVHT1JZX0lORk8iLCJDQVRFR09SWV9XQVJOIiwiQ0FURUdPUllfRVJST1IiLCJDQVRFR09SWV9ERUJVRyIsImluZm8iLCJjYWxsIiwiYXJndW1lbnRzIiwibW9kdWxlIiwiZXhwb3J0cyIsIndpbmRvdyIsIkltYWdlQ2FwdHVyZSIsInZpZGVvU3RyZWFtVHJhY2siLCJraW5kIiwiRE9NRXhjZXB0aW9uIiwidGhpcyIsIl92aWRlb1N0cmVhbVRyYWNrIiwicmVhZHlTdGF0ZSIsIl9wcmV2aWV3U3RyZWFtIiwiTWVkaWFTdHJlYW0iLCJ2aWRlb0VsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ2aWRlb0VsZW1lbnRQbGF5aW5nIiwiUHJvbWlzZSIsInJlc29sdmUiLCJhZGRFdmVudExpc3RlbmVyIiwiSFRNTE1lZGlhRWxlbWVudCIsInNyY09iamVjdCIsInNyYyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIm11dGVkIiwic2V0QXR0cmlidXRlIiwicGxheSIsImNhbnZhc0VsZW1lbnQiLCJjYW52YXMyZENvbnRleHQiLCJnZXRDb250ZXh0IiwicmVqZWN0IiwiTWVkaWFTZXR0aW5nc1JhbmdlIiwiY3VycmVudCIsIm1pbiIsIm1heCIsImV4cG9zdXJlQ29tcGVuc2F0aW9uIiwiZXhwb3N1cmVNb2RlIiwiZmlsbExpZ2h0TW9kZSIsImZvY3VzTW9kZSIsImltYWdlSGVpZ2h0IiwiaW1hZ2VXaWR0aCIsImlzbyIsInJlZEV5ZVJlZHVjdGlvbiIsIndoaXRlQmFsYW5jZU1vZGUiLCJ6b29tIiwicGhvdG9TZXR0aW5ncyIsInNlbGYiLCJ0aGVuIiwid2lkdGgiLCJ2aWRlb1dpZHRoIiwiaGVpZ2h0IiwidmlkZW9IZWlnaHQiLCJkcmF3SW1hZ2UiLCJ0b0Jsb2IiLCJjcmVhdGVJbWFnZUJpdG1hcCIsIl9faW1wb3J0RGVmYXVsdCIsIm1vZCIsIl9fZXNNb2R1bGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiZW5hYmxlTW9iaWxlQ29uc29sZSIsImNvbnNvbGVfc3Vic2NyaWJlcl8xIiwiYnVmZmVyIiwiZGVmYXVsdCIsImNhdGVnb3J5IiwiYXJncyIsImxlbmd0aCIsInNoaWZ0IiwicHVzaCIsIm1lc3NhZ2UiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsIm1hcCIsIm0iLCJqb2luIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiZnVsZmlsbGVkIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwiYXBwbHkiLCJjb25zb2xlXzEiLCJIZWFkQ29udHJvbFNlcnZpY2VfMSIsImltYWdlQ2FwdHVyZV8xIiwidm9pY2VfMSIsInN0YXJ0QnV0dG9uIiwiJCIsInByZWxvYWRlciIsInN0YXJ0U2NyZWVuIiwiZ2FtZVNjcmVlbiIsIm5hbWVJbnB1dCIsInN0YXJ0R2FtZSIsInBsYXllck5hbWUiLCJ0YWtlUGhvdG8iLCJzaG93IiwiaGlkZSIsInNldFVwVXNlciIsImFsZXJ0Iiwib25sb2FkIiwiYWxsIiwiaW5pdEltYWdlQ2FwdHVyZSIsImluaXRWb2ljZVNlcnZpY2UiLCJpbml0SGVhZENvbnRyb2wiLCJjYXRjaCIsIm9uIiwidmFsIiwicHJvcCIsImNsaWNrIiwiZGVmYXVsdFNldHRpbmdzIiwibW91c2VPcGVuaW5nVHJlc2hvbGQiLCJtb3VzZUNsb3NpbmdUcmVzaG9sZCIsImhlYWRNb3ZlbWVudFN0YXJ0ZWRUcmVzaG9sZCIsImhlYWRNb3ZlbWVudFN0b3BwZWRUcmVzaG9sZCIsIkhlYWRDb250cm9sU2VydmljZSIsIkV2ZW50VGFyZ2V0IiwiY2FudmFzSWQiLCJzZXR0aW5ncyIsInN1cGVyIiwibW92ZW1lbnRMb2NrcyIsInZlcnRpY2FsIiwiaG9yaXpvbnRhbCIsIm1vdXNlT3BlbmVkIiwic3RhdGUiLCJpc0xvYWRlZCIsImlzRGV0ZWN0ZWQiLCJpc0VuYWJsZWQiLCJnbCIsImN2IiwidmlkZW9UZXh0dXJlIiwidmlkZW9UcmFuc2Zvcm1NYXQyIiwiZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0iLCJoZWFkU2VhcmNoVW5pZm9ybVh5cyIsImhlYWRTZWFyY2hVbmlmb3JtVmlkZW9UcmFuc2Zvcm1NYXQyIiwiaGFuZGxlTW91c2VPcGVuaW5nIiwiZGV0ZWN0U3RhdGUiLCJyeSIsIm1vdXRoT3BlbmluZyIsImV4cHJlc3Npb25zIiwiTWF0aCIsImRpc3BhdGNoRXZlbnQiLCJFdmVudCIsImhhbmRsZU1vdmUiLCJtdiIsInJ4IiwiaGFuZGxlQXhpc01vdmVtZW50IiwiYXhpcyIsImF4aXNQb3NpdGlvbiIsIm1heFZhbHVlIiwibWluVmFsdWUiLCJhc3NpZ24iLCJKRUVGQUNFRklMVEVSQVBJIiwiaW5pdCIsIk5OQ1BhdGgiLCJhbmltYXRlRGVsYXkiLCJjYWxsYmFja1JlYWR5IiwiZXJyQ29kZSIsImplZUZhY2VGaWx0ZXJPYmoiLCJvbkNhbWVyYVBlcnNtaXNzaW9uRmFpbGVkIiwiaW5pdEhlYWRTZWFyY2hEcmF3Iiwib25SZWFkeSIsImNhbGxiYWNrVHJhY2siLCJkcmF3SGVhZFNlYXJjaCIsInNvdXJjZSIsImdsVHlwZSIsInR5cGVTdHJpbmciLCJnbFNoYWRlciIsImNyZWF0ZVNoYWRlciIsInNoYWRlclNvdXJjZSIsImNvbXBpbGVTaGFkZXIiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsImdldFNoYWRlckluZm9Mb2ciLCJnbFNoYWRlclZlcnRleCIsIlZFUlRFWF9TSEFERVIiLCJnbFNoYWRlckZyYWdtZW50IiwiRlJBR01FTlRfU0hBREVSIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwic2FtcGxlclZpZGVvIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwidXNlUHJvZ3JhbSIsInVuaWZvcm0xaSIsInZpZXdwb3J0IiwiYWN0aXZlVGV4dHVyZSIsIlRFWFRVUkUwIiwiYmluZFRleHR1cmUiLCJURVhUVVJFXzJEIiwidW5pZm9ybTNmIiwieCIsInkiLCJzIiwidW5pZm9ybU1hdHJpeDJmdiIsImRyYXdFbGVtZW50cyIsIlRSSUFOR0xFUyIsIlVOU0lHTkVEX1NIT1JUIiwiSGVhZENvbnRyb2xTZXJ2aWNlXzIiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiaGVhZENvbnRyb2xTZXJ2aWNlIiwidG9nZ2xlIiwiaW1hZ2VDYXB0dXJlIiwiaXNJbml0IiwiYmxvYiIsImltYWdlQml0bWFwIiwiY2FudmFzIiwicXVlcnlTZWxlY3RvciIsInN0eWxlIiwiZGlzcGxheSIsImltZyIsImdldENvbXB1dGVkU3R5bGUiLCJzcGxpdCIsInJhdGlvIiwiY2xlYXJSZWN0IiwiZHJhd0NhbnZhcyIsIm5hdmlnYXRvciIsIm1lZGlhRGV2aWNlcyIsImdldFVzZXJNZWRpYSIsInZpZGVvIiwibWVkaWFTdHJlYW0iLCJ0cmFjayIsImdldFZpZGVvVHJhY2tzIiwiVk9JQ0UiLCJzYXlTb21ldGhpbmciLCJQSFJBU0VTIiwic2V0VGltZW91dCIsInNwZWVjaFN5bnRoZXNpcyIsImdldFZvaWNlcyIsImZpbmQiLCJsYW5nIiwiSEVMTE8iLCJSSUdIVCIsInVzZXJOYW1lIiwibmFtZSIsInRleHQiLCJ1dHRlcmFuY2UiLCJTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UiLCJyZXBsYWNlIiwidm9pY2UiLCJ2b2x1bWUiLCJwaXRjaCIsInJhdGUiLCJjYW5jZWwiLCJzcGVhayIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJvYmoiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyJdLCJtYXBwaW5ncyI6IjttQ0FLQSxJQUNRQSxFQUNBQyxFQUNBQyxFQUNBQyxFQUVBQyxFQUxBSixFQUFPSyxRQUFRQyxJQUNmTCxFQUFRSSxRQUFR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QUFvQkcsRUFBSSxTQUFTL1AsRUFBU2dRLEdBQ3pDLElBQUksSUFBSUMsS0FBT0QsRUFDWEosRUFBb0JNLEVBQUVGLEVBQVlDLEtBQVNMLEVBQW9CTSxFQUFFbFEsRUFBU2lRLElBQzVFeE0sT0FBT0MsZUFBZTFELEVBQVNpUSxFQUFLLENBQUVyRCxZQUFZLEVBQU1DLElBQUttRCxFQUFXQyxNQ0ozRUwsRUFBb0JNLEVBQUksU0FBU0MsRUFBS2xKLEdBQVEsT0FBT3hELE9BQU8yTSxVQUFVQyxlQUFleFEsS0FBS3NRLEVBQUtsSixJQ0MvRjJJLEVBQW9CVSxFQUFJLFNBQVN0USxHQUNYLG9CQUFYdVEsUUFBMEJBLE9BQU9DLGFBQzFDL00sT0FBT0MsZUFBZTFELEVBQVN1USxPQUFPQyxZQUFhLENBQUU3TSxNQUFPLFdBRTdERixPQUFPQyxlQUFlMUQsRUFBUyxhQUFjLENBQUUyRCxPQUFPLEtDRnZEaU0sRUFBb0IsSyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFN1YnNjcmliZSB0byB0aGUgY29uc29sZSBvdXRwdXQgXG4gKlxuICogQGF1dGhvciBTYW1zb24gUmFkdVxuICovIFxuKGZ1bmN0aW9uKCl7XG4gICAgdmFyIF9sb2cgPSBjb25zb2xlLmxvZztcbiAgICB2YXIgX3dhcm4gPSBjb25zb2xlLndhcm47XG4gICAgdmFyIF9lcnJvciA9IGNvbnNvbGUuZXJyb3I7XG4gICAgdmFyIF9kZWJ1ZyA9IGNvbnNvbGUuZGVidWc7XG5cbiAgICB2YXIgQ29uc29sZVN1YnNjcmliZXIgPSB7XG4gICAgICAgIHVuYmluZDogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nID0gX2xvZztcbiAgICAgICAgICAgIGNvbnNvbGUud2FybiA9IF93YXJuO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvciA9IF9lcnJvcjtcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcgPSBfZGVidWc7XG4gICAgICAgIH0sIFxuICAgICAgICBiaW5kOiBmdW5jdGlvbihjYiwgcHJldmVudExvZ2dpbmcpe1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYiAhPT0gJ2Z1bmN0aW9uJyl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIllvdSBtdXN0IHBhc3MgYSB2YWxpZCBjYWxsYmFjayBmdW5jdGlvbi5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwcmV2ZW50TG9nZ2luZyA9IEJvb2xlYW4ocHJldmVudExvZ2dpbmcpOyAvL2ZvcmNlIGJvb2xcblxuICAgICAgICAgICAgY29uc3QgQ0FURUdPUllfSU5GTyA9IFwiaW5mb1wiO1xuICAgICAgICAgICAgY29uc3QgQ0FURUdPUllfV0FSTiA9IFwid2FyblwiO1xuICAgICAgICAgICAgY29uc3QgQ0FURUdPUllfRVJST1IgPSBcImVycm9yXCI7XG4gICAgICAgICAgICBjb25zdCBDQVRFR09SWV9ERUJVRyA9IFwiZGVidWdcIjtcblxuICAgICAgICAgICAgY29uc29sZS5sb2cgPSBjb25zb2xlLmluZm8gPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGlmIChfbG9nKXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmV2ZW50TG9nZ2luZyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfbG9nLmNhbGwoY29uc29sZSwgLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYihDQVRFR09SWV9JTkZPLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnNvbGUud2FybiA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgaWYgKF93YXJuKXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmV2ZW50TG9nZ2luZyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfd2Fybi5jYWxsKGNvbnNvbGUsIC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2IoQ0FURUdPUllfV0FSTiwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpZiAoX2Vycm9yKXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmV2ZW50TG9nZ2luZyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZXJyb3IuY2FsbChjb25zb2xlLCAuLi5hcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNiKENBVEVHT1JZX0VSUk9SLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGlmIChfZGVidWcpe1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXByZXZlbnRMb2dnaW5nKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kZWJ1Zy5jYWxsKGNvbnNvbGUsIC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2IoQ0FURUdPUllfREVCVUcsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy9leHBvcnRcbiAgICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzICE9PSAndW5kZWZpbmVkJyl7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gQ29uc29sZVN1YnNjcmliZXI7XG4gICAgfVxuICAgIGVsc2UgaWYgKHdpbmRvdyAmJiB0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0Jyl7XG4gICAgICAgIHdpbmRvdy5Db25zb2xlU3Vic2NyaWJlciA9IENvbnNvbGVTdWJzY3JpYmVyO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBleHBvcnQgbW9kdWxlLlwiKTtcbiAgICB9XG59KSgpO1xuIiwiLyoqXG4gKiBNZWRpYVN0cmVhbSBJbWFnZUNhcHR1cmUgcG9seWZpbGxcbiAqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmV4cG9ydCBsZXQgSW1hZ2VDYXB0dXJlID0gd2luZG93LkltYWdlQ2FwdHVyZTtcblxuaWYgKHR5cGVvZiBJbWFnZUNhcHR1cmUgPT09ICd1bmRlZmluZWQnKSB7XG4gIEltYWdlQ2FwdHVyZSA9IGNsYXNzIHtcblxuICAgIC8qKlxuICAgICAqIFRPRE8gaHR0cHM6Ly93d3cudzMub3JnL1RSL2ltYWdlLWNhcHR1cmUvI2NvbnN0cnVjdG9yc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtNZWRpYVN0cmVhbVRyYWNrfSB2aWRlb1N0cmVhbVRyYWNrIC0gQSBNZWRpYVN0cmVhbVRyYWNrIG9mIHRoZSAndmlkZW8nIGtpbmRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih2aWRlb1N0cmVhbVRyYWNrKSB7XG4gICAgICBpZiAodmlkZW9TdHJlYW1UcmFjay5raW5kICE9PSAndmlkZW8nKVxuICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCdOb3RTdXBwb3J0ZWRFcnJvcicpO1xuXG4gICAgICB0aGlzLl92aWRlb1N0cmVhbVRyYWNrID0gdmlkZW9TdHJlYW1UcmFjaztcbiAgICAgIGlmICghKCdyZWFkeVN0YXRlJyBpbiB0aGlzLl92aWRlb1N0cmVhbVRyYWNrKSkge1xuICAgICAgICAvLyBQb2x5ZmlsbCBmb3IgRmlyZWZveFxuICAgICAgICB0aGlzLl92aWRlb1N0cmVhbVRyYWNrLnJlYWR5U3RhdGUgPSAnbGl2ZSc7XG4gICAgICB9XG5cbiAgICAgIC8vIE1lZGlhU3RyZWFtIGNvbnN0cnVjdG9yIG5vdCBhdmFpbGFibGUgdW50aWwgQ2hyb21lIDU1IC0gaHR0cHM6Ly93d3cuY2hyb21lc3RhdHVzLmNvbS9mZWF0dXJlLzU5MTIxNzI1NDY3NTI1MTJcbiAgICAgIHRoaXMuX3ByZXZpZXdTdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0oW3ZpZGVvU3RyZWFtVHJhY2tdKTtcbiAgICAgIHRoaXMudmlkZW9FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICAgIHRoaXMudmlkZW9FbGVtZW50UGxheWluZyA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwbGF5aW5nJywgcmVzb2x2ZSk7XG4gICAgICB9KTtcbiAgICAgIGlmIChIVE1MTWVkaWFFbGVtZW50KSB7XG4gICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnNyY09iamVjdCA9IHRoaXMuX3ByZXZpZXdTdHJlYW07ICAvLyBTYWZhcmkgMTEgZG9lc24ndCBhbGxvdyB1c2Ugb2YgY3JlYXRlT2JqZWN0VVJMIGZvciBNZWRpYVN0cmVhbVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTCh0aGlzLl9wcmV2aWV3U3RyZWFtKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudmlkZW9FbGVtZW50Lm11dGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMudmlkZW9FbGVtZW50LnNldEF0dHJpYnV0ZSgncGxheXNpbmxpbmUnLCAnJyk7IC8vIFJlcXVpcmVkIGJ5IFNhZmFyaSBvbiBpT1MgMTEuIFNlZSBodHRwczovL3dlYmtpdC5vcmcvYmxvZy82Nzg0XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudC5wbGF5KCk7XG5cbiAgICAgIHRoaXMuY2FudmFzRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgLy8gVE9ETyBGaXJlZm94IGhhcyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvT2Zmc2NyZWVuQ2FudmFzXG4gICAgICB0aGlzLmNhbnZhczJkQ29udGV4dCA9IHRoaXMuY2FudmFzRWxlbWVudC5nZXRDb250ZXh0KCcyZCcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9tZWRpYWNhcHR1cmUtaW1hZ2UvaW5kZXguaHRtbCNkb20taW1hZ2VjYXB0dXJlLXZpZGVvc3RyZWFtdHJhY2tcbiAgICAgKiBAcmV0dXJuIHtNZWRpYVN0cmVhbVRyYWNrfSBUaGUgTWVkaWFTdHJlYW1UcmFjayBwYXNzZWQgaW50byB0aGUgY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBnZXQgdmlkZW9TdHJlYW1UcmFjaygpIHtcbiAgICAgIHJldHVybiB0aGlzLl92aWRlb1N0cmVhbVRyYWNrO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEltcGxlbWVudHMgaHR0cHM6Ly93d3cudzMub3JnL1RSL2ltYWdlLWNhcHR1cmUvI2RvbS1pbWFnZWNhcHR1cmUtZ2V0cGhvdG9jYXBhYmlsaXRpZXNcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFBob3RvQ2FwYWJpbGl0aWVzPn0gRnVsZmlsbGVkIHByb21pc2Ugd2l0aFxuICAgICAqIFtQaG90b0NhcGFiaWxpdGllc10oaHR0cHM6Ly93d3cudzMub3JnL1RSL2ltYWdlLWNhcHR1cmUvI2lkbC1kZWYtcGhvdG9jYXBhYmlsaXRpZXMpXG4gICAgICogb2JqZWN0IG9uIHN1Y2Nlc3MsIHJlamVjdGVkIHByb21pc2Ugb24gZmFpbHVyZVxuICAgICAqL1xuICAgIGdldFBob3RvQ2FwYWJpbGl0aWVzKCkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGV4ZWN1dG9yR1BDKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAvLyBUT0RPIHNlZSBodHRwczovL2dpdGh1Yi5jb20vdzNjL21lZGlhY2FwdHVyZS1pbWFnZS9pc3N1ZXMvOTdcbiAgICAgICAgY29uc3QgTWVkaWFTZXR0aW5nc1JhbmdlID0ge1xuICAgICAgICAgIGN1cnJlbnQ6IDAsIG1pbjogMCwgbWF4OiAwLFxuICAgICAgICB9O1xuICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICBleHBvc3VyZUNvbXBlbnNhdGlvbjogTWVkaWFTZXR0aW5nc1JhbmdlLFxuICAgICAgICAgIGV4cG9zdXJlTW9kZTogJ25vbmUnLFxuICAgICAgICAgIGZpbGxMaWdodE1vZGU6ICdub25lJyxcbiAgICAgICAgICBmb2N1c01vZGU6ICdub25lJyxcbiAgICAgICAgICBpbWFnZUhlaWdodDogTWVkaWFTZXR0aW5nc1JhbmdlLFxuICAgICAgICAgIGltYWdlV2lkdGg6IE1lZGlhU2V0dGluZ3NSYW5nZSxcbiAgICAgICAgICBpc286IE1lZGlhU2V0dGluZ3NSYW5nZSxcbiAgICAgICAgICByZWRFeWVSZWR1Y3Rpb246IGZhbHNlLFxuICAgICAgICAgIHdoaXRlQmFsYW5jZU1vZGU6ICdub25lJyxcbiAgICAgICAgICB6b29tOiBNZWRpYVNldHRpbmdzUmFuZ2UsXG4gICAgICAgIH0pO1xuICAgICAgICByZWplY3QobmV3IERPTUV4Y2VwdGlvbignT3BlcmF0aW9uRXJyb3InKSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9pbWFnZS1jYXB0dXJlLyNkb20taW1hZ2VjYXB0dXJlLXNldG9wdGlvbnNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGhvdG9TZXR0aW5ncyAtIFBob3RvIHNldHRpbmdzIGRpY3Rpb25hcnksIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9pbWFnZS1jYXB0dXJlLyNpZGwtZGVmLXBob3Rvc2V0dGluZ3NcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPHZvaWQ+fSBGdWxmaWxsZWQgcHJvbWlzZSBvbiBzdWNjZXNzLCByZWplY3RlZCBwcm9taXNlIG9uIGZhaWx1cmVcbiAgICAgKi9cbiAgICBzZXRPcHRpb25zKHBob3RvU2V0dGluZ3MgPSB7fSkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGV4ZWN1dG9yU08ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIC8vIFRPRE9cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRPRE9cbiAgICAgKiBJbXBsZW1lbnRzIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9pbWFnZS1jYXB0dXJlLyNkb20taW1hZ2VjYXB0dXJlLXRha2VwaG90b1xuICAgICAqIEByZXR1cm4ge1Byb21pc2U8QmxvYj59IEZ1bGZpbGxlZCBwcm9taXNlIHdpdGggW0Jsb2JdKGh0dHBzOi8vd3d3LnczLm9yZy9UUi9GaWxlQVBJLyNibG9iKVxuICAgICAqIGFyZ3VtZW50IG9uIHN1Y2Nlc3M7IHJlamVjdGVkIHByb21pc2Ugb24gZmFpbHVyZVxuICAgICAqL1xuICAgIHRha2VQaG90bygpIHtcbiAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGV4ZWN1dG9yVFAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIC8vIGBJZiB0aGUgcmVhZHlTdGF0ZSBvZiB0aGUgTWVkaWFTdHJlYW1UcmFjayBwcm92aWRlZCBpbiB0aGUgY29uc3RydWN0b3IgaXMgbm90IGxpdmUsXG4gICAgICAgIC8vIHJldHVybiBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCBhIG5ldyBET01FeGNlcHRpb24gd2hvc2UgbmFtZSBpcyBcIkludmFsaWRTdGF0ZUVycm9yXCIuYFxuICAgICAgICBpZiAoc2VsZi5fdmlkZW9TdHJlYW1UcmFjay5yZWFkeVN0YXRlICE9PSAnbGl2ZScpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBET01FeGNlcHRpb24oJ0ludmFsaWRTdGF0ZUVycm9yJykpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYudmlkZW9FbGVtZW50UGxheWluZy50aGVuKCgpID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2VsZi5jYW52YXNFbGVtZW50LndpZHRoID0gc2VsZi52aWRlb0VsZW1lbnQudmlkZW9XaWR0aDtcbiAgICAgICAgICAgIHNlbGYuY2FudmFzRWxlbWVudC5oZWlnaHQgPSBzZWxmLnZpZGVvRWxlbWVudC52aWRlb0hlaWdodDtcbiAgICAgICAgICAgIHNlbGYuY2FudmFzMmRDb250ZXh0LmRyYXdJbWFnZShzZWxmLnZpZGVvRWxlbWVudCwgMCwgMCk7XG4gICAgICAgICAgICBzZWxmLmNhbnZhc0VsZW1lbnQudG9CbG9iKHJlc29sdmUpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZWplY3QobmV3IERPTUV4Y2VwdGlvbignVW5rbm93bkVycm9yJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9pbWFnZS1jYXB0dXJlLyNkb20taW1hZ2VjYXB0dXJlLWdyYWJmcmFtZVxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8SW1hZ2VCaXRtYXA+fSBGdWxmaWxsZWQgcHJvbWlzZSB3aXRoXG4gICAgICogW0ltYWdlQml0bWFwXShodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUxL3dlYmFwcGFwaXMuaHRtbCN3ZWJhcHBhcGlzLWltYWdlcylcbiAgICAgKiBhcmd1bWVudCBvbiBzdWNjZXNzOyByZWplY3RlZCBwcm9taXNlIG9uIGZhaWx1cmVcbiAgICAgKi9cbiAgICBncmFiRnJhbWUoKSB7XG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBleGVjdXRvckdGKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAvLyBgSWYgdGhlIHJlYWR5U3RhdGUgb2YgdGhlIE1lZGlhU3RyZWFtVHJhY2sgcHJvdmlkZWQgaW4gdGhlIGNvbnN0cnVjdG9yIGlzIG5vdCBsaXZlLFxuICAgICAgICAvLyByZXR1cm4gYSBwcm9taXNlIHJlamVjdGVkIHdpdGggYSBuZXcgRE9NRXhjZXB0aW9uIHdob3NlIG5hbWUgaXMgXCJJbnZhbGlkU3RhdGVFcnJvclwiLmBcbiAgICAgICAgaWYgKHNlbGYuX3ZpZGVvU3RyZWFtVHJhY2sucmVhZHlTdGF0ZSAhPT0gJ2xpdmUnKSB7XG4gICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgRE9NRXhjZXB0aW9uKCdJbnZhbGlkU3RhdGVFcnJvcicpKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLnZpZGVvRWxlbWVudFBsYXlpbmcudGhlbigoKSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNlbGYuY2FudmFzRWxlbWVudC53aWR0aCA9IHNlbGYudmlkZW9FbGVtZW50LnZpZGVvV2lkdGg7XG4gICAgICAgICAgICBzZWxmLmNhbnZhc0VsZW1lbnQuaGVpZ2h0ID0gc2VsZi52aWRlb0VsZW1lbnQudmlkZW9IZWlnaHQ7XG4gICAgICAgICAgICBzZWxmLmNhbnZhczJkQ29udGV4dC5kcmF3SW1hZ2Uoc2VsZi52aWRlb0VsZW1lbnQsIDAsIDApO1xuICAgICAgICAgICAgLy8gVE9ETyBwb2x5ZmlsbCBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSW1hZ2VCaXRtYXBGYWN0b3JpZXMvY3JlYXRlSW1hZ2VCaXRtYXAgZm9yIElFXG4gICAgICAgICAgICByZXNvbHZlKHdpbmRvdy5jcmVhdGVJbWFnZUJpdG1hcChzZWxmLmNhbnZhc0VsZW1lbnQpKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBET01FeGNlcHRpb24oJ1Vua25vd25FcnJvcicpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuXG53aW5kb3cuSW1hZ2VDYXB0dXJlID0gSW1hZ2VDYXB0dXJlO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmVuYWJsZU1vYmlsZUNvbnNvbGUgPSB2b2lkIDA7XG5jb25zdCBjb25zb2xlX3N1YnNjcmliZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiY29uc29sZS1zdWJzY3JpYmVyXCIpKTtcbmNvbnN0IGVuYWJsZU1vYmlsZUNvbnNvbGUgPSAoKSA9PiB7XG4gICAgY29uc3QgYnVmZmVyID0gW107XG4gICAgY29uc29sZV9zdWJzY3JpYmVyXzEuZGVmYXVsdC5iaW5kKChjYXRlZ29yeSwgYXJncykgPT4ge1xuICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gNSkge1xuICAgICAgICAgICAgYnVmZmVyLnNoaWZ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgYnVmZmVyLnB1c2goeyBjYXRlZ29yeSwgbWVzc2FnZTogYXJnc1swXSB9KTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnNvbGUnKS5pbm5lckhUTUwgPSBidWZmZXIubWFwKChtKSA9PiBgPHA+JHttLm1lc3NhZ2V9PC9wPmApLmpvaW4oJycpO1xuICAgIH0pO1xufTtcbmV4cG9ydHMuZW5hYmxlTW9iaWxlQ29uc29sZSA9IGVuYWJsZU1vYmlsZUNvbnNvbGU7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBjb25zb2xlXzEgPSByZXF1aXJlKFwiLi9jb25zb2xlXCIpO1xuY29uc3QgSGVhZENvbnRyb2xTZXJ2aWNlXzEgPSByZXF1aXJlKFwiLi9zZXJ2aWNlcy9IZWFkQ29udHJvbFNlcnZpY2VcIik7XG5jb25zdCBpbWFnZUNhcHR1cmVfMSA9IHJlcXVpcmUoXCIuL3NlcnZpY2VzL0ltYWdlQ2FwdHVyZVNlcnZpY2UvaW1hZ2VDYXB0dXJlXCIpO1xuY29uc3Qgdm9pY2VfMSA9IHJlcXVpcmUoXCIuL3NlcnZpY2VzL1ZvaWNlU2VydmljZS92b2ljZVwiKTtcbnJlcXVpcmUoXCIuL2RlY2xhcmVcIik7XG5yZXF1aXJlKFwiLi9zdHlsZS9pbmRleC5zY3NzXCIpO1xuY29uc3Qgc3RhcnRCdXR0b24gPSAkKCcjc3RhcnRCdXR0b24nKTtcbmNvbnN0IHByZWxvYWRlciA9ICQoJyNwcmVsb2FkZXInKTtcbmNvbnN0IHN0YXJ0U2NyZWVuID0gJCgnI3N0YXJ0Jyk7XG5jb25zdCBnYW1lU2NyZWVuID0gJCgnI2dhbWUnKTtcbmNvbnN0IG5hbWVJbnB1dCA9ICQoJyNuYW1lSW5wdXQnKTtcbmNvbnN0IGluaXRBbGxBUEkgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW2ltYWdlQ2FwdHVyZV8xLmluaXRJbWFnZUNhcHR1cmUoKSwgdm9pY2VfMS5pbml0Vm9pY2VTZXJ2aWNlKCksIEhlYWRDb250cm9sU2VydmljZV8xLmluaXRIZWFkQ29udHJvbCgpXSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBwcmVsb2FkZXIuaGlkZSgpO1xuICAgICAgICBzdGFydFNjcmVlbi5zaG93KCk7XG4gICAgfSlcbiAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIH0pO1xufSk7XG5jb25zdCBpbml0QXBwID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgcHJlbG9hZGVyLnNob3coKTtcbiAgICBnYW1lU2NyZWVuLmhpZGUoKTtcbiAgICBzdGFydFNjcmVlbi5oaWRlKCk7XG4gICAgeWllbGQgaW5pdEFsbEFQSSgpO1xuICAgIG5hbWVJbnB1dC5vbignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIGlmIChuYW1lSW5wdXQudmFsKCkpIHtcbiAgICAgICAgICAgIHN0YXJ0QnV0dG9uLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RhcnRCdXR0b24ucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHN0YXJ0QnV0dG9uLmNsaWNrKCgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICB5aWVsZCBzdGFydEdhbWUobmFtZUlucHV0LnZhbCgpKTtcbiAgICB9KSk7XG59KTtcbmNvbnN0IHN0YXJ0R2FtZSA9IChwbGF5ZXJOYW1lKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICB0cnkge1xuICAgICAgICB5aWVsZCBpbWFnZUNhcHR1cmVfMS50YWtlUGhvdG8oKTtcbiAgICAgICAgZ2FtZVNjcmVlbi5zaG93KCk7XG4gICAgICAgIHN0YXJ0U2NyZWVuLmhpZGUoKTtcbiAgICAgICAgdm9pY2VfMS5zZXRVcFVzZXIocGxheWVyTmFtZSk7XG4gICAgICAgIC8vIHNheVNvbWV0aGluZyhQSFJBU0VTLkhFTExPKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgYWxlcnQoZSk7XG4gICAgfVxufSk7XG53aW5kb3cub25sb2FkID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc29sZV8xLmVuYWJsZU1vYmlsZUNvbnNvbGUoKTtcbiAgICB5aWVsZCBpbml0QXBwKCk7XG59KTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgZGVmYXVsdFNldHRpbmdzID0ge1xuICAgIG1vdXNlT3BlbmluZ1RyZXNob2xkOiAwLjYsXG4gICAgbW91c2VDbG9zaW5nVHJlc2hvbGQ6IDAuNSxcbiAgICBoZWFkTW92ZW1lbnRTdGFydGVkVHJlc2hvbGQ6IDAuMTUsXG4gICAgaGVhZE1vdmVtZW50U3RvcHBlZFRyZXNob2xkOiAwLjA4LFxufTtcbmNsYXNzIEhlYWRDb250cm9sU2VydmljZSBleHRlbmRzIEV2ZW50VGFyZ2V0IHtcbiAgICBjb25zdHJ1Y3RvcihjYW52YXNJZCwgc2V0dGluZ3MpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5tb3ZlbWVudExvY2tzID0ge1xuICAgICAgICAgICAgdmVydGljYWw6IGZhbHNlLFxuICAgICAgICAgICAgaG9yaXpvbnRhbDogZmFsc2UsXG4gICAgICAgICAgICBtb3VzZU9wZW5lZDogZmFsc2UsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBpc0xvYWRlZDogZmFsc2UsXG4gICAgICAgICAgICBpc0RldGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGlzRW5hYmxlZDogZmFsc2UsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2wgPSBudWxsO1xuICAgICAgICB0aGlzLmN2ID0gbnVsbDtcbiAgICAgICAgdGhpcy52aWRlb1RleHR1cmUgPSBudWxsO1xuICAgICAgICB0aGlzLnZpZGVvVHJhbnNmb3JtTWF0MiA9IG51bGw7XG4gICAgICAgIHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0gPSBudWxsO1xuICAgICAgICB0aGlzLmhlYWRTZWFyY2hVbmlmb3JtWHlzID0gbnVsbDtcbiAgICAgICAgdGhpcy5oZWFkU2VhcmNoVW5pZm9ybVZpZGVvVHJhbnNmb3JtTWF0MiA9IG51bGw7XG4gICAgICAgIHRoaXMuaGFuZGxlTW91c2VPcGVuaW5nID0gKGRldGVjdFN0YXRlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZGV0ZWN0U3RhdGUucnkgPCAtMSAqIHRoaXMuc2V0dGluZ3MuaGVhZE1vdmVtZW50U3RhcnRlZFRyZXNob2xkIHx8IGRldGVjdFN0YXRlLnJ5ID4gdGhpcy5zZXR0aW5ncy5oZWFkTW92ZW1lbnRTdGFydGVkVHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICAvLyBIZWFkIHNob3VsZCBiZSBpbiB0aGUgY2VudGVyIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG1vdXRoT3BlbmluZyA9IChkZXRlY3RTdGF0ZS5leHByZXNzaW9uc1swXSAtIDAuMikgKiA1LjA7XG4gICAgICAgICAgICBtb3V0aE9wZW5pbmcgPSBNYXRoLm1pbihNYXRoLm1heChtb3V0aE9wZW5pbmcsIDApLCAxKTtcbiAgICAgICAgICAgIGlmIChtb3V0aE9wZW5pbmcgPiB0aGlzLnNldHRpbmdzLm1vdXNlT3BlbmluZ1RyZXNob2xkICYmICF0aGlzLm1vdmVtZW50TG9ja3MubW91c2VPcGVuZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVtZW50TG9ja3MubW91c2VPcGVuZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ21vdXNlIG9wZW5lZCcpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW91dGhPcGVuaW5nIDwgdGhpcy5zZXR0aW5ncy5tb3VzZUNsb3NpbmdUcmVzaG9sZCAmJiB0aGlzLm1vdmVtZW50TG9ja3MubW91c2VPcGVuZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVtZW50TG9ja3MubW91c2VPcGVuZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdtb3VzZSBjbG9zZWQnKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZU1vdmUgPSAobXYpID0+IHtcbiAgICAgICAgICAgIGlmIChtdi5yeCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQXhpc01vdmVtZW50KHsgYXhpczogJ3ZlcnRpY2FsJywgYXhpc1Bvc2l0aW9uOiBtdi5yeCwgbWF4VmFsdWU6ICdkb3duJywgbWluVmFsdWU6ICd1cCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobXYucnkgIT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUF4aXNNb3ZlbWVudCh7IGF4aXM6ICdob3Jpem9udGFsJywgYXhpc1Bvc2l0aW9uOiBtdi5yeSwgbWF4VmFsdWU6ICdsZWZ0JywgbWluVmFsdWU6ICdyaWdodCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlQXhpc01vdmVtZW50ID0gKHsgYXhpcywgYXhpc1Bvc2l0aW9uLCBtYXhWYWx1ZSwgbWluVmFsdWUsIH0pID0+IHtcbiAgICAgICAgICAgIGlmIChheGlzUG9zaXRpb24gPCAtMSAqIHRoaXMuc2V0dGluZ3MuaGVhZE1vdmVtZW50U3RhcnRlZFRyZXNob2xkICYmICF0aGlzLm1vdmVtZW50TG9ja3NbYXhpc10pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVtZW50TG9ja3NbYXhpc10gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQobWluVmFsdWUpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXhpc1Bvc2l0aW9uID4gdGhpcy5zZXR0aW5ncy5oZWFkTW92ZW1lbnRTdGFydGVkVHJlc2hvbGQgJiYgIXRoaXMubW92ZW1lbnRMb2Nrc1theGlzXSkge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZW1lbnRMb2Nrc1theGlzXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChtYXhWYWx1ZSkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChheGlzUG9zaXRpb24gPiAtMSAqIHRoaXMuc2V0dGluZ3MuaGVhZE1vdmVtZW50U3RvcHBlZFRyZXNob2xkICYmIGF4aXNQb3NpdGlvbiA8IHRoaXMuc2V0dGluZ3MuaGVhZE1vdmVtZW50U3RvcHBlZFRyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlbWVudExvY2tzW2F4aXNdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0U2V0dGluZ3MpLCBzZXR0aW5ncyk7XG4gICAgICAgIHdpbmRvdy5KRUVGQUNFRklMVEVSQVBJLmluaXQoe1xuICAgICAgICAgICAgY2FudmFzSWQ6IGNhbnZhc0lkLFxuICAgICAgICAgICAgTk5DUGF0aDogJy4vdmVuZG9yLycsXG4gICAgICAgICAgICBhbmltYXRlRGVsYXk6IDIwLFxuICAgICAgICAgICAgY2FsbGJhY2tSZWFkeTogKGVyckNvZGUsIGplZUZhY2VGaWx0ZXJPYmopID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyQ29kZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGVyckNvZGUgPSAnV0VCQ0FNX1VOQVZBSUxBQkxFJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLm9uQ2FtZXJhUGVyc21pc3Npb25GYWlsZWQgJiYgc2V0dGluZ3Mub25DYW1lcmFQZXJzbWlzc2lvbkZhaWxlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FOIEVSUk9SIEhBUFBFTlMuIFNPUlJZIEJSTyA6KCAuIEVSUiA9JywgZXJyQ29kZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5nbCA9IGplZUZhY2VGaWx0ZXJPYmpbJ0dMJ107XG4gICAgICAgICAgICAgICAgdGhpcy52aWRlb1RleHR1cmUgPSBqZWVGYWNlRmlsdGVyT2JqWyd2aWRlb1RleHR1cmUnXTtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZGVvVHJhbnNmb3JtTWF0MiA9IGplZUZhY2VGaWx0ZXJPYmpbJ3ZpZGVvVHJhbnNmb3JtTWF0MiddO1xuICAgICAgICAgICAgICAgIHRoaXMuY3YgPSBqZWVGYWNlRmlsdGVyT2JqWydjYW52YXNFbGVtZW50J107XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0SGVhZFNlYXJjaERyYXcoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5vblJlYWR5ICYmIHNldHRpbmdzLm9uUmVhZHkoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBjYWxsZWQgYXQgZWFjaCByZW5kZXIgaXRlcmF0aW9uIChkcmF3aW5nIGxvb3ApOlxuICAgICAgICAgICAgY2FsbGJhY2tUcmFjazogKGRldGVjdFN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmlzRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0hlYWRTZWFyY2goZGV0ZWN0U3RhdGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTW92ZShkZXRlY3RTdGF0ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVNb3VzZU9wZW5pbmcoZGV0ZWN0U3RhdGUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRvZ2dsZShpc0VuYWJsZWQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNFbmFibGVkID09PSBpc0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUuaXNFbmFibGVkID0gaXNFbmFibGVkO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29tcGlsZVNoYWRlcihzb3VyY2UsIGdsVHlwZSwgdHlwZVN0cmluZykge1xuICAgICAgICBjb25zdCBnbFNoYWRlciA9IHRoaXMuZ2wuY3JlYXRlU2hhZGVyKGdsVHlwZSk7XG4gICAgICAgIHRoaXMuZ2wuc2hhZGVyU291cmNlKGdsU2hhZGVyLCBzb3VyY2UpO1xuICAgICAgICB0aGlzLmdsLmNvbXBpbGVTaGFkZXIoZ2xTaGFkZXIpO1xuICAgICAgICBpZiAoIXRoaXMuZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKGdsU2hhZGVyLCB0aGlzLmdsLkNPTVBJTEVfU1RBVFVTKSkge1xuICAgICAgICAgICAgYWxlcnQoJ0VSUk9SIElOICcgKyB0eXBlU3RyaW5nICsgJyBTSEFERVI6ICcgKyB0aGlzLmdsLmdldFNoYWRlckluZm9Mb2coZ2xTaGFkZXIpKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnbFNoYWRlcjtcbiAgICB9XG4gICAgaW5pdEhlYWRTZWFyY2hEcmF3KCkge1xuICAgICAgICAvLyBidWlsZCB0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtOlxuICAgICAgICBjb25zdCBzaGFkZXJWZXJ0ZXhTb3VyY2UgPSAnXFxuXFxcbiAgICAgIGF0dHJpYnV0ZSB2ZWMyIGFhdF9wb3NpdGlvbjtcXG5cXFxuICAgICAgdmFyeWluZyB2ZWMyIHZVVjtcXG5cXFxuICAgICAgXFxuXFxcbiAgICAgIHZvaWQgbWFpbih2b2lkKSB7XFxuXFxcbiAgICAgICAgZ2xfUG9zaXRpb24gPSB2ZWM0KGFhdF9wb3NpdGlvbiwgMC4sIDEuKTtcXG5cXFxuICAgICAgICB2VVYgPSAwLjUgKyAwLjUgKiBhYXRfcG9zaXRpb247XFxuXFxcbiAgICAgICAgdlVWLnggPSAxLi12VVYueDsgLy8gbWlycm9yIGRpcGxheVxcblxcXG4gICAgICB9JztcbiAgICAgICAgY29uc3Qgc2hhZGVyRnJhZ21lbnRTb3VyY2UgPSAnXFxuXFxcbiAgICAgIHByZWNpc2lvbiBsb3dwIGZsb2F0O1xcblxcXG4gICAgICB2YXJ5aW5nIHZlYzIgdlVWO1xcblxcXG4gICAgICBcXG5cXFxuICAgICAgdW5pZm9ybSBzYW1wbGVyMkQgc2FtcGxlclZpZGVvO1xcblxcXG4gICAgICB1bmlmb3JtIG1hdDIgdmlkZW9UcmFuc2Zvcm1NYXQyO1xcblxcXG4gICAgICB1bmlmb3JtIHZlYzMgdXh5cztcXG5cXFxuICAgICAgXFxuXFxcbiAgICAgIHZvaWQgbWFpbih2b2lkKSB7XFxuXFxcbiAgICAgICAgdmVjMiB1dlZpZGVvQ2VudGVyZWQgPSAyLjAgKiB2aWRlb1RyYW5zZm9ybU1hdDIgKiAodlVWIC0gMC41KTtcXG5cXFxuICAgICAgICB2ZWMyIHV2VmlkZW8gPSB1dlZpZGVvQ2VudGVyZWQgKyAwLjU7XFxuXFxcbiAgICAgICAgdmVjMyBjb2xvclZpZGVvID0gdGV4dHVyZTJEKHNhbXBsZXJWaWRlbywgdXZWaWRlbykucmdiO1xcblxcXG4gICAgICAgIHZlYzIgcG9zID0gdlVWKjIuLXZlYzIoMS4sMS4pO1xcblxcXG4gICAgICAgIHZlYzIgaXNJbnNpZGUgPSBzdGVwKHV4eXMueHktdXh5cy56KnZlYzIoMS4sMS4pLCBwb3MpO1xcblxcXG4gICAgICAgIGlzSW5zaWRlICo9IHN0ZXAocG9zLCB1eHlzLnh5K3V4eXMueip2ZWMyKDEuLDEuKSk7XFxuXFxcbiAgICAgICAgdmVjMiBibGVuZENlbnRlckZhY3RvciA9IGFicyhwb3MtdXh5cy54eSkgLyB1eHlzLno7XFxuXFxcbiAgICAgICAgZmxvYXQgYWxwaGEgPSBpc0luc2lkZS54ICogaXNJbnNpZGUueSAqIHBvdyhtYXgoYmxlbmRDZW50ZXJGYWN0b3IueCwgYmxlbmRDZW50ZXJGYWN0b3IueSksIDMuKTtcXG5cXFxuICAgICAgICB2ZWMzIGNvbG9yID0gbWl4KGNvbG9yVmlkZW8sIHZlYzMoMC4sMC42LDEuKSwgYWxwaGEpO1xcblxcXG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoY29sb3IsMS4pO1xcblxcXG4gICAgICB9JztcbiAgICAgICAgY29uc3QgZ2xTaGFkZXJWZXJ0ZXggPSB0aGlzLmNvbXBpbGVTaGFkZXIoc2hhZGVyVmVydGV4U291cmNlLCB0aGlzLmdsLlZFUlRFWF9TSEFERVIsICdWRVJURVgnKTtcbiAgICAgICAgY29uc3QgZ2xTaGFkZXJGcmFnbWVudCA9IHRoaXMuY29tcGlsZVNoYWRlcihzaGFkZXJGcmFnbWVudFNvdXJjZSwgdGhpcy5nbC5GUkFHTUVOVF9TSEFERVIsICdGUkFHTUVOVCcpO1xuICAgICAgICB0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtID0gdGhpcy5nbC5jcmVhdGVQcm9ncmFtKCk7XG4gICAgICAgIHRoaXMuZ2wuYXR0YWNoU2hhZGVyKHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0sIGdsU2hhZGVyVmVydGV4KTtcbiAgICAgICAgdGhpcy5nbC5hdHRhY2hTaGFkZXIodGhpcy5nbEhlYWRTZWFyY2hEcmF3U2hhZGVyUHJvZ3JhbSwgZ2xTaGFkZXJGcmFnbWVudCk7XG4gICAgICAgIHRoaXMuZ2wubGlua1Byb2dyYW0odGhpcy5nbEhlYWRTZWFyY2hEcmF3U2hhZGVyUHJvZ3JhbSk7XG4gICAgICAgIGNvbnN0IHNhbXBsZXJWaWRlbyA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0sICdzYW1wbGVyVmlkZW8nKTtcbiAgICAgICAgdGhpcy5oZWFkU2VhcmNoVW5pZm9ybVh5cyA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0sICd1eHlzJyk7XG4gICAgICAgIHRoaXMuaGVhZFNlYXJjaFVuaWZvcm1WaWRlb1RyYW5zZm9ybU1hdDIgPSB0aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtLCAndmlkZW9UcmFuc2Zvcm1NYXQyJyk7XG4gICAgICAgIHRoaXMuZ2wudXNlUHJvZ3JhbSh0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtKTtcbiAgICAgICAgdGhpcy5nbC51bmlmb3JtMWkoc2FtcGxlclZpZGVvLCAwKTtcbiAgICB9XG4gICAgZHJhd0hlYWRTZWFyY2goZGV0ZWN0U3RhdGUpIHtcbiAgICAgICAgLy8gdW5iaW5kIHRoZSBjdXJyZW50IEZCTyBhbmQgc2V0IHRoZSB2aWV3cG9ydCBhcyB0aGUgd2hvbGUgY2FudmFzOlxuICAgICAgICB0aGlzLmdsLnZpZXdwb3J0KDAsIDAsIHRoaXMuY3Yud2lkdGgsIHRoaXMuY3YuaGVpZ2h0KTtcbiAgICAgICAgLy8gdXNlIHRoZSBoZWFkIGRyYXcgc2hhZGVyIHByb2dyYW0gYW5kIHN5bmMgdW5pZm9ybXM6XG4gICAgICAgIHRoaXMuZ2wudXNlUHJvZ3JhbSh0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtKTtcbiAgICAgICAgdGhpcy5nbC5hY3RpdmVUZXh0dXJlKHRoaXMuZ2wuVEVYVFVSRTApO1xuICAgICAgICB0aGlzLmdsLmJpbmRUZXh0dXJlKHRoaXMuZ2wuVEVYVFVSRV8yRCwgdGhpcy52aWRlb1RleHR1cmUpO1xuICAgICAgICB0aGlzLmdsLnVuaWZvcm0zZih0aGlzLmhlYWRTZWFyY2hVbmlmb3JtWHlzLCBkZXRlY3RTdGF0ZS54LCBkZXRlY3RTdGF0ZS55LCBkZXRlY3RTdGF0ZS5zKTtcbiAgICAgICAgdGhpcy5nbC51bmlmb3JtTWF0cml4MmZ2KHRoaXMuaGVhZFNlYXJjaFVuaWZvcm1WaWRlb1RyYW5zZm9ybU1hdDIsIGZhbHNlLCB0aGlzLnZpZGVvVHJhbnNmb3JtTWF0Mik7XG4gICAgICAgIC8vIGRyYXcgdGhlIHNxdWFyZSBsb29raW5nIGZvciB0aGUgaGVhZFxuICAgICAgICAvLyB0aGUgVkJPIGZpbGxpbmcgdGhlIHdob2xlIHNjcmVlbiBpcyBzdGlsbCBib3VuZCB0byB0aGUgY29udGV4dFxuICAgICAgICAvLyBmaWxsIHRoZSB2aWV3UG9ydDpcbiAgICAgICAgdGhpcy5nbC5kcmF3RWxlbWVudHModGhpcy5nbC5UUklBTkdMRVMsIDMsIHRoaXMuZ2wuVU5TSUdORURfU0hPUlQsIDApO1xuICAgIH1cbn1cbmV4cG9ydHMuZGVmYXVsdCA9IEhlYWRDb250cm9sU2VydmljZTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5pbml0SGVhZENvbnRyb2wgPSBleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5jb25zdCBIZWFkQ29udHJvbFNlcnZpY2VfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9IZWFkQ29udHJvbFNlcnZpY2VcIikpO1xudmFyIEhlYWRDb250cm9sU2VydmljZV8yID0gcmVxdWlyZShcIi4vSGVhZENvbnRyb2xTZXJ2aWNlXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX19pbXBvcnREZWZhdWx0KEhlYWRDb250cm9sU2VydmljZV8yKS5kZWZhdWx0OyB9IH0pO1xuY29uc3QgaW5pdEhlYWRDb250cm9sID0gKCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGhlYWRDb250cm9sU2VydmljZSA9IG5ldyBIZWFkQ29udHJvbFNlcnZpY2VfMS5kZWZhdWx0KCdoZWFkLXByZXZpZXcnLCB7XG4gICAgICAgICAgICBvblJlYWR5OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2hlYWQgY29udHJvbCBpcyByZWFkeScpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkNhbWVyYVBlcnNtaXNzaW9uRmFpbGVkOiAoKSA9PiBhbGVydCgnVGhpcyBnYW1lIGlzIGhlYWQtY29udHJvbGxlZC4gWW91IG5lZWQgdG8gZW5hYmxlIGNhbWVyYSB0byBwbGF5IHRoZSBnYW1lLicpLFxuICAgICAgICB9KTtcbiAgICAgICAgaGVhZENvbnRyb2xTZXJ2aWNlLnRvZ2dsZSh0cnVlKTtcbiAgICAgICAgaGVhZENvbnRyb2xTZXJ2aWNlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlIG9wZW5lZCcsICgpID0+IGNvbnNvbGUubG9nKCdtb3VzZSBvcGVuZWQnKSk7XG4gICAgICAgIGhlYWRDb250cm9sU2VydmljZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZSBjbG9zZWQnLCAoKSA9PiBjb25zb2xlLmxvZygnbW91c2UgY2xvc2VkJykpO1xuICAgICAgICBoZWFkQ29udHJvbFNlcnZpY2UuYWRkRXZlbnRMaXN0ZW5lcignbGVmdCcsICgpID0+IGNvbnNvbGUubG9nKCdsZWZ0JykpO1xuICAgICAgICBoZWFkQ29udHJvbFNlcnZpY2UuYWRkRXZlbnRMaXN0ZW5lcigncmlnaHQnLCAoKSA9PiBjb25zb2xlLmxvZygncmlnaHQnKSk7XG4gICAgfSk7XG59O1xuZXhwb3J0cy5pbml0SGVhZENvbnRyb2wgPSBpbml0SGVhZENvbnRyb2w7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5pbml0SW1hZ2VDYXB0dXJlID0gZXhwb3J0cy50YWtlUGhvdG8gPSB2b2lkIDA7XG5yZXF1aXJlKFwiaW1hZ2UtY2FwdHVyZVwiKTtcbmxldCBpbWFnZUNhcHR1cmU7XG5sZXQgaXNJbml0ID0gZmFsc2U7XG5jb25zdCB0YWtlUGhvdG8gPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICBpZiAoIWltYWdlQ2FwdHVyZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHlpZWxkIGltYWdlQ2FwdHVyZVxuICAgICAgICAudGFrZVBob3RvKClcbiAgICAgICAgLnRoZW4oKGJsb2IpID0+IGNyZWF0ZUltYWdlQml0bWFwKGJsb2IpKVxuICAgICAgICAudGhlbigoaW1hZ2VCaXRtYXApID0+IHtcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rha2VQaG90b0NhbnZhcycpO1xuICAgICAgICBjYW52YXMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGRyYXdDYW52YXMoY2FudmFzLCBpbWFnZUJpdG1hcCk7XG4gICAgICAgIC8vY2FudmFzLnRvQmxvYihhc3luYyAoYmxvYikgPT4ge1xuICAgICAgICAvLyAgdHJ5IHtcbiAgICAgICAgLy8gICAgYXdhaXQgY3JlYXRlRmlsZShibG9iKTtcbiAgICAgICAgLy8gICAgYXdhaXQgcmVhZEZpbGUoKTtcbiAgICAgICAgLy8gIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gICAgdGhyb3cgZTtcbiAgICAgICAgLy8gIH1cbiAgICAgICAgLy99KTtcbiAgICB9KTtcbn0pO1xuZXhwb3J0cy50YWtlUGhvdG8gPSB0YWtlUGhvdG87XG5mdW5jdGlvbiBkcmF3Q2FudmFzKGNhbnZhcywgaW1nKSB7XG4gICAgY2FudmFzLndpZHRoID0gZ2V0Q29tcHV0ZWRTdHlsZShjYW52YXMpLndpZHRoLnNwbGl0KCdweCcpWzBdO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBnZXRDb21wdXRlZFN0eWxlKGNhbnZhcykuaGVpZ2h0LnNwbGl0KCdweCcpWzBdO1xuICAgIGxldCByYXRpbyA9IE1hdGgubWluKGNhbnZhcy53aWR0aCAvIGltZy53aWR0aCwgY2FudmFzLmhlaWdodCAvIGltZy5oZWlnaHQpO1xuICAgIGxldCB4ID0gKGNhbnZhcy53aWR0aCAtIGltZy53aWR0aCAqIHJhdGlvKSAvIDI7XG4gICAgbGV0IHkgPSAoY2FudmFzLmhlaWdodCAtIGltZy5oZWlnaHQgKiByYXRpbykgLyAyO1xuICAgIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpLmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpLmRyYXdJbWFnZShpbWcsIDAsIDAsIGltZy53aWR0aCwgaW1nLmhlaWdodCwgeCwgeSwgaW1nLndpZHRoICogcmF0aW8sIGltZy5oZWlnaHQgKiByYXRpbyk7XG59XG5jb25zdCBpbml0SW1hZ2VDYXB0dXJlID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgaWYgKGlzSW5pdCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGlzSW5pdCA9IHRydWU7XG4gICAgcmV0dXJuIG5hdmlnYXRvci5tZWRpYURldmljZXNcbiAgICAgICAgLmdldFVzZXJNZWRpYSh7IHZpZGVvOiB0cnVlIH0pXG4gICAgICAgIC50aGVuKChtZWRpYVN0cmVhbSkgPT4ge1xuICAgICAgICBjb25zdCB0cmFjayA9IG1lZGlhU3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF07XG4gICAgICAgIGNvbnNvbGUubG9nKEltYWdlQ2FwdHVyZSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpbWFnZUNhcHR1cmUgPSBuZXcgSW1hZ2VDYXB0dXJlKHRyYWNrKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgIGFsZXJ0KCdJbWFnZSBjYXB0dXJlIGlzIG5vdCBzdXBwb3J0ZWQgb24geW91ciBkZXZpY2UgOignKTtcbiAgICB9KTtcbn0pO1xuZXhwb3J0cy5pbml0SW1hZ2VDYXB0dXJlID0gaW5pdEltYWdlQ2FwdHVyZTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnNheVNvbWV0aGluZyA9IGV4cG9ydHMuc2V0VXBVc2VyID0gZXhwb3J0cy5QSFJBU0VTID0gZXhwb3J0cy5pbml0Vm9pY2VTZXJ2aWNlID0gdm9pZCAwO1xubGV0IFZPSUNFO1xuY29uc3QgaW5pdFZvaWNlU2VydmljZSA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIFZPSUNFID0gd2luZG93LnNwZWVjaFN5bnRoZXNpcy5nZXRWb2ljZXMoKS5maW5kKCh7IGxhbmcgfSkgPT4gbGFuZyA9PT0gJ2VuLUdCJyk7XG4gICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICB9LCA1MDApO1xuICAgIH0pO1xufSk7XG5leHBvcnRzLmluaXRWb2ljZVNlcnZpY2UgPSBpbml0Vm9pY2VTZXJ2aWNlO1xuZXhwb3J0cy5QSFJBU0VTID0ge1xuICAgIEhFTExPOiAnYEhpLCAldXNlcm5hbWUlLiBIYXZlIGEgZ29vZCBnYW1lJyxcbiAgICBSSUdIVDogJ0dvb2QgcmlnaHQgdHVybiwgJXVzZXJuYW1lJScsXG59O1xubGV0IHVzZXJOYW1lID0gJyc7XG5jb25zdCBzZXRVcFVzZXIgPSAobmFtZSkgPT4ge1xuICAgIHVzZXJOYW1lID0gbmFtZTtcbn07XG5leHBvcnRzLnNldFVwVXNlciA9IHNldFVwVXNlcjtcbmNvbnN0IHNheVNvbWV0aGluZyA9ICh0ZXh0KSA9PiB7XG4gICAgaWYgKCFWT0lDRSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHV0dGVyYW5jZSA9IG5ldyBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UodGV4dC5yZXBsYWNlKCcldXNlcm5hbWUlJywgdXNlck5hbWUpKTtcbiAgICB1dHRlcmFuY2Uudm9pY2UgPSBWT0lDRTtcbiAgICB1dHRlcmFuY2Uudm9sdW1lID0gMTtcbiAgICB1dHRlcmFuY2UucGl0Y2ggPSAxO1xuICAgIHV0dGVyYW5jZS5yYXRlID0gMTtcbiAgICBzcGVlY2hTeW50aGVzaXMuY2FuY2VsKCk7XG4gICAgc3BlZWNoU3ludGhlc2lzLnNwZWFrKHV0dGVyYW5jZSk7XG59O1xuZXhwb3J0cy5zYXlTb21ldGhpbmcgPSBzYXlTb21ldGhpbmc7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIGRlZmluaXRpb24pIHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGVcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDYwNyk7XG4iXSwic291cmNlUm9vdCI6IiJ9