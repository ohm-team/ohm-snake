/*! For license information please see main.6470bfe5dd255e1363e4.js.LICENSE.txt */
!function(){var e={608:function(e){var t,n,o,i,r;t=console.log,n=console.warn,o=console.error,i=console.debug,r={unbind:function(){console.log=t,console.warn=n,console.error=o,console.debug=i},bind:function(e,r){if("function"!=typeof e)return console.error("You must pass a valid callback function."),!1;r=Boolean(r);const a="info",s="warn",d="error",c="debug";console.log=console.info=function(){t&&(r||t.call(console,...arguments),e(a,arguments))},console.warn=function(){n&&(r||n.call(console,...arguments),e(s,arguments))},console.error=function(){o&&(r||o.call(console,...arguments),e(d,arguments))},console.debug=function(){i&&(r||i.call(console,...arguments),e(c,arguments))}}},void 0!==e.exports?e.exports=r:window&&"object"==typeof window?window.ConsoleSubscriber=r:console.error("Failed to export module.")},505:function(e,t,n){"use strict";n.r(t),n.d(t,{ImageCapture:function(){return o}});let o=window.ImageCapture;void 0===o&&(o=class{constructor(e){if("video"!==e.kind)throw new DOMException("NotSupportedError");this._videoStreamTrack=e,"readyState"in this._videoStreamTrack||(this._videoStreamTrack.readyState="live"),this._previewStream=new MediaStream([e]),this.videoElement=document.createElement("video"),this.videoElementPlaying=new Promise((e=>{this.videoElement.addEventListener("playing",e)})),HTMLMediaElement?this.videoElement.srcObject=this._previewStream:this.videoElement.src=URL.createObjectURL(this._previewStream),this.videoElement.muted=!0,this.videoElement.setAttribute("playsinline",""),this.videoElement.play(),this.canvasElement=document.createElement("canvas"),this.canvas2dContext=this.canvasElement.getContext("2d")}get videoStreamTrack(){return this._videoStreamTrack}getPhotoCapabilities(){return new Promise((function(e,t){const n={current:0,min:0,max:0};e({exposureCompensation:n,exposureMode:"none",fillLightMode:"none",focusMode:"none",imageHeight:n,imageWidth:n,iso:n,redEyeReduction:!1,whiteBalanceMode:"none",zoom:n}),t(new DOMException("OperationError"))}))}setOptions(e={}){return new Promise((function(e,t){}))}takePhoto(){const e=this;return new Promise((function(t,n){if("live"!==e._videoStreamTrack.readyState)return n(new DOMException("InvalidStateError"));e.videoElementPlaying.then((()=>{try{e.canvasElement.width=e.videoElement.videoWidth,e.canvasElement.height=e.videoElement.videoHeight,e.canvas2dContext.drawImage(e.videoElement,0,0),e.canvasElement.toBlob(t)}catch(e){n(new DOMException("UnknownError"))}}))}))}grabFrame(){const e=this;return new Promise((function(t,n){if("live"!==e._videoStreamTrack.readyState)return n(new DOMException("InvalidStateError"));e.videoElementPlaying.then((()=>{try{e.canvasElement.width=e.videoElement.videoWidth,e.canvasElement.height=e.videoElement.videoHeight,e.canvas2dContext.drawImage(e.videoElement,0,0),t(window.createImageBitmap(e.canvasElement))}catch(e){n(new DOMException("UnknownError"))}}))}))}}),window.ImageCapture=o},90:function(e,t,n){"use strict";n.r(t)},688:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.enableMobileConsole=void 0;const i=o(n(608));t.enableMobileConsole=()=>{const e=[];i.default.bind(((t,n)=>{5===e.length&&e.shift(),e.push({category:t,message:n[0]}),document.getElementById("console").innerHTML=e.map((e=>`<p>${e.message}</p>`)).join("")}))}},203:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},607:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function s(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}d((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(688),r=n(341),a=n(717),s=n(614);n(203),n(90);const d=$("#startButton"),c=$("#preloader"),l=$("#start"),h=$("#game"),u=$("#nameInput"),m=e=>o(void 0,void 0,void 0,(function*(){try{console.log("start game"),h.show(),l.hide(),s.setUpUser(e),s.saySomething(s.PHRASES.HELLO),yield a.takePhoto()}catch(e){console.log(e),alert(e)}}));window.onload=()=>o(void 0,void 0,void 0,(function*(){i.enableMobileConsole(),yield o(void 0,void 0,void 0,(function*(){c.show(),h.hide(),l.hide(),yield o(void 0,void 0,void 0,(function*(){return Promise.all([a.initImageCapture(),s.initVoiceService(),r.initHeadControl({onMovement:e=>{"up"!==e&&"down"!==e&&console.log(e)},onCameraPersmissionFailed:()=>alert("This game is head-controlled. You need to enable camera to play the game.")})]).then((()=>{c.hide(),l.show()})).catch((e=>{console.log(e)}))})),u.on("input",(()=>{u.val()?d.prop("disabled",!1):d.prop("disabled",!0)})),d.click((()=>o(void 0,void 0,void 0,(function*(){yield m(u.val())}))))}))}))},800:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={mouseOpeningTreshold:.6,mouseClosingTreshold:.5,headMovementStartedTreshold:.15,headMovementStoppedTreshold:.08};class o extends EventTarget{constructor(e,t){super(),this.movementLocks={vertical:!1,horizontal:!1,mouseOpened:!1},this.state={isLoaded:!1,isDetected:!1,isEnabled:!1},this.gl=null,this.cv=null,this.videoTexture=null,this.videoTransformMat2=null,this.glHeadSearchDrawShaderProgram=null,this.headSearchUniformXys=null,this.headSearchUniformVideoTransformMat2=null,this.handleMouseOpening=e=>{if(e.ry<-1*this.settings.headMovementStartedTreshold||e.ry>this.settings.headMovementStartedTreshold)return;let t=5*(e.expressions[0]-.2);return t=Math.min(Math.max(t,0),1),t>this.settings.mouseOpeningTreshold&&!this.movementLocks.mouseOpened?(this.movementLocks.mouseOpened=!0,void this.dispatchEvent(new Event("mouse opened"))):t<this.settings.mouseClosingTreshold&&this.movementLocks.mouseOpened?(this.movementLocks.mouseOpened=!1,void this.dispatchEvent(new Event("mouse closed"))):void 0},this.handleMove=e=>{0!==e.rx&&this.handleAxisMovement({axis:"vertical",axisPosition:e.rx,maxValue:"down",minValue:"up"}),0!==e.ry&&this.handleAxisMovement({axis:"horizontal",axisPosition:e.ry,maxValue:"left",minValue:"right"})},this.handleAxisMovement=({axis:e,axisPosition:t,maxValue:n,minValue:o})=>t<-1*this.settings.headMovementStartedTreshold&&!this.movementLocks[e]?(this.movementLocks[e]=!0,void this.dispatchEvent(new Event(o))):t>this.settings.headMovementStartedTreshold&&!this.movementLocks[e]?(this.movementLocks[e]=!0,void this.dispatchEvent(new Event(n))):void(t>-1*this.settings.headMovementStoppedTreshold&&t<this.settings.headMovementStoppedTreshold&&(this.movementLocks[e]=!1)),this.settings=Object.assign(Object.assign({},n),t),window.JEEFACEFILTERAPI.init({canvasId:e,NNCPath:"./vendor/",animateDelay:20,callbackReady:(e,n)=>{if(e)return(e="WEBCAM_UNAVAILABLE")?void(t.onCameraPersmissionFailed&&t.onCameraPersmissionFailed()):void t.onError(new Error(e));this.gl=n.GL,this.videoTexture=n.videoTexture,this.videoTransformMat2=n.videoTransformMat2,this.cv=n.canvasElement,this.initHeadSearchDraw(),this.state.isLoaded=!0,t.onReady&&t.onReady()},callbackTrack:e=>{this.state.isEnabled&&(this.drawHeadSearch(e),this.handleMove(e),this.handleMouseOpening(e))}})}toggle(e){return this.state.isEnabled===e||(this.state.isEnabled=e),!0}compileShader(e,t,n){const o=this.gl.createShader(t);return this.gl.shaderSource(o,e),this.gl.compileShader(o),this.gl.getShaderParameter(o,this.gl.COMPILE_STATUS)?o:(alert("ERROR IN "+n+" SHADER: "+this.gl.getShaderInfoLog(o)),null)}initHeadSearchDraw(){const e=this.compileShader("\n      attribute vec2 aat_position;\n      varying vec2 vUV;\n      \n      void main(void) {\n        gl_Position = vec4(aat_position, 0., 1.);\n        vUV = 0.5 + 0.5 * aat_position;\n        vUV.x = 1.-vUV.x; // mirror diplay\n      }",this.gl.VERTEX_SHADER,"VERTEX"),t=this.compileShader("\n      precision lowp float;\n      varying vec2 vUV;\n      \n      uniform sampler2D samplerVideo;\n      uniform mat2 videoTransformMat2;\n      uniform vec3 uxys;\n      \n      void main(void) {\n        vec2 uvVideoCentered = 2.0 * videoTransformMat2 * (vUV - 0.5);\n        vec2 uvVideo = uvVideoCentered + 0.5;\n        vec3 colorVideo = texture2D(samplerVideo, uvVideo).rgb;\n        vec2 pos = vUV*2.-vec2(1.,1.);\n        vec2 isInside = step(uxys.xy-uxys.z*vec2(1.,1.), pos);\n        isInside *= step(pos, uxys.xy+uxys.z*vec2(1.,1.));\n        vec2 blendCenterFactor = abs(pos-uxys.xy) / uxys.z;\n        float alpha = isInside.x * isInside.y * pow(max(blendCenterFactor.x, blendCenterFactor.y), 3.);\n        vec3 color = mix(colorVideo, vec3(0.,0.6,1.), alpha);\n        gl_FragColor = vec4(color,1.);\n      }",this.gl.FRAGMENT_SHADER,"FRAGMENT");this.glHeadSearchDrawShaderProgram=this.gl.createProgram(),this.gl.attachShader(this.glHeadSearchDrawShaderProgram,e),this.gl.attachShader(this.glHeadSearchDrawShaderProgram,t),this.gl.linkProgram(this.glHeadSearchDrawShaderProgram);const n=this.gl.getUniformLocation(this.glHeadSearchDrawShaderProgram,"samplerVideo");this.headSearchUniformXys=this.gl.getUniformLocation(this.glHeadSearchDrawShaderProgram,"uxys"),this.headSearchUniformVideoTransformMat2=this.gl.getUniformLocation(this.glHeadSearchDrawShaderProgram,"videoTransformMat2"),this.gl.useProgram(this.glHeadSearchDrawShaderProgram),this.gl.uniform1i(n,0)}drawHeadSearch(e){this.gl.viewport(0,0,this.cv.width,this.cv.height),this.gl.useProgram(this.glHeadSearchDrawShaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.videoTexture),this.gl.uniform3f(this.headSearchUniformXys,e.x,e.y,e.s),this.gl.uniformMatrix2fv(this.headSearchUniformVideoTransformMat2,!1,this.videoTransformMat2),this.gl.drawElements(this.gl.TRIANGLES,3,this.gl.UNSIGNED_SHORT,0)}}t.default=o},341:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.initHeadControl=t.default=void 0;const i=o(n(800));var r=n(800);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(r).default}}),t.initHeadControl=({onMovement:e,onCameraPersmissionFailed:t})=>new Promise(((n,o)=>{const r=new i.default("head-preview",{onReady:n,onCameraPersmissionFailed:t,onError:o});r.toggle(!0),r.addEventListener("mouse opened",(()=>e("mouse opened"))),r.addEventListener("mouse closed",(()=>e("mouse closed"))),r.addEventListener("left",(()=>e("left"))),r.addEventListener("right",(()=>e("right"))),r.addEventListener("up",(()=>e("up"))),r.addEventListener("down",(()=>e("down")))}))},8:function(){var e=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function s(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}d((o=o.apply(e,t||[])).next())}))};"createImageBitmap"in window||(window.createImageBitmap=function(t){return e(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{let o=document.createElement("img");o.addEventListener("load",(function(){e(this)})),o.src=URL.createObjectURL(t)}))}))})},717:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function s(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}d((o=o.apply(e,t||[])).next())}))};let i;Object.defineProperty(t,"__esModule",{value:!0}),t.initImageCapture=t.takePhoto=void 0,n(505),n(8);let r=!1;t.takePhoto=()=>o(void 0,void 0,void 0,(function*(){i&&(yield i.takePhoto().then((e=>createImageBitmap(e))).then((e=>{const t=document.querySelector("#takePhotoCanvas");t.style.display="block",function(e,t){e.width=getComputedStyle(e).width.split("px")[0],e.height=getComputedStyle(e).height.split("px")[0];let n=Math.min(e.width/t.width,e.height/t.height),o=(e.width-t.width*n)/2,i=(e.height-t.height*n)/2;e.getContext("2d").clearRect(0,0,e.width,e.height),e.getContext("2d").drawImage(t,0,0,t.width,t.height,o,i,t.width*n,t.height*n)}(t,e)})))})),t.initImageCapture=()=>o(void 0,void 0,void 0,(function*(){return r?Promise.resolve():(r=!0,navigator.mediaDevices.getUserMedia({video:!0}).then((e=>{try{const t=e.getVideoTracks()[0];i=new ImageCapture(t),console.log("image capture initied")}catch(e){throw e}})).catch((()=>{alert("Image capture is not supported on your device :(")})))}))},614:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function s(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}d((o=o.apply(e,t||[])).next())}))};let o;Object.defineProperty(t,"__esModule",{value:!0}),t.saySomething=t.setUpUser=t.PHRASES=t.initVoiceService=void 0,t.initVoiceService=()=>n(void 0,void 0,void 0,(function*(){return new Promise((e=>{setTimeout((()=>{o=window.speechSynthesis.getVoices().find((({lang:e})=>"en-GB"===e)),o?(console.log("voice init"),e(!0)):t.initVoiceService().then(e)}),500)}))})),t.PHRASES={HELLO:"`Hi, %username%. Have a good game",RIGHT:"Good right turn, %username%"};let i="";t.setUpUser=e=>{i=e},t.saySomething=e=>{if(!o)return;const t=new SpeechSynthesisUtterance(e.replace("%username%",i));t.voice=o,t.volume=1,t.pitch=1,t.rate=1,speechSynthesis.cancel(),speechSynthesis.speak(t)}}},t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(607)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vaG0tc25ha2UvLi9ub2RlX21vZHVsZXMvY29uc29sZS1zdWJzY3JpYmVyL2luZGV4LmpzIiwid2VicGFjazovL29obS1zbmFrZS8uL25vZGVfbW9kdWxlcy9pbWFnZS1jYXB0dXJlL3NyYy9pbWFnZWNhcHR1cmUuanMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL2NvbnNvbGUudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL2RlY2xhcmUudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL29obS1zbmFrZS8uL3NyYy9zZXJ2aWNlcy9IZWFkQ29udHJvbFNlcnZpY2UvSGVhZENvbnRyb2xTZXJ2aWNlLnRzIiwid2VicGFjazovL29obS1zbmFrZS8uL3NyYy9zZXJ2aWNlcy9IZWFkQ29udHJvbFNlcnZpY2UvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL3NlcnZpY2VzL0ltYWdlQ2FwdHVyZVNlcnZpY2UvYml0bWFwUG9seWZpbGwudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL3NlcnZpY2VzL0ltYWdlQ2FwdHVyZVNlcnZpY2UvaW1hZ2VDYXB0dXJlLnRzIiwid2VicGFjazovL29obS1zbmFrZS8uL3NyYy9zZXJ2aWNlcy9Wb2ljZVNlcnZpY2Uvdm9pY2UudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL29obS1zbmFrZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6WyJfbG9nIiwiX3dhcm4iLCJfZXJyb3IiLCJfZGVidWciLCJDb25zb2xlU3Vic2NyaWJlciIsImNvbnNvbGUiLCJsb2ciLCJ3YXJuIiwiZXJyb3IiLCJkZWJ1ZyIsInVuYmluZCIsImJpbmQiLCJjYiIsInByZXZlbnRMb2dnaW5nIiwiQm9vbGVhbiIsIkNBVEVHT1JZX0lORk8iLCJDQVRFR09SWV9XQVJOIiwiQ0FURUdPUllfRVJST1IiLCJDQVRFR09SWV9ERUJVRyIsImluZm8iLCJjYWxsIiwiYXJndW1lbnRzIiwibW9kdWxlIiwiZXhwb3J0cyIsIndpbmRvdyIsIkltYWdlQ2FwdHVyZSIsInZpZGVvU3RyZWFtVHJhY2siLCJraW5kIiwiRE9NRXhjZXB0aW9uIiwidGhpcyIsIl92aWRlb1N0cmVhbVRyYWNrIiwicmVhZHlTdGF0ZSIsIl9wcmV2aWV3U3RyZWFtIiwiTWVkaWFTdHJlYW0iLCJ2aWRlb0VsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ2aWRlb0VsZW1lbnRQbGF5aW5nIiwiUHJvbWlzZSIsInJlc29sdmUiLCJhZGRFdmVudExpc3RlbmVyIiwiSFRNTE1lZGlhRWxlbWVudCIsInNyY09iamVjdCIsInNyYyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIm11dGVkIiwic2V0QXR0cmlidXRlIiwicGxheSIsImNhbnZhc0VsZW1lbnQiLCJjYW52YXMyZENvbnRleHQiLCJnZXRDb250ZXh0IiwicmVqZWN0IiwiTWVkaWFTZXR0aW5nc1JhbmdlIiwiY3VycmVudCIsIm1pbiIsIm1heCIsImV4cG9zdXJlQ29tcGVuc2F0aW9uIiwiZXhwb3N1cmVNb2RlIiwiZmlsbExpZ2h0TW9kZSIsImZvY3VzTW9kZSIsImltYWdlSGVpZ2h0IiwiaW1hZ2VXaWR0aCIsImlzbyIsInJlZEV5ZVJlZHVjdGlvbiIsIndoaXRlQmFsYW5jZU1vZGUiLCJ6b29tIiwicGhvdG9TZXR0aW5ncyIsInNlbGYiLCJ0aGVuIiwid2lkdGgiLCJ2aWRlb1dpZHRoIiwiaGVpZ2h0IiwidmlkZW9IZWlnaHQiLCJkcmF3SW1hZ2UiLCJ0b0Jsb2IiLCJjcmVhdGVJbWFnZUJpdG1hcCIsIl9faW1wb3J0RGVmYXVsdCIsIm1vZCIsIl9fZXNNb2R1bGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiZW5hYmxlTW9iaWxlQ29uc29sZSIsImNvbnNvbGVfc3Vic2NyaWJlcl8xIiwiYnVmZmVyIiwiZGVmYXVsdCIsImNhdGVnb3J5IiwiYXJncyIsImxlbmd0aCIsInNoaWZ0IiwicHVzaCIsIm1lc3NhZ2UiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsIm1hcCIsIm0iLCJqb2luIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiZnVsZmlsbGVkIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwiYXBwbHkiLCJjb25zb2xlXzEiLCJIZWFkQ29udHJvbFNlcnZpY2VfMSIsImltYWdlQ2FwdHVyZV8xIiwidm9pY2VfMSIsInN0YXJ0QnV0dG9uIiwiJCIsInByZWxvYWRlciIsInN0YXJ0U2NyZWVuIiwiZ2FtZVNjcmVlbiIsIm5hbWVJbnB1dCIsInN0YXJ0R2FtZSIsInBsYXllck5hbWUiLCJzaG93IiwiaGlkZSIsInNldFVwVXNlciIsInNheVNvbWV0aGluZyIsIlBIUkFTRVMiLCJIRUxMTyIsInRha2VQaG90byIsImFsZXJ0Iiwib25sb2FkIiwiYWxsIiwiaW5pdEltYWdlQ2FwdHVyZSIsImluaXRWb2ljZVNlcnZpY2UiLCJpbml0SGVhZENvbnRyb2wiLCJvbk1vdmVtZW50IiwibW92ZW1lbnQiLCJvbkNhbWVyYVBlcnNtaXNzaW9uRmFpbGVkIiwiY2F0Y2giLCJvbiIsInZhbCIsInByb3AiLCJjbGljayIsImRlZmF1bHRTZXR0aW5ncyIsIm1vdXNlT3BlbmluZ1RyZXNob2xkIiwibW91c2VDbG9zaW5nVHJlc2hvbGQiLCJoZWFkTW92ZW1lbnRTdGFydGVkVHJlc2hvbGQiLCJoZWFkTW92ZW1lbnRTdG9wcGVkVHJlc2hvbGQiLCJIZWFkQ29udHJvbFNlcnZpY2UiLCJFdmVudFRhcmdldCIsImNhbnZhc0lkIiwic2V0dGluZ3MiLCJzdXBlciIsIm1vdmVtZW50TG9ja3MiLCJ2ZXJ0aWNhbCIsImhvcml6b250YWwiLCJtb3VzZU9wZW5lZCIsInN0YXRlIiwiaXNMb2FkZWQiLCJpc0RldGVjdGVkIiwiaXNFbmFibGVkIiwiZ2wiLCJjdiIsInZpZGVvVGV4dHVyZSIsInZpZGVvVHJhbnNmb3JtTWF0MiIsImdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtIiwiaGVhZFNlYXJjaFVuaWZvcm1YeXMiLCJoZWFkU2VhcmNoVW5pZm9ybVZpZGVvVHJhbnNmb3JtTWF0MiIsImhhbmRsZU1vdXNlT3BlbmluZyIsImRldGVjdFN0YXRlIiwicnkiLCJtb3V0aE9wZW5pbmciLCJleHByZXNzaW9ucyIsIk1hdGgiLCJkaXNwYXRjaEV2ZW50IiwiRXZlbnQiLCJoYW5kbGVNb3ZlIiwibXYiLCJyeCIsImhhbmRsZUF4aXNNb3ZlbWVudCIsImF4aXMiLCJheGlzUG9zaXRpb24iLCJtYXhWYWx1ZSIsIm1pblZhbHVlIiwiYXNzaWduIiwiSkVFRkFDRUZJTFRFUkFQSSIsImluaXQiLCJOTkNQYXRoIiwiYW5pbWF0ZURlbGF5IiwiY2FsbGJhY2tSZWFkeSIsImVyckNvZGUiLCJqZWVGYWNlRmlsdGVyT2JqIiwib25FcnJvciIsIkVycm9yIiwiaW5pdEhlYWRTZWFyY2hEcmF3Iiwib25SZWFkeSIsImNhbGxiYWNrVHJhY2siLCJkcmF3SGVhZFNlYXJjaCIsInNvdXJjZSIsImdsVHlwZSIsInR5cGVTdHJpbmciLCJnbFNoYWRlciIsImNyZWF0ZVNoYWRlciIsInNoYWRlclNvdXJjZSIsImNvbXBpbGVTaGFkZXIiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsImdldFNoYWRlckluZm9Mb2ciLCJnbFNoYWRlclZlcnRleCIsIlZFUlRFWF9TSEFERVIiLCJnbFNoYWRlckZyYWdtZW50IiwiRlJBR01FTlRfU0hBREVSIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwic2FtcGxlclZpZGVvIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwidXNlUHJvZ3JhbSIsInVuaWZvcm0xaSIsInZpZXdwb3J0IiwiYWN0aXZlVGV4dHVyZSIsIlRFWFRVUkUwIiwiYmluZFRleHR1cmUiLCJURVhUVVJFXzJEIiwidW5pZm9ybTNmIiwieCIsInkiLCJzIiwidW5pZm9ybU1hdHJpeDJmdiIsImRyYXdFbGVtZW50cyIsIlRSSUFOR0xFUyIsIlVOU0lHTkVEX1NIT1JUIiwiSGVhZENvbnRyb2xTZXJ2aWNlXzIiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiaGVhZENvbnRyb2xTZXJ2aWNlIiwidG9nZ2xlIiwiYmxvYiIsImltZyIsImltYWdlQ2FwdHVyZSIsImlzSW5pdCIsImltYWdlQml0bWFwIiwiY2FudmFzIiwicXVlcnlTZWxlY3RvciIsInN0eWxlIiwiZGlzcGxheSIsImdldENvbXB1dGVkU3R5bGUiLCJzcGxpdCIsInJhdGlvIiwiY2xlYXJSZWN0IiwiZHJhd0NhbnZhcyIsIm5hdmlnYXRvciIsIm1lZGlhRGV2aWNlcyIsImdldFVzZXJNZWRpYSIsInZpZGVvIiwibWVkaWFTdHJlYW0iLCJ0cmFjayIsImdldFZpZGVvVHJhY2tzIiwiVk9JQ0UiLCJzZXRUaW1lb3V0Iiwic3BlZWNoU3ludGhlc2lzIiwiZ2V0Vm9pY2VzIiwiZmluZCIsImxhbmciLCJSSUdIVCIsInVzZXJOYW1lIiwibmFtZSIsInRleHQiLCJ1dHRlcmFuY2UiLCJTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UiLCJyZXBsYWNlIiwidm9pY2UiLCJ2b2x1bWUiLCJwaXRjaCIsInJhdGUiLCJjYW5jZWwiLCJzcGVhayIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJvYmoiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9w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LFNBQVNDLEVBQW9CQyxHQUU1QixHQUFHRixFQUF5QkUsR0FDM0IsT0FBT0YsRUFBeUJFLEdBQVVqUSxRQUczQyxJQUFJRCxFQUFTZ1EsRUFBeUJFLEdBQVksQ0FHakRqUSxRQUFTLElBT1YsT0FIQWtRLEVBQW9CRCxHQUFVcFEsS0FBS0UsRUFBT0MsUUFBU0QsRUFBUUEsRUFBT0MsUUFBU2dRLEdBR3BFalEsRUFBT0MsUUNuQmZnUSxFQUFvQkcsRUFBSSxTQUFTblEsRUFBU29RLEdBQ3pDLElBQUksSUFBSUMsS0FBT0QsRUFDWEosRUFBb0JNLEVBQUVGLEVBQVlDLEtBQVNMLEVBQW9CTSxFQUFFdFEsRUFBU3FRLElBQzVFNU0sT0FBT0MsZUFBZTFELEVBQVNxUSxFQUFLLENBQUVsRCxZQUFZLEVBQU1DLElBQUtnRCxFQUFXQyxNQ0ozRUwsRUFBb0JNLEVBQUksU0FBU0MsRUFBS2hKLEdBQVEsT0FBTzlELE9BQU8rTSxVQUFVQyxlQUFlNVEsS0FBSzBRLEVBQUtoSixJQ0MvRnlJLEVBQW9CVSxFQUFJLFNBQVMxUSxHQUNYLG9CQUFYMlEsUUFBMEJBLE9BQU9DLGFBQzFDbk4sT0FBT0MsZUFBZTFELEVBQVMyUSxPQUFPQyxZQUFhLENBQUVqTixNQUFPLFdBRTdERixPQUFPQyxlQUFlMUQsRUFBUyxhQUFjLENBQUUyRCxPQUFPLEtDRnZEcU0sRUFBb0IsSyIsImZpbGUiOiJtYWluLjEzMzU4ZTA4MjVmY2Q1M2U0NzU5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTdWJzY3JpYmUgdG8gdGhlIGNvbnNvbGUgb3V0cHV0IFxuICpcbiAqIEBhdXRob3IgU2Ftc29uIFJhZHVcbiAqLyBcbihmdW5jdGlvbigpe1xuICAgIHZhciBfbG9nID0gY29uc29sZS5sb2c7XG4gICAgdmFyIF93YXJuID0gY29uc29sZS53YXJuO1xuICAgIHZhciBfZXJyb3IgPSBjb25zb2xlLmVycm9yO1xuICAgIHZhciBfZGVidWcgPSBjb25zb2xlLmRlYnVnO1xuXG4gICAgdmFyIENvbnNvbGVTdWJzY3JpYmVyID0ge1xuICAgICAgICB1bmJpbmQ6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyA9IF9sb2c7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4gPSBfd2FybjtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IgPSBfZXJyb3I7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnID0gX2RlYnVnO1xuICAgICAgICB9LCBcbiAgICAgICAgYmluZDogZnVuY3Rpb24oY2IsIHByZXZlbnRMb2dnaW5nKXtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2IgIT09ICdmdW5jdGlvbicpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJZb3UgbXVzdCBwYXNzIGEgdmFsaWQgY2FsbGJhY2sgZnVuY3Rpb24uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcHJldmVudExvZ2dpbmcgPSBCb29sZWFuKHByZXZlbnRMb2dnaW5nKTsgLy9mb3JjZSBib29sXG5cbiAgICAgICAgICAgIGNvbnN0IENBVEVHT1JZX0lORk8gPSBcImluZm9cIjtcbiAgICAgICAgICAgIGNvbnN0IENBVEVHT1JZX1dBUk4gPSBcIndhcm5cIjtcbiAgICAgICAgICAgIGNvbnN0IENBVEVHT1JZX0VSUk9SID0gXCJlcnJvclwiO1xuICAgICAgICAgICAgY29uc3QgQ0FURUdPUllfREVCVUcgPSBcImRlYnVnXCI7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nID0gY29uc29sZS5pbmZvID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpZiAoX2xvZyl7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcHJldmVudExvZ2dpbmcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2xvZy5jYWxsKGNvbnNvbGUsIC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2IoQ0FURUdPUllfSU5GTywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zb2xlLndhcm4gPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGlmIChfd2Fybil7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcHJldmVudExvZ2dpbmcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX3dhcm4uY2FsbChjb25zb2xlLCAuLi5hcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNiKENBVEVHT1JZX1dBUk4sIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc29sZS5lcnJvciA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgaWYgKF9lcnJvcil7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcHJldmVudExvZ2dpbmcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2Vycm9yLmNhbGwoY29uc29sZSwgLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYihDQVRFR09SWV9FUlJPUiwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpZiAoX2RlYnVnKXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmV2ZW50TG9nZ2luZyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZGVidWcuY2FsbChjb25zb2xlLCAuLi5hcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNiKENBVEVHT1JZX0RFQlVHLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vZXhwb3J0XG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpe1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IENvbnNvbGVTdWJzY3JpYmVyO1xuICAgIH1cbiAgICBlbHNlIGlmICh3aW5kb3cgJiYgdHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpe1xuICAgICAgICB3aW5kb3cuQ29uc29sZVN1YnNjcmliZXIgPSBDb25zb2xlU3Vic2NyaWJlcjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZXhwb3J0IG1vZHVsZS5cIik7XG4gICAgfVxufSkoKTtcbiIsIi8qKlxuICogTWVkaWFTdHJlYW0gSW1hZ2VDYXB0dXJlIHBvbHlmaWxsXG4gKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5leHBvcnQgbGV0IEltYWdlQ2FwdHVyZSA9IHdpbmRvdy5JbWFnZUNhcHR1cmU7XG5cbmlmICh0eXBlb2YgSW1hZ2VDYXB0dXJlID09PSAndW5kZWZpbmVkJykge1xuICBJbWFnZUNhcHR1cmUgPSBjbGFzcyB7XG5cbiAgICAvKipcbiAgICAgKiBUT0RPIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9pbWFnZS1jYXB0dXJlLyNjb25zdHJ1Y3RvcnNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7TWVkaWFTdHJlYW1UcmFja30gdmlkZW9TdHJlYW1UcmFjayAtIEEgTWVkaWFTdHJlYW1UcmFjayBvZiB0aGUgJ3ZpZGVvJyBraW5kXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodmlkZW9TdHJlYW1UcmFjaykge1xuICAgICAgaWYgKHZpZGVvU3RyZWFtVHJhY2sua2luZCAhPT0gJ3ZpZGVvJylcbiAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbignTm90U3VwcG9ydGVkRXJyb3InKTtcblxuICAgICAgdGhpcy5fdmlkZW9TdHJlYW1UcmFjayA9IHZpZGVvU3RyZWFtVHJhY2s7XG4gICAgICBpZiAoISgncmVhZHlTdGF0ZScgaW4gdGhpcy5fdmlkZW9TdHJlYW1UcmFjaykpIHtcbiAgICAgICAgLy8gUG9seWZpbGwgZm9yIEZpcmVmb3hcbiAgICAgICAgdGhpcy5fdmlkZW9TdHJlYW1UcmFjay5yZWFkeVN0YXRlID0gJ2xpdmUnO1xuICAgICAgfVxuXG4gICAgICAvLyBNZWRpYVN0cmVhbSBjb25zdHJ1Y3RvciBub3QgYXZhaWxhYmxlIHVudGlsIENocm9tZSA1NSAtIGh0dHBzOi8vd3d3LmNocm9tZXN0YXR1cy5jb20vZmVhdHVyZS81OTEyMTcyNTQ2NzUyNTEyXG4gICAgICB0aGlzLl9wcmV2aWV3U3RyZWFtID0gbmV3IE1lZGlhU3RyZWFtKFt2aWRlb1N0cmVhbVRyYWNrXSk7XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudFBsYXlpbmcgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncGxheWluZycsIHJlc29sdmUpO1xuICAgICAgfSk7XG4gICAgICBpZiAoSFRNTE1lZGlhRWxlbWVudCkge1xuICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zcmNPYmplY3QgPSB0aGlzLl9wcmV2aWV3U3RyZWFtOyAgLy8gU2FmYXJpIDExIGRvZXNuJ3QgYWxsb3cgdXNlIG9mIGNyZWF0ZU9iamVjdFVSTCBmb3IgTWVkaWFTdHJlYW1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwodGhpcy5fcHJldmlld1N0cmVhbSk7XG4gICAgICB9XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudC5tdXRlZCA9IHRydWU7XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3BsYXlzaW5saW5lJywgJycpOyAvLyBSZXF1aXJlZCBieSBTYWZhcmkgb24gaU9TIDExLiBTZWUgaHR0cHM6Ly93ZWJraXQub3JnL2Jsb2cvNjc4NFxuICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpO1xuXG4gICAgICB0aGlzLmNhbnZhc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgIC8vIFRPRE8gRmlyZWZveCBoYXMgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL09mZnNjcmVlbkNhbnZhc1xuICAgICAgdGhpcy5jYW52YXMyZENvbnRleHQgPSB0aGlzLmNhbnZhc0VsZW1lbnQuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBodHRwczovL3czYy5naXRodWIuaW8vbWVkaWFjYXB0dXJlLWltYWdlL2luZGV4Lmh0bWwjZG9tLWltYWdlY2FwdHVyZS12aWRlb3N0cmVhbXRyYWNrXG4gICAgICogQHJldHVybiB7TWVkaWFTdHJlYW1UcmFja30gVGhlIE1lZGlhU3RyZWFtVHJhY2sgcGFzc2VkIGludG8gdGhlIGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgZ2V0IHZpZGVvU3RyZWFtVHJhY2soKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdmlkZW9TdHJlYW1UcmFjaztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9pbWFnZS1jYXB0dXJlLyNkb20taW1hZ2VjYXB0dXJlLWdldHBob3RvY2FwYWJpbGl0aWVzXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxQaG90b0NhcGFiaWxpdGllcz59IEZ1bGZpbGxlZCBwcm9taXNlIHdpdGhcbiAgICAgKiBbUGhvdG9DYXBhYmlsaXRpZXNdKGh0dHBzOi8vd3d3LnczLm9yZy9UUi9pbWFnZS1jYXB0dXJlLyNpZGwtZGVmLXBob3RvY2FwYWJpbGl0aWVzKVxuICAgICAqIG9iamVjdCBvbiBzdWNjZXNzLCByZWplY3RlZCBwcm9taXNlIG9uIGZhaWx1cmVcbiAgICAgKi9cbiAgICBnZXRQaG90b0NhcGFiaWxpdGllcygpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBleGVjdXRvckdQQyhyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgLy8gVE9ETyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3czYy9tZWRpYWNhcHR1cmUtaW1hZ2UvaXNzdWVzLzk3XG4gICAgICAgIGNvbnN0IE1lZGlhU2V0dGluZ3NSYW5nZSA9IHtcbiAgICAgICAgICBjdXJyZW50OiAwLCBtaW46IDAsIG1heDogMCxcbiAgICAgICAgfTtcbiAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgZXhwb3N1cmVDb21wZW5zYXRpb246IE1lZGlhU2V0dGluZ3NSYW5nZSxcbiAgICAgICAgICBleHBvc3VyZU1vZGU6ICdub25lJyxcbiAgICAgICAgICBmaWxsTGlnaHRNb2RlOiAnbm9uZScsXG4gICAgICAgICAgZm9jdXNNb2RlOiAnbm9uZScsXG4gICAgICAgICAgaW1hZ2VIZWlnaHQ6IE1lZGlhU2V0dGluZ3NSYW5nZSxcbiAgICAgICAgICBpbWFnZVdpZHRoOiBNZWRpYVNldHRpbmdzUmFuZ2UsXG4gICAgICAgICAgaXNvOiBNZWRpYVNldHRpbmdzUmFuZ2UsXG4gICAgICAgICAgcmVkRXllUmVkdWN0aW9uOiBmYWxzZSxcbiAgICAgICAgICB3aGl0ZUJhbGFuY2VNb2RlOiAnbm9uZScsXG4gICAgICAgICAgem9vbTogTWVkaWFTZXR0aW5nc1JhbmdlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVqZWN0KG5ldyBET01FeGNlcHRpb24oJ09wZXJhdGlvbkVycm9yJykpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyBodHRwczovL3d3dy53My5vcmcvVFIvaW1hZ2UtY2FwdHVyZS8jZG9tLWltYWdlY2FwdHVyZS1zZXRvcHRpb25zXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBob3RvU2V0dGluZ3MgLSBQaG90byBzZXR0aW5ncyBkaWN0aW9uYXJ5LCBodHRwczovL3d3dy53My5vcmcvVFIvaW1hZ2UtY2FwdHVyZS8jaWRsLWRlZi1waG90b3NldHRpbmdzXG4gICAgICogQHJldHVybiB7UHJvbWlzZTx2b2lkPn0gRnVsZmlsbGVkIHByb21pc2Ugb24gc3VjY2VzcywgcmVqZWN0ZWQgcHJvbWlzZSBvbiBmYWlsdXJlXG4gICAgICovXG4gICAgc2V0T3B0aW9ucyhwaG90b1NldHRpbmdzID0ge30pIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBleGVjdXRvclNPKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAvLyBUT0RPXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUT0RPXG4gICAgICogSW1wbGVtZW50cyBodHRwczovL3d3dy53My5vcmcvVFIvaW1hZ2UtY2FwdHVyZS8jZG9tLWltYWdlY2FwdHVyZS10YWtlcGhvdG9cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPEJsb2I+fSBGdWxmaWxsZWQgcHJvbWlzZSB3aXRoIFtCbG9iXShodHRwczovL3d3dy53My5vcmcvVFIvRmlsZUFQSS8jYmxvYilcbiAgICAgKiBhcmd1bWVudCBvbiBzdWNjZXNzOyByZWplY3RlZCBwcm9taXNlIG9uIGZhaWx1cmVcbiAgICAgKi9cbiAgICB0YWtlUGhvdG8oKSB7XG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBleGVjdXRvclRQKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAvLyBgSWYgdGhlIHJlYWR5U3RhdGUgb2YgdGhlIE1lZGlhU3RyZWFtVHJhY2sgcHJvdmlkZWQgaW4gdGhlIGNvbnN0cnVjdG9yIGlzIG5vdCBsaXZlLFxuICAgICAgICAvLyByZXR1cm4gYSBwcm9taXNlIHJlamVjdGVkIHdpdGggYSBuZXcgRE9NRXhjZXB0aW9uIHdob3NlIG5hbWUgaXMgXCJJbnZhbGlkU3RhdGVFcnJvclwiLmBcbiAgICAgICAgaWYgKHNlbGYuX3ZpZGVvU3RyZWFtVHJhY2sucmVhZHlTdGF0ZSAhPT0gJ2xpdmUnKSB7XG4gICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgRE9NRXhjZXB0aW9uKCdJbnZhbGlkU3RhdGVFcnJvcicpKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLnZpZGVvRWxlbWVudFBsYXlpbmcudGhlbigoKSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNlbGYuY2FudmFzRWxlbWVudC53aWR0aCA9IHNlbGYudmlkZW9FbGVtZW50LnZpZGVvV2lkdGg7XG4gICAgICAgICAgICBzZWxmLmNhbnZhc0VsZW1lbnQuaGVpZ2h0ID0gc2VsZi52aWRlb0VsZW1lbnQudmlkZW9IZWlnaHQ7XG4gICAgICAgICAgICBzZWxmLmNhbnZhczJkQ29udGV4dC5kcmF3SW1hZ2Uoc2VsZi52aWRlb0VsZW1lbnQsIDAsIDApO1xuICAgICAgICAgICAgc2VsZi5jYW52YXNFbGVtZW50LnRvQmxvYihyZXNvbHZlKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBET01FeGNlcHRpb24oJ1Vua25vd25FcnJvcicpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyBodHRwczovL3d3dy53My5vcmcvVFIvaW1hZ2UtY2FwdHVyZS8jZG9tLWltYWdlY2FwdHVyZS1ncmFiZnJhbWVcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPEltYWdlQml0bWFwPn0gRnVsZmlsbGVkIHByb21pc2Ugd2l0aFxuICAgICAqIFtJbWFnZUJpdG1hcF0oaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1MS93ZWJhcHBhcGlzLmh0bWwjd2ViYXBwYXBpcy1pbWFnZXMpXG4gICAgICogYXJndW1lbnQgb24gc3VjY2VzczsgcmVqZWN0ZWQgcHJvbWlzZSBvbiBmYWlsdXJlXG4gICAgICovXG4gICAgZ3JhYkZyYW1lKCkge1xuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZXhlY3V0b3JHRihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgLy8gYElmIHRoZSByZWFkeVN0YXRlIG9mIHRoZSBNZWRpYVN0cmVhbVRyYWNrIHByb3ZpZGVkIGluIHRoZSBjb25zdHJ1Y3RvciBpcyBub3QgbGl2ZSxcbiAgICAgICAgLy8gcmV0dXJuIGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIGEgbmV3IERPTUV4Y2VwdGlvbiB3aG9zZSBuYW1lIGlzIFwiSW52YWxpZFN0YXRlRXJyb3JcIi5gXG4gICAgICAgIGlmIChzZWxmLl92aWRlb1N0cmVhbVRyYWNrLnJlYWR5U3RhdGUgIT09ICdsaXZlJykge1xuICAgICAgICAgIHJldHVybiByZWplY3QobmV3IERPTUV4Y2VwdGlvbignSW52YWxpZFN0YXRlRXJyb3InKSk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi52aWRlb0VsZW1lbnRQbGF5aW5nLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzZWxmLmNhbnZhc0VsZW1lbnQud2lkdGggPSBzZWxmLnZpZGVvRWxlbWVudC52aWRlb1dpZHRoO1xuICAgICAgICAgICAgc2VsZi5jYW52YXNFbGVtZW50LmhlaWdodCA9IHNlbGYudmlkZW9FbGVtZW50LnZpZGVvSGVpZ2h0O1xuICAgICAgICAgICAgc2VsZi5jYW52YXMyZENvbnRleHQuZHJhd0ltYWdlKHNlbGYudmlkZW9FbGVtZW50LCAwLCAwKTtcbiAgICAgICAgICAgIC8vIFRPRE8gcG9seWZpbGwgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0ltYWdlQml0bWFwRmFjdG9yaWVzL2NyZWF0ZUltYWdlQml0bWFwIGZvciBJRVxuICAgICAgICAgICAgcmVzb2x2ZSh3aW5kb3cuY3JlYXRlSW1hZ2VCaXRtYXAoc2VsZi5jYW52YXNFbGVtZW50KSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRE9NRXhjZXB0aW9uKCdVbmtub3duRXJyb3InKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxud2luZG93LkltYWdlQ2FwdHVyZSA9IEltYWdlQ2FwdHVyZTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5lbmFibGVNb2JpbGVDb25zb2xlID0gdm9pZCAwO1xuY29uc3QgY29uc29sZV9zdWJzY3JpYmVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImNvbnNvbGUtc3Vic2NyaWJlclwiKSk7XG5jb25zdCBlbmFibGVNb2JpbGVDb25zb2xlID0gKCkgPT4ge1xuICAgIGNvbnN0IGJ1ZmZlciA9IFtdO1xuICAgIGNvbnNvbGVfc3Vic2NyaWJlcl8xLmRlZmF1bHQuYmluZCgoY2F0ZWdvcnksIGFyZ3MpID0+IHtcbiAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDUpIHtcbiAgICAgICAgICAgIGJ1ZmZlci5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgICAgIGJ1ZmZlci5wdXNoKHsgY2F0ZWdvcnksIG1lc3NhZ2U6IGFyZ3NbMF0gfSk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25zb2xlJykuaW5uZXJIVE1MID0gYnVmZmVyLm1hcCgobSkgPT4gYDxwPiR7bS5tZXNzYWdlfTwvcD5gKS5qb2luKCcnKTtcbiAgICB9KTtcbn07XG5leHBvcnRzLmVuYWJsZU1vYmlsZUNvbnNvbGUgPSBlbmFibGVNb2JpbGVDb25zb2xlO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgY29uc29sZV8xID0gcmVxdWlyZShcIi4vY29uc29sZVwiKTtcbmNvbnN0IEhlYWRDb250cm9sU2VydmljZV8xID0gcmVxdWlyZShcIi4vc2VydmljZXMvSGVhZENvbnRyb2xTZXJ2aWNlXCIpO1xuY29uc3QgaW1hZ2VDYXB0dXJlXzEgPSByZXF1aXJlKFwiLi9zZXJ2aWNlcy9JbWFnZUNhcHR1cmVTZXJ2aWNlL2ltYWdlQ2FwdHVyZVwiKTtcbmNvbnN0IHZvaWNlXzEgPSByZXF1aXJlKFwiLi9zZXJ2aWNlcy9Wb2ljZVNlcnZpY2Uvdm9pY2VcIik7XG5yZXF1aXJlKFwiLi9kZWNsYXJlXCIpO1xucmVxdWlyZShcIi4vc3R5bGUvaW5kZXguc2Nzc1wiKTtcbmNvbnN0IHN0YXJ0QnV0dG9uID0gJCgnI3N0YXJ0QnV0dG9uJyk7XG5jb25zdCBwcmVsb2FkZXIgPSAkKCcjcHJlbG9hZGVyJyk7XG5jb25zdCBzdGFydFNjcmVlbiA9ICQoJyNzdGFydCcpO1xuY29uc3QgZ2FtZVNjcmVlbiA9ICQoJyNnYW1lJyk7XG5jb25zdCBuYW1lSW5wdXQgPSAkKCcjbmFtZUlucHV0Jyk7XG5jb25zdCBpbml0QWxsQVBJID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc3QgaGFuZGxlTW92ZW1lbnQgPSAobW92ZW1lbnQpID0+IHtcbiAgICAgICAgaWYgKG1vdmVtZW50ID09PSAndXAnIHx8IG1vdmVtZW50ID09PSAnZG93bicpIHtcbiAgICAgICAgICAgIC8vIGlnbm9yZSB1cCBhbmQgZG93blxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKG1vdmVtZW50KTtcbiAgICB9O1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgIGltYWdlQ2FwdHVyZV8xLmluaXRJbWFnZUNhcHR1cmUoKSxcbiAgICAgICAgdm9pY2VfMS5pbml0Vm9pY2VTZXJ2aWNlKCksXG4gICAgICAgIEhlYWRDb250cm9sU2VydmljZV8xLmluaXRIZWFkQ29udHJvbCh7XG4gICAgICAgICAgICBvbk1vdmVtZW50OiBoYW5kbGVNb3ZlbWVudCxcbiAgICAgICAgICAgIG9uQ2FtZXJhUGVyc21pc3Npb25GYWlsZWQ6ICgpID0+IGFsZXJ0KCdUaGlzIGdhbWUgaXMgaGVhZC1jb250cm9sbGVkLiBZb3UgbmVlZCB0byBlbmFibGUgY2FtZXJhIHRvIHBsYXkgdGhlIGdhbWUuJyksXG4gICAgICAgIH0pLFxuICAgIF0pXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgcHJlbG9hZGVyLmhpZGUoKTtcbiAgICAgICAgc3RhcnRTY3JlZW4uc2hvdygpO1xuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICB9KTtcbn0pO1xuY29uc3QgaW5pdEFwcCA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIHByZWxvYWRlci5zaG93KCk7XG4gICAgZ2FtZVNjcmVlbi5oaWRlKCk7XG4gICAgc3RhcnRTY3JlZW4uaGlkZSgpO1xuICAgIHlpZWxkIGluaXRBbGxBUEkoKTtcbiAgICBuYW1lSW5wdXQub24oJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICBpZiAobmFtZUlucHV0LnZhbCgpKSB7XG4gICAgICAgICAgICBzdGFydEJ1dHRvbi5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0YXJ0QnV0dG9uLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBzdGFydEJ1dHRvbi5jbGljaygoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgeWllbGQgc3RhcnRHYW1lKG5hbWVJbnB1dC52YWwoKSk7XG4gICAgfSkpO1xufSk7XG5jb25zdCBzdGFydEdhbWUgPSAocGxheWVyTmFtZSkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coJ3N0YXJ0IGdhbWUnKTtcbiAgICAgICAgZ2FtZVNjcmVlbi5zaG93KCk7XG4gICAgICAgIHN0YXJ0U2NyZWVuLmhpZGUoKTtcbiAgICAgICAgdm9pY2VfMS5zZXRVcFVzZXIocGxheWVyTmFtZSk7XG4gICAgICAgIHZvaWNlXzEuc2F5U29tZXRoaW5nKHZvaWNlXzEuUEhSQVNFUy5IRUxMTyk7XG4gICAgICAgIHlpZWxkIGltYWdlQ2FwdHVyZV8xLnRha2VQaG90bygpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgYWxlcnQoZSk7XG4gICAgfVxufSk7XG53aW5kb3cub25sb2FkID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc29sZV8xLmVuYWJsZU1vYmlsZUNvbnNvbGUoKTtcbiAgICB5aWVsZCBpbml0QXBwKCk7XG59KTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgZGVmYXVsdFNldHRpbmdzID0ge1xuICAgIG1vdXNlT3BlbmluZ1RyZXNob2xkOiAwLjYsXG4gICAgbW91c2VDbG9zaW5nVHJlc2hvbGQ6IDAuNSxcbiAgICBoZWFkTW92ZW1lbnRTdGFydGVkVHJlc2hvbGQ6IDAuMTUsXG4gICAgaGVhZE1vdmVtZW50U3RvcHBlZFRyZXNob2xkOiAwLjA4LFxufTtcbmNsYXNzIEhlYWRDb250cm9sU2VydmljZSBleHRlbmRzIEV2ZW50VGFyZ2V0IHtcbiAgICBjb25zdHJ1Y3RvcihjYW52YXNJZCwgc2V0dGluZ3MpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5tb3ZlbWVudExvY2tzID0ge1xuICAgICAgICAgICAgdmVydGljYWw6IGZhbHNlLFxuICAgICAgICAgICAgaG9yaXpvbnRhbDogZmFsc2UsXG4gICAgICAgICAgICBtb3VzZU9wZW5lZDogZmFsc2UsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBpc0xvYWRlZDogZmFsc2UsXG4gICAgICAgICAgICBpc0RldGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGlzRW5hYmxlZDogZmFsc2UsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2wgPSBudWxsO1xuICAgICAgICB0aGlzLmN2ID0gbnVsbDtcbiAgICAgICAgdGhpcy52aWRlb1RleHR1cmUgPSBudWxsO1xuICAgICAgICB0aGlzLnZpZGVvVHJhbnNmb3JtTWF0MiA9IG51bGw7XG4gICAgICAgIHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0gPSBudWxsO1xuICAgICAgICB0aGlzLmhlYWRTZWFyY2hVbmlmb3JtWHlzID0gbnVsbDtcbiAgICAgICAgdGhpcy5oZWFkU2VhcmNoVW5pZm9ybVZpZGVvVHJhbnNmb3JtTWF0MiA9IG51bGw7XG4gICAgICAgIHRoaXMuaGFuZGxlTW91c2VPcGVuaW5nID0gKGRldGVjdFN0YXRlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZGV0ZWN0U3RhdGUucnkgPCAtMSAqIHRoaXMuc2V0dGluZ3MuaGVhZE1vdmVtZW50U3RhcnRlZFRyZXNob2xkIHx8IGRldGVjdFN0YXRlLnJ5ID4gdGhpcy5zZXR0aW5ncy5oZWFkTW92ZW1lbnRTdGFydGVkVHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICAvLyBIZWFkIHNob3VsZCBiZSBpbiB0aGUgY2VudGVyIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG1vdXRoT3BlbmluZyA9IChkZXRlY3RTdGF0ZS5leHByZXNzaW9uc1swXSAtIDAuMikgKiA1LjA7XG4gICAgICAgICAgICBtb3V0aE9wZW5pbmcgPSBNYXRoLm1pbihNYXRoLm1heChtb3V0aE9wZW5pbmcsIDApLCAxKTtcbiAgICAgICAgICAgIGlmIChtb3V0aE9wZW5pbmcgPiB0aGlzLnNldHRpbmdzLm1vdXNlT3BlbmluZ1RyZXNob2xkICYmICF0aGlzLm1vdmVtZW50TG9ja3MubW91c2VPcGVuZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVtZW50TG9ja3MubW91c2VPcGVuZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ21vdXNlIG9wZW5lZCcpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW91dGhPcGVuaW5nIDwgdGhpcy5zZXR0aW5ncy5tb3VzZUNsb3NpbmdUcmVzaG9sZCAmJiB0aGlzLm1vdmVtZW50TG9ja3MubW91c2VPcGVuZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVtZW50TG9ja3MubW91c2VPcGVuZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdtb3VzZSBjbG9zZWQnKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZU1vdmUgPSAobXYpID0+IHtcbiAgICAgICAgICAgIGlmIChtdi5yeCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQXhpc01vdmVtZW50KHsgYXhpczogJ3ZlcnRpY2FsJywgYXhpc1Bvc2l0aW9uOiBtdi5yeCwgbWF4VmFsdWU6ICdkb3duJywgbWluVmFsdWU6ICd1cCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobXYucnkgIT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUF4aXNNb3ZlbWVudCh7IGF4aXM6ICdob3Jpem9udGFsJywgYXhpc1Bvc2l0aW9uOiBtdi5yeSwgbWF4VmFsdWU6ICdsZWZ0JywgbWluVmFsdWU6ICdyaWdodCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlQXhpc01vdmVtZW50ID0gKHsgYXhpcywgYXhpc1Bvc2l0aW9uLCBtYXhWYWx1ZSwgbWluVmFsdWUsIH0pID0+IHtcbiAgICAgICAgICAgIGlmIChheGlzUG9zaXRpb24gPCAtMSAqIHRoaXMuc2V0dGluZ3MuaGVhZE1vdmVtZW50U3RhcnRlZFRyZXNob2xkICYmICF0aGlzLm1vdmVtZW50TG9ja3NbYXhpc10pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVtZW50TG9ja3NbYXhpc10gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQobWluVmFsdWUpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXhpc1Bvc2l0aW9uID4gdGhpcy5zZXR0aW5ncy5oZWFkTW92ZW1lbnRTdGFydGVkVHJlc2hvbGQgJiYgIXRoaXMubW92ZW1lbnRMb2Nrc1theGlzXSkge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZW1lbnRMb2Nrc1theGlzXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChtYXhWYWx1ZSkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChheGlzUG9zaXRpb24gPiAtMSAqIHRoaXMuc2V0dGluZ3MuaGVhZE1vdmVtZW50U3RvcHBlZFRyZXNob2xkICYmIGF4aXNQb3NpdGlvbiA8IHRoaXMuc2V0dGluZ3MuaGVhZE1vdmVtZW50U3RvcHBlZFRyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlbWVudExvY2tzW2F4aXNdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0U2V0dGluZ3MpLCBzZXR0aW5ncyk7XG4gICAgICAgIHdpbmRvdy5KRUVGQUNFRklMVEVSQVBJLmluaXQoe1xuICAgICAgICAgICAgY2FudmFzSWQ6IGNhbnZhc0lkLFxuICAgICAgICAgICAgTk5DUGF0aDogJy4vdmVuZG9yLycsXG4gICAgICAgICAgICBhbmltYXRlRGVsYXk6IDIwLFxuICAgICAgICAgICAgY2FsbGJhY2tSZWFkeTogKGVyckNvZGUsIGplZUZhY2VGaWx0ZXJPYmopID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyQ29kZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGVyckNvZGUgPSAnV0VCQ0FNX1VOQVZBSUxBQkxFJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLm9uQ2FtZXJhUGVyc21pc3Npb25GYWlsZWQgJiYgc2V0dGluZ3Mub25DYW1lcmFQZXJzbWlzc2lvbkZhaWxlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLm9uRXJyb3IobmV3IEVycm9yKGVyckNvZGUpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmdsID0gamVlRmFjZUZpbHRlck9ialsnR0wnXTtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZGVvVGV4dHVyZSA9IGplZUZhY2VGaWx0ZXJPYmpbJ3ZpZGVvVGV4dHVyZSddO1xuICAgICAgICAgICAgICAgIHRoaXMudmlkZW9UcmFuc2Zvcm1NYXQyID0gamVlRmFjZUZpbHRlck9ialsndmlkZW9UcmFuc2Zvcm1NYXQyJ107XG4gICAgICAgICAgICAgICAgdGhpcy5jdiA9IGplZUZhY2VGaWx0ZXJPYmpbJ2NhbnZhc0VsZW1lbnQnXTtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRIZWFkU2VhcmNoRHJhdygpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNMb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNldHRpbmdzLm9uUmVhZHkgJiYgc2V0dGluZ3Mub25SZWFkeSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIGNhbGxlZCBhdCBlYWNoIHJlbmRlciBpdGVyYXRpb24gKGRyYXdpbmcgbG9vcCk6XG4gICAgICAgICAgICBjYWxsYmFja1RyYWNrOiAoZGV0ZWN0U3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc3RhdGUuaXNFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3SGVhZFNlYXJjaChkZXRlY3RTdGF0ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVNb3ZlKGRldGVjdFN0YXRlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU1vdXNlT3BlbmluZyhkZXRlY3RTdGF0ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9nZ2xlKGlzRW5hYmxlZCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc0VuYWJsZWQgPT09IGlzRW5hYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZS5pc0VuYWJsZWQgPSBpc0VuYWJsZWQ7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb21waWxlU2hhZGVyKHNvdXJjZSwgZ2xUeXBlLCB0eXBlU3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGdsU2hhZGVyID0gdGhpcy5nbC5jcmVhdGVTaGFkZXIoZ2xUeXBlKTtcbiAgICAgICAgdGhpcy5nbC5zaGFkZXJTb3VyY2UoZ2xTaGFkZXIsIHNvdXJjZSk7XG4gICAgICAgIHRoaXMuZ2wuY29tcGlsZVNoYWRlcihnbFNoYWRlcik7XG4gICAgICAgIGlmICghdGhpcy5nbC5nZXRTaGFkZXJQYXJhbWV0ZXIoZ2xTaGFkZXIsIHRoaXMuZ2wuQ09NUElMRV9TVEFUVVMpKSB7XG4gICAgICAgICAgICBhbGVydCgnRVJST1IgSU4gJyArIHR5cGVTdHJpbmcgKyAnIFNIQURFUjogJyArIHRoaXMuZ2wuZ2V0U2hhZGVySW5mb0xvZyhnbFNoYWRlcikpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdsU2hhZGVyO1xuICAgIH1cbiAgICBpbml0SGVhZFNlYXJjaERyYXcoKSB7XG4gICAgICAgIC8vIGJ1aWxkIHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW06XG4gICAgICAgIGNvbnN0IHNoYWRlclZlcnRleFNvdXJjZSA9ICdcXG5cXFxuICAgICAgYXR0cmlidXRlIHZlYzIgYWF0X3Bvc2l0aW9uO1xcblxcXG4gICAgICB2YXJ5aW5nIHZlYzIgdlVWO1xcblxcXG4gICAgICBcXG5cXFxuICAgICAgdm9pZCBtYWluKHZvaWQpIHtcXG5cXFxuICAgICAgICBnbF9Qb3NpdGlvbiA9IHZlYzQoYWF0X3Bvc2l0aW9uLCAwLiwgMS4pO1xcblxcXG4gICAgICAgIHZVViA9IDAuNSArIDAuNSAqIGFhdF9wb3NpdGlvbjtcXG5cXFxuICAgICAgICB2VVYueCA9IDEuLXZVVi54OyAvLyBtaXJyb3IgZGlwbGF5XFxuXFxcbiAgICAgIH0nO1xuICAgICAgICBjb25zdCBzaGFkZXJGcmFnbWVudFNvdXJjZSA9ICdcXG5cXFxuICAgICAgcHJlY2lzaW9uIGxvd3AgZmxvYXQ7XFxuXFxcbiAgICAgIHZhcnlpbmcgdmVjMiB2VVY7XFxuXFxcbiAgICAgIFxcblxcXG4gICAgICB1bmlmb3JtIHNhbXBsZXIyRCBzYW1wbGVyVmlkZW87XFxuXFxcbiAgICAgIHVuaWZvcm0gbWF0MiB2aWRlb1RyYW5zZm9ybU1hdDI7XFxuXFxcbiAgICAgIHVuaWZvcm0gdmVjMyB1eHlzO1xcblxcXG4gICAgICBcXG5cXFxuICAgICAgdm9pZCBtYWluKHZvaWQpIHtcXG5cXFxuICAgICAgICB2ZWMyIHV2VmlkZW9DZW50ZXJlZCA9IDIuMCAqIHZpZGVvVHJhbnNmb3JtTWF0MiAqICh2VVYgLSAwLjUpO1xcblxcXG4gICAgICAgIHZlYzIgdXZWaWRlbyA9IHV2VmlkZW9DZW50ZXJlZCArIDAuNTtcXG5cXFxuICAgICAgICB2ZWMzIGNvbG9yVmlkZW8gPSB0ZXh0dXJlMkQoc2FtcGxlclZpZGVvLCB1dlZpZGVvKS5yZ2I7XFxuXFxcbiAgICAgICAgdmVjMiBwb3MgPSB2VVYqMi4tdmVjMigxLiwxLik7XFxuXFxcbiAgICAgICAgdmVjMiBpc0luc2lkZSA9IHN0ZXAodXh5cy54eS11eHlzLnoqdmVjMigxLiwxLiksIHBvcyk7XFxuXFxcbiAgICAgICAgaXNJbnNpZGUgKj0gc3RlcChwb3MsIHV4eXMueHkrdXh5cy56KnZlYzIoMS4sMS4pKTtcXG5cXFxuICAgICAgICB2ZWMyIGJsZW5kQ2VudGVyRmFjdG9yID0gYWJzKHBvcy11eHlzLnh5KSAvIHV4eXMuejtcXG5cXFxuICAgICAgICBmbG9hdCBhbHBoYSA9IGlzSW5zaWRlLnggKiBpc0luc2lkZS55ICogcG93KG1heChibGVuZENlbnRlckZhY3Rvci54LCBibGVuZENlbnRlckZhY3Rvci55KSwgMy4pO1xcblxcXG4gICAgICAgIHZlYzMgY29sb3IgPSBtaXgoY29sb3JWaWRlbywgdmVjMygwLiwwLjYsMS4pLCBhbHBoYSk7XFxuXFxcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNChjb2xvciwxLik7XFxuXFxcbiAgICAgIH0nO1xuICAgICAgICBjb25zdCBnbFNoYWRlclZlcnRleCA9IHRoaXMuY29tcGlsZVNoYWRlcihzaGFkZXJWZXJ0ZXhTb3VyY2UsIHRoaXMuZ2wuVkVSVEVYX1NIQURFUiwgJ1ZFUlRFWCcpO1xuICAgICAgICBjb25zdCBnbFNoYWRlckZyYWdtZW50ID0gdGhpcy5jb21waWxlU2hhZGVyKHNoYWRlckZyYWdtZW50U291cmNlLCB0aGlzLmdsLkZSQUdNRU5UX1NIQURFUiwgJ0ZSQUdNRU5UJyk7XG4gICAgICAgIHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0gPSB0aGlzLmdsLmNyZWF0ZVByb2dyYW0oKTtcbiAgICAgICAgdGhpcy5nbC5hdHRhY2hTaGFkZXIodGhpcy5nbEhlYWRTZWFyY2hEcmF3U2hhZGVyUHJvZ3JhbSwgZ2xTaGFkZXJWZXJ0ZXgpO1xuICAgICAgICB0aGlzLmdsLmF0dGFjaFNoYWRlcih0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtLCBnbFNoYWRlckZyYWdtZW50KTtcbiAgICAgICAgdGhpcy5nbC5saW5rUHJvZ3JhbSh0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtKTtcbiAgICAgICAgY29uc3Qgc2FtcGxlclZpZGVvID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5nbEhlYWRTZWFyY2hEcmF3U2hhZGVyUHJvZ3JhbSwgJ3NhbXBsZXJWaWRlbycpO1xuICAgICAgICB0aGlzLmhlYWRTZWFyY2hVbmlmb3JtWHlzID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5nbEhlYWRTZWFyY2hEcmF3U2hhZGVyUHJvZ3JhbSwgJ3V4eXMnKTtcbiAgICAgICAgdGhpcy5oZWFkU2VhcmNoVW5pZm9ybVZpZGVvVHJhbnNmb3JtTWF0MiA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0sICd2aWRlb1RyYW5zZm9ybU1hdDInKTtcbiAgICAgICAgdGhpcy5nbC51c2VQcm9ncmFtKHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0pO1xuICAgICAgICB0aGlzLmdsLnVuaWZvcm0xaShzYW1wbGVyVmlkZW8sIDApO1xuICAgIH1cbiAgICBkcmF3SGVhZFNlYXJjaChkZXRlY3RTdGF0ZSkge1xuICAgICAgICAvLyB1bmJpbmQgdGhlIGN1cnJlbnQgRkJPIGFuZCBzZXQgdGhlIHZpZXdwb3J0IGFzIHRoZSB3aG9sZSBjYW52YXM6XG4gICAgICAgIHRoaXMuZ2wudmlld3BvcnQoMCwgMCwgdGhpcy5jdi53aWR0aCwgdGhpcy5jdi5oZWlnaHQpO1xuICAgICAgICAvLyB1c2UgdGhlIGhlYWQgZHJhdyBzaGFkZXIgcHJvZ3JhbSBhbmQgc3luYyB1bmlmb3JtczpcbiAgICAgICAgdGhpcy5nbC51c2VQcm9ncmFtKHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0pO1xuICAgICAgICB0aGlzLmdsLmFjdGl2ZVRleHR1cmUodGhpcy5nbC5URVhUVVJFMCk7XG4gICAgICAgIHRoaXMuZ2wuYmluZFRleHR1cmUodGhpcy5nbC5URVhUVVJFXzJELCB0aGlzLnZpZGVvVGV4dHVyZSk7XG4gICAgICAgIHRoaXMuZ2wudW5pZm9ybTNmKHRoaXMuaGVhZFNlYXJjaFVuaWZvcm1YeXMsIGRldGVjdFN0YXRlLngsIGRldGVjdFN0YXRlLnksIGRldGVjdFN0YXRlLnMpO1xuICAgICAgICB0aGlzLmdsLnVuaWZvcm1NYXRyaXgyZnYodGhpcy5oZWFkU2VhcmNoVW5pZm9ybVZpZGVvVHJhbnNmb3JtTWF0MiwgZmFsc2UsIHRoaXMudmlkZW9UcmFuc2Zvcm1NYXQyKTtcbiAgICAgICAgLy8gZHJhdyB0aGUgc3F1YXJlIGxvb2tpbmcgZm9yIHRoZSBoZWFkXG4gICAgICAgIC8vIHRoZSBWQk8gZmlsbGluZyB0aGUgd2hvbGUgc2NyZWVuIGlzIHN0aWxsIGJvdW5kIHRvIHRoZSBjb250ZXh0XG4gICAgICAgIC8vIGZpbGwgdGhlIHZpZXdQb3J0OlxuICAgICAgICB0aGlzLmdsLmRyYXdFbGVtZW50cyh0aGlzLmdsLlRSSUFOR0xFUywgMywgdGhpcy5nbC5VTlNJR05FRF9TSE9SVCwgMCk7XG4gICAgfVxufVxuZXhwb3J0cy5kZWZhdWx0ID0gSGVhZENvbnRyb2xTZXJ2aWNlO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmluaXRIZWFkQ29udHJvbCA9IGV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbmNvbnN0IEhlYWRDb250cm9sU2VydmljZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0hlYWRDb250cm9sU2VydmljZVwiKSk7XG52YXIgSGVhZENvbnRyb2xTZXJ2aWNlXzIgPSByZXF1aXJlKFwiLi9IZWFkQ29udHJvbFNlcnZpY2VcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2ltcG9ydERlZmF1bHQoSGVhZENvbnRyb2xTZXJ2aWNlXzIpLmRlZmF1bHQ7IH0gfSk7XG5jb25zdCBpbml0SGVhZENvbnRyb2wgPSAoeyBvbk1vdmVtZW50LCBvbkNhbWVyYVBlcnNtaXNzaW9uRmFpbGVkLCB9KSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgaGVhZENvbnRyb2xTZXJ2aWNlID0gbmV3IEhlYWRDb250cm9sU2VydmljZV8xLmRlZmF1bHQoJ2hlYWQtcHJldmlldycsIHtcbiAgICAgICAgICAgIG9uUmVhZHk6IHJlc29sdmUsXG4gICAgICAgICAgICBvbkNhbWVyYVBlcnNtaXNzaW9uRmFpbGVkOiBvbkNhbWVyYVBlcnNtaXNzaW9uRmFpbGVkLFxuICAgICAgICAgICAgb25FcnJvcjogcmVqZWN0LFxuICAgICAgICB9KTtcbiAgICAgICAgaGVhZENvbnRyb2xTZXJ2aWNlLnRvZ2dsZSh0cnVlKTtcbiAgICAgICAgaGVhZENvbnRyb2xTZXJ2aWNlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlIG9wZW5lZCcsICgpID0+IG9uTW92ZW1lbnQoJ21vdXNlIG9wZW5lZCcpKTtcbiAgICAgICAgaGVhZENvbnRyb2xTZXJ2aWNlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlIGNsb3NlZCcsICgpID0+IG9uTW92ZW1lbnQoJ21vdXNlIGNsb3NlZCcpKTtcbiAgICAgICAgaGVhZENvbnRyb2xTZXJ2aWNlLmFkZEV2ZW50TGlzdGVuZXIoJ2xlZnQnLCAoKSA9PiBvbk1vdmVtZW50KCdsZWZ0JykpO1xuICAgICAgICBoZWFkQ29udHJvbFNlcnZpY2UuYWRkRXZlbnRMaXN0ZW5lcigncmlnaHQnLCAoKSA9PiBvbk1vdmVtZW50KCdyaWdodCcpKTtcbiAgICAgICAgaGVhZENvbnRyb2xTZXJ2aWNlLmFkZEV2ZW50TGlzdGVuZXIoJ3VwJywgKCkgPT4gb25Nb3ZlbWVudCgndXAnKSk7XG4gICAgICAgIGhlYWRDb250cm9sU2VydmljZS5hZGRFdmVudExpc3RlbmVyKCdkb3duJywgKCkgPT4gb25Nb3ZlbWVudCgnZG93bicpKTtcbiAgICB9KTtcbn07XG5leHBvcnRzLmluaXRIZWFkQ29udHJvbCA9IGluaXRIZWFkQ29udHJvbDtcbiIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaWYgKCEoJ2NyZWF0ZUltYWdlQml0bWFwJyBpbiB3aW5kb3cpKSB7XG4gICAgd2luZG93LmNyZWF0ZUltYWdlQml0bWFwID0gZnVuY3Rpb24gKGJsb2IpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgICAgIGltZy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGltZy5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG59XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5pbml0SW1hZ2VDYXB0dXJlID0gZXhwb3J0cy50YWtlUGhvdG8gPSB2b2lkIDA7XG5yZXF1aXJlKFwiaW1hZ2UtY2FwdHVyZVwiKTtcbnJlcXVpcmUoXCIuL2JpdG1hcFBvbHlmaWxsLnRzXCIpO1xubGV0IGltYWdlQ2FwdHVyZTtcbmxldCBpc0luaXQgPSBmYWxzZTtcbmNvbnN0IHRha2VQaG90byA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIGlmICghaW1hZ2VDYXB0dXJlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgeWllbGQgaW1hZ2VDYXB0dXJlXG4gICAgICAgIC50YWtlUGhvdG8oKVxuICAgICAgICAudGhlbigoYmxvYikgPT4gY3JlYXRlSW1hZ2VCaXRtYXAoYmxvYikpXG4gICAgICAgIC50aGVuKChpbWFnZUJpdG1hcCkgPT4ge1xuICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFrZVBob3RvQ2FudmFzJyk7XG4gICAgICAgIGNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgZHJhd0NhbnZhcyhjYW52YXMsIGltYWdlQml0bWFwKTtcbiAgICAgICAgLy9jYW52YXMudG9CbG9iKGFzeW5jIChibG9iKSA9PiB7XG4gICAgICAgIC8vICB0cnkge1xuICAgICAgICAvLyAgICBhd2FpdCBjcmVhdGVGaWxlKGJsb2IpO1xuICAgICAgICAvLyAgICBhd2FpdCByZWFkRmlsZSgpO1xuICAgICAgICAvLyAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyAgICB0aHJvdyBlO1xuICAgICAgICAvLyAgfVxuICAgICAgICAvL30pO1xuICAgIH0pO1xufSk7XG5leHBvcnRzLnRha2VQaG90byA9IHRha2VQaG90bztcbmZ1bmN0aW9uIGRyYXdDYW52YXMoY2FudmFzLCBpbWcpIHtcbiAgICBjYW52YXMud2lkdGggPSBnZXRDb21wdXRlZFN0eWxlKGNhbnZhcykud2lkdGguc3BsaXQoJ3B4JylbMF07XG4gICAgY2FudmFzLmhlaWdodCA9IGdldENvbXB1dGVkU3R5bGUoY2FudmFzKS5oZWlnaHQuc3BsaXQoJ3B4JylbMF07XG4gICAgbGV0IHJhdGlvID0gTWF0aC5taW4oY2FudmFzLndpZHRoIC8gaW1nLndpZHRoLCBjYW52YXMuaGVpZ2h0IC8gaW1nLmhlaWdodCk7XG4gICAgbGV0IHggPSAoY2FudmFzLndpZHRoIC0gaW1nLndpZHRoICogcmF0aW8pIC8gMjtcbiAgICBsZXQgeSA9IChjYW52YXMuaGVpZ2h0IC0gaW1nLmhlaWdodCAqIHJhdGlvKSAvIDI7XG4gICAgY2FudmFzLmdldENvbnRleHQoJzJkJykuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgY2FudmFzLmdldENvbnRleHQoJzJkJykuZHJhd0ltYWdlKGltZywgMCwgMCwgaW1nLndpZHRoLCBpbWcuaGVpZ2h0LCB4LCB5LCBpbWcud2lkdGggKiByYXRpbywgaW1nLmhlaWdodCAqIHJhdGlvKTtcbn1cbmNvbnN0IGluaXRJbWFnZUNhcHR1cmUgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICBpZiAoaXNJbml0KSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgaXNJbml0ID0gdHJ1ZTtcbiAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlc1xuICAgICAgICAuZ2V0VXNlck1lZGlhKHsgdmlkZW86IHRydWUgfSlcbiAgICAgICAgLnRoZW4oKG1lZGlhU3RyZWFtKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0cmFjayA9IG1lZGlhU3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF07XG4gICAgICAgICAgICBpbWFnZUNhcHR1cmUgPSBuZXcgSW1hZ2VDYXB0dXJlKHRyYWNrKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbWFnZSBjYXB0dXJlIGluaXRpZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgIGFsZXJ0KCdJbWFnZSBjYXB0dXJlIGlzIG5vdCBzdXBwb3J0ZWQgb24geW91ciBkZXZpY2UgOignKTtcbiAgICB9KTtcbn0pO1xuZXhwb3J0cy5pbml0SW1hZ2VDYXB0dXJlID0gaW5pdEltYWdlQ2FwdHVyZTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnNheVNvbWV0aGluZyA9IGV4cG9ydHMuc2V0VXBVc2VyID0gZXhwb3J0cy5QSFJBU0VTID0gZXhwb3J0cy5pbml0Vm9pY2VTZXJ2aWNlID0gdm9pZCAwO1xubGV0IFZPSUNFO1xuY29uc3QgaW5pdFZvaWNlU2VydmljZSA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIFZPSUNFID0gd2luZG93LnNwZWVjaFN5bnRoZXNpcy5nZXRWb2ljZXMoKS5maW5kKCh7IGxhbmcgfSkgPT4gbGFuZyA9PT0gJ2VuLUdCJyk7XG4gICAgICAgICAgICBpZiAoIVZPSUNFKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5pbml0Vm9pY2VTZXJ2aWNlKCkudGhlbihyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLmxvZygndm9pY2UgaW5pdCcpO1xuICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfSwgNTAwKTtcbiAgICB9KTtcbn0pO1xuZXhwb3J0cy5pbml0Vm9pY2VTZXJ2aWNlID0gaW5pdFZvaWNlU2VydmljZTtcbmV4cG9ydHMuUEhSQVNFUyA9IHtcbiAgICBIRUxMTzogJ2BIaSwgJXVzZXJuYW1lJS4gSGF2ZSBhIGdvb2QgZ2FtZScsXG4gICAgUklHSFQ6ICdHb29kIHJpZ2h0IHR1cm4sICV1c2VybmFtZSUnLFxufTtcbmxldCB1c2VyTmFtZSA9ICcnO1xuY29uc3Qgc2V0VXBVc2VyID0gKG5hbWUpID0+IHtcbiAgICB1c2VyTmFtZSA9IG5hbWU7XG59O1xuZXhwb3J0cy5zZXRVcFVzZXIgPSBzZXRVcFVzZXI7XG5jb25zdCBzYXlTb21ldGhpbmcgPSAodGV4dCkgPT4ge1xuICAgIGlmICghVk9JQ0UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB1dHRlcmFuY2UgPSBuZXcgU3BlZWNoU3ludGhlc2lzVXR0ZXJhbmNlKHRleHQucmVwbGFjZSgnJXVzZXJuYW1lJScsIHVzZXJOYW1lKSk7XG4gICAgdXR0ZXJhbmNlLnZvaWNlID0gVk9JQ0U7XG4gICAgdXR0ZXJhbmNlLnZvbHVtZSA9IDE7XG4gICAgdXR0ZXJhbmNlLnBpdGNoID0gMTtcbiAgICB1dHRlcmFuY2UucmF0ZSA9IDE7XG4gICAgc3BlZWNoU3ludGhlc2lzLmNhbmNlbCgpO1xuICAgIHNwZWVjaFN5bnRoZXNpcy5zcGVhayh1dHRlcmFuY2UpO1xufTtcbmV4cG9ydHMuc2F5U29tZXRoaW5nID0gc2F5U29tZXRoaW5nO1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxuX193ZWJwYWNrX3JlcXVpcmVfXyg2MDcpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==