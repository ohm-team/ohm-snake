/*! For license information please see main.c5f3f785cf20f60145d5.js.LICENSE.txt */
!function(){var e={608:function(e){var t,o,n,i,a;t=console.log,o=console.warn,n=console.error,i=console.debug,a={unbind:function(){console.log=t,console.warn=o,console.error=n,console.debug=i},bind:function(e,a){if("function"!=typeof e)return console.error("You must pass a valid callback function."),!1;a=Boolean(a);const r="info",s="warn",d="error",c="debug";console.log=console.info=function(){t&&(a||t.call(console,...arguments),e(r,arguments))},console.warn=function(){o&&(a||o.call(console,...arguments),e(s,arguments))},console.error=function(){n&&(a||n.call(console,...arguments),e(d,arguments))},console.debug=function(){i&&(a||i.call(console,...arguments),e(c,arguments))}}},void 0!==e.exports?e.exports=a:window&&"object"==typeof window?window.ConsoleSubscriber=a:console.error("Failed to export module.")},505:function(e,t,o){"use strict";o.r(t),o.d(t,{ImageCapture:function(){return n}});let n=window.ImageCapture;void 0===n&&(n=class{constructor(e){if("video"!==e.kind)throw new DOMException("NotSupportedError");this._videoStreamTrack=e,"readyState"in this._videoStreamTrack||(this._videoStreamTrack.readyState="live"),this._previewStream=new MediaStream([e]),this.videoElement=document.createElement("video"),this.videoElementPlaying=new Promise((e=>{this.videoElement.addEventListener("playing",e)})),HTMLMediaElement?this.videoElement.srcObject=this._previewStream:this.videoElement.src=URL.createObjectURL(this._previewStream),this.videoElement.muted=!0,this.videoElement.setAttribute("playsinline",""),this.videoElement.play(),this.canvasElement=document.createElement("canvas"),this.canvas2dContext=this.canvasElement.getContext("2d")}get videoStreamTrack(){return this._videoStreamTrack}getPhotoCapabilities(){return new Promise((function(e,t){const o={current:0,min:0,max:0};e({exposureCompensation:o,exposureMode:"none",fillLightMode:"none",focusMode:"none",imageHeight:o,imageWidth:o,iso:o,redEyeReduction:!1,whiteBalanceMode:"none",zoom:o}),t(new DOMException("OperationError"))}))}setOptions(e={}){return new Promise((function(e,t){}))}takePhoto(){const e=this;return new Promise((function(t,o){if("live"!==e._videoStreamTrack.readyState)return o(new DOMException("InvalidStateError"));e.videoElementPlaying.then((()=>{try{e.canvasElement.width=e.videoElement.videoWidth,e.canvasElement.height=e.videoElement.videoHeight,e.canvas2dContext.drawImage(e.videoElement,0,0),e.canvasElement.toBlob(t)}catch(e){o(new DOMException("UnknownError"))}}))}))}grabFrame(){const e=this;return new Promise((function(t,o){if("live"!==e._videoStreamTrack.readyState)return o(new DOMException("InvalidStateError"));e.videoElementPlaying.then((()=>{try{e.canvasElement.width=e.videoElement.videoWidth,e.canvasElement.height=e.videoElement.videoHeight,e.canvas2dContext.drawImage(e.videoElement,0,0),t(window.createImageBitmap(e.canvasElement))}catch(e){o(new DOMException("UnknownError"))}}))}))}}),window.ImageCapture=n},90:function(e,t,o){"use strict";o.r(t)},688:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.enableMobileConsole=void 0;const i=n(o(608));t.enableMobileConsole=()=>{const e=[];i.default.bind(((t,o)=>{5===e.length&&e.shift(),e.push({category:t,message:o[0]}),document.getElementById("console").innerHTML=e.map((e=>`<p>${e.message}</p>`)).join("")}))}},203:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},607:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=o(688),a=o(341),r=o(717),s=o(614);o(203),o(90);const d=$("#startButton"),c=$("#preloader"),l=$("#start"),h=$("#game"),u=$("#nameInput"),m=e=>n(void 0,void 0,void 0,(function*(){try{console.log("start game"),h.show(),l.hide(),s.setUpUser(e),s.saySomething(s.PHRASES.HELLO),yield r.takePhoto()}catch(e){alert(e)}}));window.onload=()=>n(void 0,void 0,void 0,(function*(){i.enableMobileConsole(),yield n(void 0,void 0,void 0,(function*(){c.show(),h.hide(),l.hide(),yield n(void 0,void 0,void 0,(function*(){return Promise.all([r.initImageCapture(),s.initVoiceService(),a.initHeadControl()]).then((()=>{c.hide(),l.show()})).catch((e=>{console.log(e)}))})),u.on("input",(()=>{u.val()?d.prop("disabled",!1):d.prop("disabled",!0)})),d.click((()=>n(void 0,void 0,void 0,(function*(){yield m(u.val())}))))}))}))},800:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o={mouseOpeningTreshold:.6,mouseClosingTreshold:.5,headMovementStartedTreshold:.15,headMovementStoppedTreshold:.08};class n extends EventTarget{constructor(e,t){super(),this.movementLocks={vertical:!1,horizontal:!1,mouseOpened:!1},this.state={isLoaded:!1,isDetected:!1,isEnabled:!1},this.gl=null,this.cv=null,this.videoTexture=null,this.videoTransformMat2=null,this.glHeadSearchDrawShaderProgram=null,this.headSearchUniformXys=null,this.headSearchUniformVideoTransformMat2=null,this.handleMouseOpening=e=>{if(e.ry<-1*this.settings.headMovementStartedTreshold||e.ry>this.settings.headMovementStartedTreshold)return;let t=5*(e.expressions[0]-.2);return t=Math.min(Math.max(t,0),1),t>this.settings.mouseOpeningTreshold&&!this.movementLocks.mouseOpened?(this.movementLocks.mouseOpened=!0,void this.dispatchEvent(new Event("mouse opened"))):t<this.settings.mouseClosingTreshold&&this.movementLocks.mouseOpened?(this.movementLocks.mouseOpened=!1,void this.dispatchEvent(new Event("mouse closed"))):void 0},this.handleMove=e=>{0!==e.rx&&this.handleAxisMovement({axis:"vertical",axisPosition:e.rx,maxValue:"down",minValue:"up"}),0!==e.ry&&this.handleAxisMovement({axis:"horizontal",axisPosition:e.ry,maxValue:"left",minValue:"right"})},this.handleAxisMovement=({axis:e,axisPosition:t,maxValue:o,minValue:n})=>t<-1*this.settings.headMovementStartedTreshold&&!this.movementLocks[e]?(this.movementLocks[e]=!0,void this.dispatchEvent(new Event(n))):t>this.settings.headMovementStartedTreshold&&!this.movementLocks[e]?(this.movementLocks[e]=!0,void this.dispatchEvent(new Event(o))):void(t>-1*this.settings.headMovementStoppedTreshold&&t<this.settings.headMovementStoppedTreshold&&(this.movementLocks[e]=!1)),this.settings=Object.assign(Object.assign({},o),t),window.JEEFACEFILTERAPI.init({canvasId:e,NNCPath:"./vendor/",animateDelay:20,callbackReady:(e,o)=>{if(e)return(e="WEBCAM_UNAVAILABLE")?void(t.onCameraPersmissionFailed&&t.onCameraPersmissionFailed()):void console.error("AN ERROR HAPPENS. SORRY BRO :( . ERR =",e);this.gl=o.GL,this.videoTexture=o.videoTexture,this.videoTransformMat2=o.videoTransformMat2,this.cv=o.canvasElement,this.initHeadSearchDraw(),this.state.isLoaded=!0,t.onReady&&t.onReady()},callbackTrack:e=>{this.state.isEnabled&&(this.drawHeadSearch(e),this.handleMove(e),this.handleMouseOpening(e))}})}toggle(e){return this.state.isEnabled===e||(this.state.isEnabled=e),!0}compileShader(e,t,o){const n=this.gl.createShader(t);return this.gl.shaderSource(n,e),this.gl.compileShader(n),this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)?n:(alert("ERROR IN "+o+" SHADER: "+this.gl.getShaderInfoLog(n)),null)}initHeadSearchDraw(){const e=this.compileShader("\n      attribute vec2 aat_position;\n      varying vec2 vUV;\n      \n      void main(void) {\n        gl_Position = vec4(aat_position, 0., 1.);\n        vUV = 0.5 + 0.5 * aat_position;\n        vUV.x = 1.-vUV.x; // mirror diplay\n      }",this.gl.VERTEX_SHADER,"VERTEX"),t=this.compileShader("\n      precision lowp float;\n      varying vec2 vUV;\n      \n      uniform sampler2D samplerVideo;\n      uniform mat2 videoTransformMat2;\n      uniform vec3 uxys;\n      \n      void main(void) {\n        vec2 uvVideoCentered = 2.0 * videoTransformMat2 * (vUV - 0.5);\n        vec2 uvVideo = uvVideoCentered + 0.5;\n        vec3 colorVideo = texture2D(samplerVideo, uvVideo).rgb;\n        vec2 pos = vUV*2.-vec2(1.,1.);\n        vec2 isInside = step(uxys.xy-uxys.z*vec2(1.,1.), pos);\n        isInside *= step(pos, uxys.xy+uxys.z*vec2(1.,1.));\n        vec2 blendCenterFactor = abs(pos-uxys.xy) / uxys.z;\n        float alpha = isInside.x * isInside.y * pow(max(blendCenterFactor.x, blendCenterFactor.y), 3.);\n        vec3 color = mix(colorVideo, vec3(0.,0.6,1.), alpha);\n        gl_FragColor = vec4(color,1.);\n      }",this.gl.FRAGMENT_SHADER,"FRAGMENT");this.glHeadSearchDrawShaderProgram=this.gl.createProgram(),this.gl.attachShader(this.glHeadSearchDrawShaderProgram,e),this.gl.attachShader(this.glHeadSearchDrawShaderProgram,t),this.gl.linkProgram(this.glHeadSearchDrawShaderProgram);const o=this.gl.getUniformLocation(this.glHeadSearchDrawShaderProgram,"samplerVideo");this.headSearchUniformXys=this.gl.getUniformLocation(this.glHeadSearchDrawShaderProgram,"uxys"),this.headSearchUniformVideoTransformMat2=this.gl.getUniformLocation(this.glHeadSearchDrawShaderProgram,"videoTransformMat2"),this.gl.useProgram(this.glHeadSearchDrawShaderProgram),this.gl.uniform1i(o,0)}drawHeadSearch(e){this.gl.viewport(0,0,this.cv.width,this.cv.height),this.gl.useProgram(this.glHeadSearchDrawShaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.videoTexture),this.gl.uniform3f(this.headSearchUniformXys,e.x,e.y,e.s),this.gl.uniformMatrix2fv(this.headSearchUniformVideoTransformMat2,!1,this.videoTransformMat2),this.gl.drawElements(this.gl.TRIANGLES,3,this.gl.UNSIGNED_SHORT,0)}}t.default=n},341:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.initHeadControl=t.default=void 0;const i=n(o(800));var a=o(800);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}}),t.initHeadControl=()=>new Promise(((e,t)=>{const o=new i.default("head-preview",{onReady:()=>{console.log("head control is ready"),e()},onCameraPersmissionFailed:()=>alert("This game is head-controlled. You need to enable camera to play the game.")});o.toggle(!0),o.addEventListener("mouse opened",(()=>console.log("mouse opened"))),o.addEventListener("mouse closed",(()=>console.log("mouse closed"))),o.addEventListener("left",(()=>console.log("left"))),o.addEventListener("right",(()=>console.log("right")))}))},8:function(){var e=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}d((n=n.apply(e,t||[])).next())}))};"createImageBitmap"in window||(window.createImageBitmap=function(t){return e(this,void 0,void 0,(function*(){return new Promise(((e,o)=>{let n=document.createElement("img");n.addEventListener("load",(function(){e(this)})),n.src=URL.createObjectURL(t)}))}))})},717:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}d((n=n.apply(e,t||[])).next())}))};let i;Object.defineProperty(t,"__esModule",{value:!0}),t.initImageCapture=t.takePhoto=void 0,o(505),o(8);let a=!1;t.takePhoto=()=>n(void 0,void 0,void 0,(function*(){i&&(yield i.takePhoto().then((e=>createImageBitmap(e))).then((e=>{const t=document.querySelector("#takePhotoCanvas");t.style.display="block",function(e,t){e.width=getComputedStyle(e).width.split("px")[0],e.height=getComputedStyle(e).height.split("px")[0];let o=Math.min(e.width/t.width,e.height/t.height),n=(e.width-t.width*o)/2,i=(e.height-t.height*o)/2;e.getContext("2d").clearRect(0,0,e.width,e.height),e.getContext("2d").drawImage(t,0,0,t.width,t.height,n,i,t.width*o,t.height*o)}(t,e)})))})),t.initImageCapture=()=>n(void 0,void 0,void 0,(function*(){return a?Promise.resolve():(a=!0,navigator.mediaDevices.getUserMedia({video:!0}).then((e=>{try{const t=e.getVideoTracks()[0];i=new ImageCapture(t),console.log("image capture initied")}catch(e){throw e}})).catch((()=>{alert("Image capture is not supported on your device :(")})))}))},614:function(e,t){"use strict";var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}d((n=n.apply(e,t||[])).next())}))};let n;Object.defineProperty(t,"__esModule",{value:!0}),t.saySomething=t.setUpUser=t.PHRASES=t.initVoiceService=void 0,t.initVoiceService=()=>o(void 0,void 0,void 0,(function*(){return new Promise((e=>{setTimeout((()=>{n=window.speechSynthesis.getVoices().find((({lang:e})=>"en-GB"===e)),n?(console.log("voice init"),e(!0)):t.initVoiceService().then(e)}),500)}))})),t.PHRASES={HELLO:"`Hi, %username%. Have a good game",RIGHT:"Good right turn, %username%"};let i="";t.setUpUser=e=>{i=e},t.saySomething=e=>{if(!n)return;const t=new SpeechSynthesisUtterance(e.replace("%username%",i));t.voice=n,t.volume=1,t.pitch=1,t.rate=1,speechSynthesis.cancel(),speechSynthesis.speak(t)}}},t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o(607)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vaG0tc25ha2UvLi9ub2RlX21vZHVsZXMvY29uc29sZS1zdWJzY3JpYmVyL2luZGV4LmpzIiwid2VicGFjazovL29obS1zbmFrZS8uL25vZGVfbW9kdWxlcy9pbWFnZS1jYXB0dXJlL3NyYy9pbWFnZWNhcHR1cmUuanMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL2NvbnNvbGUudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL2RlY2xhcmUudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL29obS1zbmFrZS8uL3NyYy9zZXJ2aWNlcy9IZWFkQ29udHJvbFNlcnZpY2UvSGVhZENvbnRyb2xTZXJ2aWNlLnRzIiwid2VicGFjazovL29obS1zbmFrZS8uL3NyYy9zZXJ2aWNlcy9IZWFkQ29udHJvbFNlcnZpY2UvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL3NlcnZpY2VzL0ltYWdlQ2FwdHVyZVNlcnZpY2UvYml0bWFwUG9seWZpbGwudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlLy4vc3JjL3NlcnZpY2VzL0ltYWdlQ2FwdHVyZVNlcnZpY2UvaW1hZ2VDYXB0dXJlLnRzIiwid2VicGFjazovL29obS1zbmFrZS8uL3NyYy9zZXJ2aWNlcy9Wb2ljZVNlcnZpY2Uvdm9pY2UudHMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL29obS1zbmFrZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vb2htLXNuYWtlL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6WyJfbG9nIiwiX3dhcm4iLCJfZXJyb3IiLCJfZGVidWciLCJDb25zb2xlU3Vic2NyaWJlciIsImNvbnNvbGUiLCJsb2ciLCJ3YXJuIiwiZXJyb3IiLCJkZWJ1ZyIsInVuYmluZCIsImJpbmQiLCJjYiIsInByZXZlbnRMb2dnaW5nIiwiQm9vbGVhbiIsIkNBVEVHT1JZX0lORk8iLCJDQVRFR09SWV9XQVJOIiwiQ0FURUdPUllfRVJST1IiLCJDQVRFR09SWV9ERUJVRyIsImluZm8iLCJjYWxsIiwiYXJndW1lbnRzIiwibW9kdWxlIiwiZXhwb3J0cyIsIndpbmRvdyIsIkltYWdlQ2FwdHVyZSIsInZpZGVvU3RyZWFtVHJhY2siLCJraW5kIiwiRE9NRXhjZXB0aW9uIiwidGhpcyIsIl92aWRlb1N0cmVhbVRyYWNrIiwicmVhZHlTdGF0ZSIsIl9wcmV2aWV3U3RyZWFtIiwiTWVkaWFTdHJlYW0iLCJ2aWRlb0VsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ2aWRlb0VsZW1lbnRQbGF5aW5nIiwiUHJvbWlzZSIsInJlc29sdmUiLCJhZGRFdmVudExpc3RlbmVyIiwiSFRNTE1lZGlhRWxlbWVudCIsInNyY09iamVjdCIsInNyYyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIm11dGVkIiwic2V0QXR0cmlidXRlIiwicGxheSIsImNhbnZhc0VsZW1lbnQiLCJjYW52YXMyZENvbnRleHQiLCJnZXRDb250ZXh0IiwicmVqZWN0IiwiTWVkaWFTZXR0aW5nc1JhbmdlIiwiY3VycmVudCIsIm1pbiIsIm1heCIsImV4cG9zdXJlQ29tcGVuc2F0aW9uIiwiZXhwb3N1cmVNb2RlIiwiZmlsbExpZ2h0TW9kZSIsImZvY3VzTW9kZSIsImltYWdlSGVpZ2h0IiwiaW1hZ2VXaWR0aCIsImlzbyIsInJlZEV5ZVJlZHVjdGlvbiIsIndoaXRlQmFsYW5jZU1vZGUiLCJ6b29tIiwicGhvdG9TZXR0aW5ncyIsInNlbGYiLCJ0aGVuIiwid2lkdGgiLCJ2aWRlb1dpZHRoIiwiaGVpZ2h0IiwidmlkZW9IZWlnaHQiLCJkcmF3SW1hZ2UiLCJ0b0Jsb2IiLCJjcmVhdGVJbWFnZUJpdG1hcCIsIl9faW1wb3J0RGVmYXVsdCIsIm1vZCIsIl9fZXNNb2R1bGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiZW5hYmxlTW9iaWxlQ29uc29sZSIsImNvbnNvbGVfc3Vic2NyaWJlcl8xIiwiYnVmZmVyIiwiZGVmYXVsdCIsImNhdGVnb3J5IiwiYXJncyIsImxlbmd0aCIsInNoaWZ0IiwicHVzaCIsIm1lc3NhZ2UiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsIm1hcCIsIm0iLCJqb2luIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiZnVsZmlsbGVkIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwiYXBwbHkiLCJjb25zb2xlXzEiLCJIZWFkQ29udHJvbFNlcnZpY2VfMSIsImltYWdlQ2FwdHVyZV8xIiwidm9pY2VfMSIsInN0YXJ0QnV0dG9uIiwiJCIsInByZWxvYWRlciIsInN0YXJ0U2NyZWVuIiwiZ2FtZVNjcmVlbiIsIm5hbWVJbnB1dCIsInN0YXJ0R2FtZSIsInBsYXllck5hbWUiLCJzaG93IiwiaGlkZSIsInNldFVwVXNlciIsInNheVNvbWV0aGluZyIsIlBIUkFTRVMiLCJIRUxMTyIsInRha2VQaG90byIsImFsZXJ0Iiwib25sb2FkIiwiYWxsIiwiaW5pdEltYWdlQ2FwdHVyZSIsImluaXRWb2ljZVNlcnZpY2UiLCJpbml0SGVhZENvbnRyb2wiLCJjYXRjaCIsIm9uIiwidmFsIiwicHJvcCIsImNsaWNrIiwiZGVmYXVsdFNldHRpbmdzIiwibW91c2VPcGVuaW5nVHJlc2hvbGQiLCJtb3VzZUNsb3NpbmdUcmVzaG9sZCIsImhlYWRNb3ZlbWVudFN0YXJ0ZWRUcmVzaG9sZCIsImhlYWRNb3ZlbWVudFN0b3BwZWRUcmVzaG9sZCIsIkhlYWRDb250cm9sU2VydmljZSIsIkV2ZW50VGFyZ2V0IiwiY2FudmFzSWQiLCJzZXR0aW5ncyIsInN1cGVyIiwibW92ZW1lbnRMb2NrcyIsInZlcnRpY2FsIiwiaG9yaXpvbnRhbCIsIm1vdXNlT3BlbmVkIiwic3RhdGUiLCJpc0xvYWRlZCIsImlzRGV0ZWN0ZWQiLCJpc0VuYWJsZWQiLCJnbCIsImN2IiwidmlkZW9UZXh0dXJlIiwidmlkZW9UcmFuc2Zvcm1NYXQyIiwiZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0iLCJoZWFkU2VhcmNoVW5pZm9ybVh5cyIsImhlYWRTZWFyY2hVbmlmb3JtVmlkZW9UcmFuc2Zvcm1NYXQyIiwiaGFuZGxlTW91c2VPcGVuaW5nIiwiZGV0ZWN0U3RhdGUiLCJyeSIsIm1vdXRoT3BlbmluZyIsImV4cHJlc3Npb25zIiwiTWF0aCIsImRpc3BhdGNoRXZlbnQiLCJFdmVudCIsImhhbmRsZU1vdmUiLCJtdiIsInJ4IiwiaGFuZGxlQXhpc01vdmVtZW50IiwiYXhpcyIsImF4aXNQb3NpdGlvbiIsIm1heFZhbHVlIiwibWluVmFsdWUiLCJhc3NpZ24iLCJKRUVGQUNFRklMVEVSQVBJIiwiaW5pdCIsIk5OQ1BhdGgiLCJhbmltYXRlRGVsYXkiLCJjYWxsYmFja1JlYWR5IiwiZXJyQ29kZSIsImplZUZhY2VGaWx0ZXJPYmoiLCJvbkNhbWVyYVBlcnNtaXNzaW9uRmFpbGVkIiwiaW5pdEhlYWRTZWFyY2hEcmF3Iiwib25SZWFkeSIsImNhbGxiYWNrVHJhY2siLCJkcmF3SGVhZFNlYXJjaCIsInNvdXJjZSIsImdsVHlwZSIsInR5cGVTdHJpbmciLCJnbFNoYWRlciIsImNyZWF0ZVNoYWRlciIsInNoYWRlclNvdXJjZSIsImNvbXBpbGVTaGFkZXIiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsImdldFNoYWRlckluZm9Mb2ciLCJnbFNoYWRlclZlcnRleCIsIlZFUlRFWF9TSEFERVIiLCJnbFNoYWRlckZyYWdtZW50IiwiRlJBR01FTlRfU0hBREVSIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwic2FtcGxlclZpZGVvIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwidXNlUHJvZ3JhbSIsInVuaWZvcm0xaSIsInZpZXdwb3J0IiwiYWN0aXZlVGV4dHVyZSIsIlRFWFRVUkUwIiwiYmluZFRleHR1cmUiLCJURVhUVVJFXzJEIiwidW5pZm9ybTNmIiwieCIsInkiLCJzIiwidW5pZm9ybU1hdHJpeDJmdiIsImRyYXdFbGVtZW50cyIsIlRSSUFOR0xFUyIsIlVOU0lHTkVEX1NIT1JUIiwiSGVhZENvbnRyb2xTZXJ2aWNlXzIiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiaGVhZENvbnRyb2xTZXJ2aWNlIiwidG9nZ2xlIiwiYmxvYiIsImltZyIsImltYWdlQ2FwdHVyZSIsImlzSW5pdCIsImltYWdlQml0bWFwIiwiY2FudmFzIiwicXVlcnlTZWxlY3RvciIsInN0eWxlIiwiZGlzcGxheSIsImdldENvbXB1dGVkU3R5bGUiLCJzcGxpdCIsInJhdGlvIiwiY2xlYXJSZWN0IiwiZHJhd0NhbnZhcyIsIm5hdmlnYXRvciIsIm1lZGlhRGV2aWNlcyIsImdldFVzZXJNZWRpYSIsInZpZGVvIiwibWVkaWFTdHJlYW0iLCJ0cmFjayIsImdldFZpZGVvVHJhY2tzIiwiVk9JQ0UiLCJzZXRUaW1lb3V0Iiwic3BlZWNoU3ludGhlc2lzIiwiZ2V0Vm9pY2VzIiwiZmluZCIsImxhbmciLCJSSUdIVCIsInVzZXJOYW1lIiwibmFtZSIsInRleHQiLCJ1dHRlcmFuY2UiLCJTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UiLCJyZXBsYWNlIiwidm9pY2UiLCJ2b2x1bWUiLCJwaXRjaCIsInJhdGUiLCJjYW5jZWwiLCJzcGVhayIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJvYmoiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyJdLCJtYXBwaW5n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LFNBQVMvUCxFQUFTZ1EsR0FDekMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYSixFQUFvQk0sRUFBRUYsRUFBWUMsS0FBU0wsRUFBb0JNLEVBQUVsUSxFQUFTaVEsSUFDNUV4TSxPQUFPQyxlQUFlMUQsRUFBU2lRLEVBQUssQ0FBRWxELFlBQVksRUFBTUMsSUFBS2dELEVBQVdDLE1DSjNFTCxFQUFvQk0sRUFBSSxTQUFTQyxFQUFLL0ksR0FBUSxPQUFPM0QsT0FBTzJNLFVBQVVDLGVBQWV4USxLQUFLc1EsRUFBSy9JLElDQy9Gd0ksRUFBb0JVLEVBQUksU0FBU3RRLEdBQ1gsb0JBQVh1USxRQUEwQkEsT0FBT0MsYUFDMUMvTSxPQUFPQyxlQUFlMUQsRUFBU3VRLE9BQU9DLFlBQWEsQ0FBRTdNLE1BQU8sV0FFN0RGLE9BQU9DLGVBQWUxRCxFQUFTLGFBQWMsQ0FBRTJELE9BQU8sS0NGdkRpTSxFQUFvQixLIiwiZmlsZSI6Im1haW4uNmRiNDBjMDk3Y2FlYzBjMzA1ODguanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFN1YnNjcmliZSB0byB0aGUgY29uc29sZSBvdXRwdXQgXG4gKlxuICogQGF1dGhvciBTYW1zb24gUmFkdVxuICovIFxuKGZ1bmN0aW9uKCl7XG4gICAgdmFyIF9sb2cgPSBjb25zb2xlLmxvZztcbiAgICB2YXIgX3dhcm4gPSBjb25zb2xlLndhcm47XG4gICAgdmFyIF9lcnJvciA9IGNvbnNvbGUuZXJyb3I7XG4gICAgdmFyIF9kZWJ1ZyA9IGNvbnNvbGUuZGVidWc7XG5cbiAgICB2YXIgQ29uc29sZVN1YnNjcmliZXIgPSB7XG4gICAgICAgIHVuYmluZDogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nID0gX2xvZztcbiAgICAgICAgICAgIGNvbnNvbGUud2FybiA9IF93YXJuO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvciA9IF9lcnJvcjtcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcgPSBfZGVidWc7XG4gICAgICAgIH0sIFxuICAgICAgICBiaW5kOiBmdW5jdGlvbihjYiwgcHJldmVudExvZ2dpbmcpe1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYiAhPT0gJ2Z1bmN0aW9uJyl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIllvdSBtdXN0IHBhc3MgYSB2YWxpZCBjYWxsYmFjayBmdW5jdGlvbi5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwcmV2ZW50TG9nZ2luZyA9IEJvb2xlYW4ocHJldmVudExvZ2dpbmcpOyAvL2ZvcmNlIGJvb2xcblxuICAgICAgICAgICAgY29uc3QgQ0FURUdPUllfSU5GTyA9IFwiaW5mb1wiO1xuICAgICAgICAgICAgY29uc3QgQ0FURUdPUllfV0FSTiA9IFwid2FyblwiO1xuICAgICAgICAgICAgY29uc3QgQ0FURUdPUllfRVJST1IgPSBcImVycm9yXCI7XG4gICAgICAgICAgICBjb25zdCBDQVRFR09SWV9ERUJVRyA9IFwiZGVidWdcIjtcblxuICAgICAgICAgICAgY29uc29sZS5sb2cgPSBjb25zb2xlLmluZm8gPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGlmIChfbG9nKXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmV2ZW50TG9nZ2luZyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfbG9nLmNhbGwoY29uc29sZSwgLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYihDQVRFR09SWV9JTkZPLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnNvbGUud2FybiA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgaWYgKF93YXJuKXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmV2ZW50TG9nZ2luZyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfd2Fybi5jYWxsKGNvbnNvbGUsIC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2IoQ0FURUdPUllfV0FSTiwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpZiAoX2Vycm9yKXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmV2ZW50TG9nZ2luZyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZXJyb3IuY2FsbChjb25zb2xlLCAuLi5hcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNiKENBVEVHT1JZX0VSUk9SLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGlmIChfZGVidWcpe1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXByZXZlbnRMb2dnaW5nKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kZWJ1Zy5jYWxsKGNvbnNvbGUsIC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2IoQ0FURUdPUllfREVCVUcsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy9leHBvcnRcbiAgICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzICE9PSAndW5kZWZpbmVkJyl7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gQ29uc29sZVN1YnNjcmliZXI7XG4gICAgfVxuICAgIGVsc2UgaWYgKHdpbmRvdyAmJiB0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0Jyl7XG4gICAgICAgIHdpbmRvdy5Db25zb2xlU3Vic2NyaWJlciA9IENvbnNvbGVTdWJzY3JpYmVyO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBleHBvcnQgbW9kdWxlLlwiKTtcbiAgICB9XG59KSgpO1xuIiwiLyoqXG4gKiBNZWRpYVN0cmVhbSBJbWFnZUNhcHR1cmUgcG9seWZpbGxcbiAqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmV4cG9ydCBsZXQgSW1hZ2VDYXB0dXJlID0gd2luZG93LkltYWdlQ2FwdHVyZTtcblxuaWYgKHR5cGVvZiBJbWFnZUNhcHR1cmUgPT09ICd1bmRlZmluZWQnKSB7XG4gIEltYWdlQ2FwdHVyZSA9IGNsYXNzIHtcblxuICAgIC8qKlxuICAgICAqIFRPRE8gaHR0cHM6Ly93d3cudzMub3JnL1RSL2ltYWdlLWNhcHR1cmUvI2NvbnN0cnVjdG9yc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtNZWRpYVN0cmVhbVRyYWNrfSB2aWRlb1N0cmVhbVRyYWNrIC0gQSBNZWRpYVN0cmVhbVRyYWNrIG9mIHRoZSAndmlkZW8nIGtpbmRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih2aWRlb1N0cmVhbVRyYWNrKSB7XG4gICAgICBpZiAodmlkZW9TdHJlYW1UcmFjay5raW5kICE9PSAndmlkZW8nKVxuICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCdOb3RTdXBwb3J0ZWRFcnJvcicpO1xuXG4gICAgICB0aGlzLl92aWRlb1N0cmVhbVRyYWNrID0gdmlkZW9TdHJlYW1UcmFjaztcbiAgICAgIGlmICghKCdyZWFkeVN0YXRlJyBpbiB0aGlzLl92aWRlb1N0cmVhbVRyYWNrKSkge1xuICAgICAgICAvLyBQb2x5ZmlsbCBmb3IgRmlyZWZveFxuICAgICAgICB0aGlzLl92aWRlb1N0cmVhbVRyYWNrLnJlYWR5U3RhdGUgPSAnbGl2ZSc7XG4gICAgICB9XG5cbiAgICAgIC8vIE1lZGlhU3RyZWFtIGNvbnN0cnVjdG9yIG5vdCBhdmFpbGFibGUgdW50aWwgQ2hyb21lIDU1IC0gaHR0cHM6Ly93d3cuY2hyb21lc3RhdHVzLmNvbS9mZWF0dXJlLzU5MTIxNzI1NDY3NTI1MTJcbiAgICAgIHRoaXMuX3ByZXZpZXdTdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0oW3ZpZGVvU3RyZWFtVHJhY2tdKTtcbiAgICAgIHRoaXMudmlkZW9FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICAgIHRoaXMudmlkZW9FbGVtZW50UGxheWluZyA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwbGF5aW5nJywgcmVzb2x2ZSk7XG4gICAgICB9KTtcbiAgICAgIGlmIChIVE1MTWVkaWFFbGVtZW50KSB7XG4gICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnNyY09iamVjdCA9IHRoaXMuX3ByZXZpZXdTdHJlYW07ICAvLyBTYWZhcmkgMTEgZG9lc24ndCBhbGxvdyB1c2Ugb2YgY3JlYXRlT2JqZWN0VVJMIGZvciBNZWRpYVN0cmVhbVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTCh0aGlzLl9wcmV2aWV3U3RyZWFtKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudmlkZW9FbGVtZW50Lm11dGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMudmlkZW9FbGVtZW50LnNldEF0dHJpYnV0ZSgncGxheXNpbmxpbmUnLCAnJyk7IC8vIFJlcXVpcmVkIGJ5IFNhZmFyaSBvbiBpT1MgMTEuIFNlZSBodHRwczovL3dlYmtpdC5vcmcvYmxvZy82Nzg0XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudC5wbGF5KCk7XG5cbiAgICAgIHRoaXMuY2FudmFzRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgLy8gVE9ETyBGaXJlZm94IGhhcyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvT2Zmc2NyZWVuQ2FudmFzXG4gICAgICB0aGlzLmNhbnZhczJkQ29udGV4dCA9IHRoaXMuY2FudmFzRWxlbWVudC5nZXRDb250ZXh0KCcyZCcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9tZWRpYWNhcHR1cmUtaW1hZ2UvaW5kZXguaHRtbCNkb20taW1hZ2VjYXB0dXJlLXZpZGVvc3RyZWFtdHJhY2tcbiAgICAgKiBAcmV0dXJuIHtNZWRpYVN0cmVhbVRyYWNrfSBUaGUgTWVkaWFTdHJlYW1UcmFjayBwYXNzZWQgaW50byB0aGUgY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBnZXQgdmlkZW9TdHJlYW1UcmFjaygpIHtcbiAgICAgIHJldHVybiB0aGlzLl92aWRlb1N0cmVhbVRyYWNrO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEltcGxlbWVudHMgaHR0cHM6Ly93d3cudzMub3JnL1RSL2ltYWdlLWNhcHR1cmUvI2RvbS1pbWFnZWNhcHR1cmUtZ2V0cGhvdG9jYXBhYmlsaXRpZXNcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFBob3RvQ2FwYWJpbGl0aWVzPn0gRnVsZmlsbGVkIHByb21pc2Ugd2l0aFxuICAgICAqIFtQaG90b0NhcGFiaWxpdGllc10oaHR0cHM6Ly93d3cudzMub3JnL1RSL2ltYWdlLWNhcHR1cmUvI2lkbC1kZWYtcGhvdG9jYXBhYmlsaXRpZXMpXG4gICAgICogb2JqZWN0IG9uIHN1Y2Nlc3MsIHJlamVjdGVkIHByb21pc2Ugb24gZmFpbHVyZVxuICAgICAqL1xuICAgIGdldFBob3RvQ2FwYWJpbGl0aWVzKCkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGV4ZWN1dG9yR1BDKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAvLyBUT0RPIHNlZSBodHRwczovL2dpdGh1Yi5jb20vdzNjL21lZGlhY2FwdHVyZS1pbWFnZS9pc3N1ZXMvOTdcbiAgICAgICAgY29uc3QgTWVkaWFTZXR0aW5nc1JhbmdlID0ge1xuICAgICAgICAgIGN1cnJlbnQ6IDAsIG1pbjogMCwgbWF4OiAwLFxuICAgICAgICB9O1xuICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICBleHBvc3VyZUNvbXBlbnNhdGlvbjogTWVkaWFTZXR0aW5nc1JhbmdlLFxuICAgICAgICAgIGV4cG9zdXJlTW9kZTogJ25vbmUnLFxuICAgICAgICAgIGZpbGxMaWdodE1vZGU6ICdub25lJyxcbiAgICAgICAgICBmb2N1c01vZGU6ICdub25lJyxcbiAgICAgICAgICBpbWFnZUhlaWdodDogTWVkaWFTZXR0aW5nc1JhbmdlLFxuICAgICAgICAgIGltYWdlV2lkdGg6IE1lZGlhU2V0dGluZ3NSYW5nZSxcbiAgICAgICAgICBpc286IE1lZGlhU2V0dGluZ3NSYW5nZSxcbiAgICAgICAgICByZWRFeWVSZWR1Y3Rpb246IGZhbHNlLFxuICAgICAgICAgIHdoaXRlQmFsYW5jZU1vZGU6ICdub25lJyxcbiAgICAgICAgICB6b29tOiBNZWRpYVNldHRpbmdzUmFuZ2UsXG4gICAgICAgIH0pO1xuICAgICAgICByZWplY3QobmV3IERPTUV4Y2VwdGlvbignT3BlcmF0aW9uRXJyb3InKSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9pbWFnZS1jYXB0dXJlLyNkb20taW1hZ2VjYXB0dXJlLXNldG9wdGlvbnNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGhvdG9TZXR0aW5ncyAtIFBob3RvIHNldHRpbmdzIGRpY3Rpb25hcnksIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9pbWFnZS1jYXB0dXJlLyNpZGwtZGVmLXBob3Rvc2V0dGluZ3NcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPHZvaWQ+fSBGdWxmaWxsZWQgcHJvbWlzZSBvbiBzdWNjZXNzLCByZWplY3RlZCBwcm9taXNlIG9uIGZhaWx1cmVcbiAgICAgKi9cbiAgICBzZXRPcHRpb25zKHBob3RvU2V0dGluZ3MgPSB7fSkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGV4ZWN1dG9yU08ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIC8vIFRPRE9cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRPRE9cbiAgICAgKiBJbXBsZW1lbnRzIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9pbWFnZS1jYXB0dXJlLyNkb20taW1hZ2VjYXB0dXJlLXRha2VwaG90b1xuICAgICAqIEByZXR1cm4ge1Byb21pc2U8QmxvYj59IEZ1bGZpbGxlZCBwcm9taXNlIHdpdGggW0Jsb2JdKGh0dHBzOi8vd3d3LnczLm9yZy9UUi9GaWxlQVBJLyNibG9iKVxuICAgICAqIGFyZ3VtZW50IG9uIHN1Y2Nlc3M7IHJlamVjdGVkIHByb21pc2Ugb24gZmFpbHVyZVxuICAgICAqL1xuICAgIHRha2VQaG90bygpIHtcbiAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGV4ZWN1dG9yVFAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIC8vIGBJZiB0aGUgcmVhZHlTdGF0ZSBvZiB0aGUgTWVkaWFTdHJlYW1UcmFjayBwcm92aWRlZCBpbiB0aGUgY29uc3RydWN0b3IgaXMgbm90IGxpdmUsXG4gICAgICAgIC8vIHJldHVybiBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCBhIG5ldyBET01FeGNlcHRpb24gd2hvc2UgbmFtZSBpcyBcIkludmFsaWRTdGF0ZUVycm9yXCIuYFxuICAgICAgICBpZiAoc2VsZi5fdmlkZW9TdHJlYW1UcmFjay5yZWFkeVN0YXRlICE9PSAnbGl2ZScpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBET01FeGNlcHRpb24oJ0ludmFsaWRTdGF0ZUVycm9yJykpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYudmlkZW9FbGVtZW50UGxheWluZy50aGVuKCgpID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2VsZi5jYW52YXNFbGVtZW50LndpZHRoID0gc2VsZi52aWRlb0VsZW1lbnQudmlkZW9XaWR0aDtcbiAgICAgICAgICAgIHNlbGYuY2FudmFzRWxlbWVudC5oZWlnaHQgPSBzZWxmLnZpZGVvRWxlbWVudC52aWRlb0hlaWdodDtcbiAgICAgICAgICAgIHNlbGYuY2FudmFzMmRDb250ZXh0LmRyYXdJbWFnZShzZWxmLnZpZGVvRWxlbWVudCwgMCwgMCk7XG4gICAgICAgICAgICBzZWxmLmNhbnZhc0VsZW1lbnQudG9CbG9iKHJlc29sdmUpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZWplY3QobmV3IERPTUV4Y2VwdGlvbignVW5rbm93bkVycm9yJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9pbWFnZS1jYXB0dXJlLyNkb20taW1hZ2VjYXB0dXJlLWdyYWJmcmFtZVxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8SW1hZ2VCaXRtYXA+fSBGdWxmaWxsZWQgcHJvbWlzZSB3aXRoXG4gICAgICogW0ltYWdlQml0bWFwXShodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUxL3dlYmFwcGFwaXMuaHRtbCN3ZWJhcHBhcGlzLWltYWdlcylcbiAgICAgKiBhcmd1bWVudCBvbiBzdWNjZXNzOyByZWplY3RlZCBwcm9taXNlIG9uIGZhaWx1cmVcbiAgICAgKi9cbiAgICBncmFiRnJhbWUoKSB7XG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBleGVjdXRvckdGKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAvLyBgSWYgdGhlIHJlYWR5U3RhdGUgb2YgdGhlIE1lZGlhU3RyZWFtVHJhY2sgcHJvdmlkZWQgaW4gdGhlIGNvbnN0cnVjdG9yIGlzIG5vdCBsaXZlLFxuICAgICAgICAvLyByZXR1cm4gYSBwcm9taXNlIHJlamVjdGVkIHdpdGggYSBuZXcgRE9NRXhjZXB0aW9uIHdob3NlIG5hbWUgaXMgXCJJbnZhbGlkU3RhdGVFcnJvclwiLmBcbiAgICAgICAgaWYgKHNlbGYuX3ZpZGVvU3RyZWFtVHJhY2sucmVhZHlTdGF0ZSAhPT0gJ2xpdmUnKSB7XG4gICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgRE9NRXhjZXB0aW9uKCdJbnZhbGlkU3RhdGVFcnJvcicpKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLnZpZGVvRWxlbWVudFBsYXlpbmcudGhlbigoKSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNlbGYuY2FudmFzRWxlbWVudC53aWR0aCA9IHNlbGYudmlkZW9FbGVtZW50LnZpZGVvV2lkdGg7XG4gICAgICAgICAgICBzZWxmLmNhbnZhc0VsZW1lbnQuaGVpZ2h0ID0gc2VsZi52aWRlb0VsZW1lbnQudmlkZW9IZWlnaHQ7XG4gICAgICAgICAgICBzZWxmLmNhbnZhczJkQ29udGV4dC5kcmF3SW1hZ2Uoc2VsZi52aWRlb0VsZW1lbnQsIDAsIDApO1xuICAgICAgICAgICAgLy8gVE9ETyBwb2x5ZmlsbCBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSW1hZ2VCaXRtYXBGYWN0b3JpZXMvY3JlYXRlSW1hZ2VCaXRtYXAgZm9yIElFXG4gICAgICAgICAgICByZXNvbHZlKHdpbmRvdy5jcmVhdGVJbWFnZUJpdG1hcChzZWxmLmNhbnZhc0VsZW1lbnQpKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBET01FeGNlcHRpb24oJ1Vua25vd25FcnJvcicpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuXG53aW5kb3cuSW1hZ2VDYXB0dXJlID0gSW1hZ2VDYXB0dXJlO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmVuYWJsZU1vYmlsZUNvbnNvbGUgPSB2b2lkIDA7XG5jb25zdCBjb25zb2xlX3N1YnNjcmliZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiY29uc29sZS1zdWJzY3JpYmVyXCIpKTtcbmNvbnN0IGVuYWJsZU1vYmlsZUNvbnNvbGUgPSAoKSA9PiB7XG4gICAgY29uc3QgYnVmZmVyID0gW107XG4gICAgY29uc29sZV9zdWJzY3JpYmVyXzEuZGVmYXVsdC5iaW5kKChjYXRlZ29yeSwgYXJncykgPT4ge1xuICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gNSkge1xuICAgICAgICAgICAgYnVmZmVyLnNoaWZ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgYnVmZmVyLnB1c2goeyBjYXRlZ29yeSwgbWVzc2FnZTogYXJnc1swXSB9KTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnNvbGUnKS5pbm5lckhUTUwgPSBidWZmZXIubWFwKChtKSA9PiBgPHA+JHttLm1lc3NhZ2V9PC9wPmApLmpvaW4oJycpO1xuICAgIH0pO1xufTtcbmV4cG9ydHMuZW5hYmxlTW9iaWxlQ29uc29sZSA9IGVuYWJsZU1vYmlsZUNvbnNvbGU7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBjb25zb2xlXzEgPSByZXF1aXJlKFwiLi9jb25zb2xlXCIpO1xuY29uc3QgSGVhZENvbnRyb2xTZXJ2aWNlXzEgPSByZXF1aXJlKFwiLi9zZXJ2aWNlcy9IZWFkQ29udHJvbFNlcnZpY2VcIik7XG5jb25zdCBpbWFnZUNhcHR1cmVfMSA9IHJlcXVpcmUoXCIuL3NlcnZpY2VzL0ltYWdlQ2FwdHVyZVNlcnZpY2UvaW1hZ2VDYXB0dXJlXCIpO1xuY29uc3Qgdm9pY2VfMSA9IHJlcXVpcmUoXCIuL3NlcnZpY2VzL1ZvaWNlU2VydmljZS92b2ljZVwiKTtcbnJlcXVpcmUoXCIuL2RlY2xhcmVcIik7XG5yZXF1aXJlKFwiLi9zdHlsZS9pbmRleC5zY3NzXCIpO1xuY29uc3Qgc3RhcnRCdXR0b24gPSAkKCcjc3RhcnRCdXR0b24nKTtcbmNvbnN0IHByZWxvYWRlciA9ICQoJyNwcmVsb2FkZXInKTtcbmNvbnN0IHN0YXJ0U2NyZWVuID0gJCgnI3N0YXJ0Jyk7XG5jb25zdCBnYW1lU2NyZWVuID0gJCgnI2dhbWUnKTtcbmNvbnN0IG5hbWVJbnB1dCA9ICQoJyNuYW1lSW5wdXQnKTtcbmNvbnN0IGluaXRBbGxBUEkgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW2ltYWdlQ2FwdHVyZV8xLmluaXRJbWFnZUNhcHR1cmUoKSwgdm9pY2VfMS5pbml0Vm9pY2VTZXJ2aWNlKCksIEhlYWRDb250cm9sU2VydmljZV8xLmluaXRIZWFkQ29udHJvbCgpXSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBwcmVsb2FkZXIuaGlkZSgpO1xuICAgICAgICBzdGFydFNjcmVlbi5zaG93KCk7XG4gICAgfSlcbiAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIH0pO1xufSk7XG5jb25zdCBpbml0QXBwID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgcHJlbG9hZGVyLnNob3coKTtcbiAgICBnYW1lU2NyZWVuLmhpZGUoKTtcbiAgICBzdGFydFNjcmVlbi5oaWRlKCk7XG4gICAgeWllbGQgaW5pdEFsbEFQSSgpO1xuICAgIG5hbWVJbnB1dC5vbignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIGlmIChuYW1lSW5wdXQudmFsKCkpIHtcbiAgICAgICAgICAgIHN0YXJ0QnV0dG9uLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RhcnRCdXR0b24ucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHN0YXJ0QnV0dG9uLmNsaWNrKCgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICB5aWVsZCBzdGFydEdhbWUobmFtZUlucHV0LnZhbCgpKTtcbiAgICB9KSk7XG59KTtcbmNvbnN0IHN0YXJ0R2FtZSA9IChwbGF5ZXJOYW1lKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygnc3RhcnQgZ2FtZScpO1xuICAgICAgICBnYW1lU2NyZWVuLnNob3coKTtcbiAgICAgICAgc3RhcnRTY3JlZW4uaGlkZSgpO1xuICAgICAgICB2b2ljZV8xLnNldFVwVXNlcihwbGF5ZXJOYW1lKTtcbiAgICAgICAgdm9pY2VfMS5zYXlTb21ldGhpbmcodm9pY2VfMS5QSFJBU0VTLkhFTExPKTtcbiAgICAgICAgeWllbGQgaW1hZ2VDYXB0dXJlXzEudGFrZVBob3RvKCk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGFsZXJ0KGUpO1xuICAgIH1cbn0pO1xud2luZG93Lm9ubG9hZCA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIGNvbnNvbGVfMS5lbmFibGVNb2JpbGVDb25zb2xlKCk7XG4gICAgeWllbGQgaW5pdEFwcCgpO1xufSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IGRlZmF1bHRTZXR0aW5ncyA9IHtcbiAgICBtb3VzZU9wZW5pbmdUcmVzaG9sZDogMC42LFxuICAgIG1vdXNlQ2xvc2luZ1RyZXNob2xkOiAwLjUsXG4gICAgaGVhZE1vdmVtZW50U3RhcnRlZFRyZXNob2xkOiAwLjE1LFxuICAgIGhlYWRNb3ZlbWVudFN0b3BwZWRUcmVzaG9sZDogMC4wOCxcbn07XG5jbGFzcyBIZWFkQ29udHJvbFNlcnZpY2UgZXh0ZW5kcyBFdmVudFRhcmdldCB7XG4gICAgY29uc3RydWN0b3IoY2FudmFzSWQsIHNldHRpbmdzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMubW92ZW1lbnRMb2NrcyA9IHtcbiAgICAgICAgICAgIHZlcnRpY2FsOiBmYWxzZSxcbiAgICAgICAgICAgIGhvcml6b250YWw6IGZhbHNlLFxuICAgICAgICAgICAgbW91c2VPcGVuZWQ6IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgaXNMb2FkZWQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNEZXRlY3RlZDogZmFsc2UsXG4gICAgICAgICAgICBpc0VuYWJsZWQ6IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdsID0gbnVsbDtcbiAgICAgICAgdGhpcy5jdiA9IG51bGw7XG4gICAgICAgIHRoaXMudmlkZW9UZXh0dXJlID0gbnVsbDtcbiAgICAgICAgdGhpcy52aWRlb1RyYW5zZm9ybU1hdDIgPSBudWxsO1xuICAgICAgICB0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtID0gbnVsbDtcbiAgICAgICAgdGhpcy5oZWFkU2VhcmNoVW5pZm9ybVh5cyA9IG51bGw7XG4gICAgICAgIHRoaXMuaGVhZFNlYXJjaFVuaWZvcm1WaWRlb1RyYW5zZm9ybU1hdDIgPSBudWxsO1xuICAgICAgICB0aGlzLmhhbmRsZU1vdXNlT3BlbmluZyA9IChkZXRlY3RTdGF0ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGRldGVjdFN0YXRlLnJ5IDwgLTEgKiB0aGlzLnNldHRpbmdzLmhlYWRNb3ZlbWVudFN0YXJ0ZWRUcmVzaG9sZCB8fCBkZXRlY3RTdGF0ZS5yeSA+IHRoaXMuc2V0dGluZ3MuaGVhZE1vdmVtZW50U3RhcnRlZFRyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgLy8gSGVhZCBzaG91bGQgYmUgaW4gdGhlIGNlbnRlciBwb3NpdGlvblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBtb3V0aE9wZW5pbmcgPSAoZGV0ZWN0U3RhdGUuZXhwcmVzc2lvbnNbMF0gLSAwLjIpICogNS4wO1xuICAgICAgICAgICAgbW91dGhPcGVuaW5nID0gTWF0aC5taW4oTWF0aC5tYXgobW91dGhPcGVuaW5nLCAwKSwgMSk7XG4gICAgICAgICAgICBpZiAobW91dGhPcGVuaW5nID4gdGhpcy5zZXR0aW5ncy5tb3VzZU9wZW5pbmdUcmVzaG9sZCAmJiAhdGhpcy5tb3ZlbWVudExvY2tzLm1vdXNlT3BlbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlbWVudExvY2tzLm1vdXNlT3BlbmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdtb3VzZSBvcGVuZWQnKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vdXRoT3BlbmluZyA8IHRoaXMuc2V0dGluZ3MubW91c2VDbG9zaW5nVHJlc2hvbGQgJiYgdGhpcy5tb3ZlbWVudExvY2tzLm1vdXNlT3BlbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlbWVudExvY2tzLm1vdXNlT3BlbmVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnbW91c2UgY2xvc2VkJykpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVNb3ZlID0gKG12KSA9PiB7XG4gICAgICAgICAgICBpZiAobXYucnggIT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUF4aXNNb3ZlbWVudCh7IGF4aXM6ICd2ZXJ0aWNhbCcsIGF4aXNQb3NpdGlvbjogbXYucngsIG1heFZhbHVlOiAnZG93bicsIG1pblZhbHVlOiAndXAnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG12LnJ5ICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVBeGlzTW92ZW1lbnQoeyBheGlzOiAnaG9yaXpvbnRhbCcsIGF4aXNQb3NpdGlvbjogbXYucnksIG1heFZhbHVlOiAnbGVmdCcsIG1pblZhbHVlOiAncmlnaHQnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZUF4aXNNb3ZlbWVudCA9ICh7IGF4aXMsIGF4aXNQb3NpdGlvbiwgbWF4VmFsdWUsIG1pblZhbHVlLCB9KSA9PiB7XG4gICAgICAgICAgICBpZiAoYXhpc1Bvc2l0aW9uIDwgLTEgKiB0aGlzLnNldHRpbmdzLmhlYWRNb3ZlbWVudFN0YXJ0ZWRUcmVzaG9sZCAmJiAhdGhpcy5tb3ZlbWVudExvY2tzW2F4aXNdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlbWVudExvY2tzW2F4aXNdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KG1pblZhbHVlKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGF4aXNQb3NpdGlvbiA+IHRoaXMuc2V0dGluZ3MuaGVhZE1vdmVtZW50U3RhcnRlZFRyZXNob2xkICYmICF0aGlzLm1vdmVtZW50TG9ja3NbYXhpc10pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVtZW50TG9ja3NbYXhpc10gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQobWF4VmFsdWUpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXhpc1Bvc2l0aW9uID4gLTEgKiB0aGlzLnNldHRpbmdzLmhlYWRNb3ZlbWVudFN0b3BwZWRUcmVzaG9sZCAmJiBheGlzUG9zaXRpb24gPCB0aGlzLnNldHRpbmdzLmhlYWRNb3ZlbWVudFN0b3BwZWRUcmVzaG9sZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZW1lbnRMb2Nrc1theGlzXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdFNldHRpbmdzKSwgc2V0dGluZ3MpO1xuICAgICAgICB3aW5kb3cuSkVFRkFDRUZJTFRFUkFQSS5pbml0KHtcbiAgICAgICAgICAgIGNhbnZhc0lkOiBjYW52YXNJZCxcbiAgICAgICAgICAgIE5OQ1BhdGg6ICcuL3ZlbmRvci8nLFxuICAgICAgICAgICAgYW5pbWF0ZURlbGF5OiAyMCxcbiAgICAgICAgICAgIGNhbGxiYWNrUmVhZHk6IChlcnJDb2RlLCBqZWVGYWNlRmlsdGVyT2JqKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVyckNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChlcnJDb2RlID0gJ1dFQkNBTV9VTkFWQUlMQUJMRScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5vbkNhbWVyYVBlcnNtaXNzaW9uRmFpbGVkICYmIHNldHRpbmdzLm9uQ2FtZXJhUGVyc21pc3Npb25GYWlsZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdBTiBFUlJPUiBIQVBQRU5TLiBTT1JSWSBCUk8gOiggLiBFUlIgPScsIGVyckNvZGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZ2wgPSBqZWVGYWNlRmlsdGVyT2JqWydHTCddO1xuICAgICAgICAgICAgICAgIHRoaXMudmlkZW9UZXh0dXJlID0gamVlRmFjZUZpbHRlck9ialsndmlkZW9UZXh0dXJlJ107XG4gICAgICAgICAgICAgICAgdGhpcy52aWRlb1RyYW5zZm9ybU1hdDIgPSBqZWVGYWNlRmlsdGVyT2JqWyd2aWRlb1RyYW5zZm9ybU1hdDInXTtcbiAgICAgICAgICAgICAgICB0aGlzLmN2ID0gamVlRmFjZUZpbHRlck9ialsnY2FudmFzRWxlbWVudCddO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdEhlYWRTZWFyY2hEcmF3KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0xvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mub25SZWFkeSAmJiBzZXR0aW5ncy5vblJlYWR5KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gY2FsbGVkIGF0IGVhY2ggcmVuZGVyIGl0ZXJhdGlvbiAoZHJhd2luZyBsb29wKTpcbiAgICAgICAgICAgIGNhbGxiYWNrVHJhY2s6IChkZXRlY3RTdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zdGF0ZS5pc0VuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdIZWFkU2VhcmNoKGRldGVjdFN0YXRlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU1vdmUoZGV0ZWN0U3RhdGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTW91c2VPcGVuaW5nKGRldGVjdFN0YXRlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0b2dnbGUoaXNFbmFibGVkKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmlzRW5hYmxlZCA9PT0gaXNFbmFibGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlLmlzRW5hYmxlZCA9IGlzRW5hYmxlZDtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbXBpbGVTaGFkZXIoc291cmNlLCBnbFR5cGUsIHR5cGVTdHJpbmcpIHtcbiAgICAgICAgY29uc3QgZ2xTaGFkZXIgPSB0aGlzLmdsLmNyZWF0ZVNoYWRlcihnbFR5cGUpO1xuICAgICAgICB0aGlzLmdsLnNoYWRlclNvdXJjZShnbFNoYWRlciwgc291cmNlKTtcbiAgICAgICAgdGhpcy5nbC5jb21waWxlU2hhZGVyKGdsU2hhZGVyKTtcbiAgICAgICAgaWYgKCF0aGlzLmdsLmdldFNoYWRlclBhcmFtZXRlcihnbFNoYWRlciwgdGhpcy5nbC5DT01QSUxFX1NUQVRVUykpIHtcbiAgICAgICAgICAgIGFsZXJ0KCdFUlJPUiBJTiAnICsgdHlwZVN0cmluZyArICcgU0hBREVSOiAnICsgdGhpcy5nbC5nZXRTaGFkZXJJbmZvTG9nKGdsU2hhZGVyKSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2xTaGFkZXI7XG4gICAgfVxuICAgIGluaXRIZWFkU2VhcmNoRHJhdygpIHtcbiAgICAgICAgLy8gYnVpbGQgdGhpcy5nbEhlYWRTZWFyY2hEcmF3U2hhZGVyUHJvZ3JhbTpcbiAgICAgICAgY29uc3Qgc2hhZGVyVmVydGV4U291cmNlID0gJ1xcblxcXG4gICAgICBhdHRyaWJ1dGUgdmVjMiBhYXRfcG9zaXRpb247XFxuXFxcbiAgICAgIHZhcnlpbmcgdmVjMiB2VVY7XFxuXFxcbiAgICAgIFxcblxcXG4gICAgICB2b2lkIG1haW4odm9pZCkge1xcblxcXG4gICAgICAgIGdsX1Bvc2l0aW9uID0gdmVjNChhYXRfcG9zaXRpb24sIDAuLCAxLik7XFxuXFxcbiAgICAgICAgdlVWID0gMC41ICsgMC41ICogYWF0X3Bvc2l0aW9uO1xcblxcXG4gICAgICAgIHZVVi54ID0gMS4tdlVWLng7IC8vIG1pcnJvciBkaXBsYXlcXG5cXFxuICAgICAgfSc7XG4gICAgICAgIGNvbnN0IHNoYWRlckZyYWdtZW50U291cmNlID0gJ1xcblxcXG4gICAgICBwcmVjaXNpb24gbG93cCBmbG9hdDtcXG5cXFxuICAgICAgdmFyeWluZyB2ZWMyIHZVVjtcXG5cXFxuICAgICAgXFxuXFxcbiAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIHNhbXBsZXJWaWRlbztcXG5cXFxuICAgICAgdW5pZm9ybSBtYXQyIHZpZGVvVHJhbnNmb3JtTWF0MjtcXG5cXFxuICAgICAgdW5pZm9ybSB2ZWMzIHV4eXM7XFxuXFxcbiAgICAgIFxcblxcXG4gICAgICB2b2lkIG1haW4odm9pZCkge1xcblxcXG4gICAgICAgIHZlYzIgdXZWaWRlb0NlbnRlcmVkID0gMi4wICogdmlkZW9UcmFuc2Zvcm1NYXQyICogKHZVViAtIDAuNSk7XFxuXFxcbiAgICAgICAgdmVjMiB1dlZpZGVvID0gdXZWaWRlb0NlbnRlcmVkICsgMC41O1xcblxcXG4gICAgICAgIHZlYzMgY29sb3JWaWRlbyA9IHRleHR1cmUyRChzYW1wbGVyVmlkZW8sIHV2VmlkZW8pLnJnYjtcXG5cXFxuICAgICAgICB2ZWMyIHBvcyA9IHZVVioyLi12ZWMyKDEuLDEuKTtcXG5cXFxuICAgICAgICB2ZWMyIGlzSW5zaWRlID0gc3RlcCh1eHlzLnh5LXV4eXMueip2ZWMyKDEuLDEuKSwgcG9zKTtcXG5cXFxuICAgICAgICBpc0luc2lkZSAqPSBzdGVwKHBvcywgdXh5cy54eSt1eHlzLnoqdmVjMigxLiwxLikpO1xcblxcXG4gICAgICAgIHZlYzIgYmxlbmRDZW50ZXJGYWN0b3IgPSBhYnMocG9zLXV4eXMueHkpIC8gdXh5cy56O1xcblxcXG4gICAgICAgIGZsb2F0IGFscGhhID0gaXNJbnNpZGUueCAqIGlzSW5zaWRlLnkgKiBwb3cobWF4KGJsZW5kQ2VudGVyRmFjdG9yLngsIGJsZW5kQ2VudGVyRmFjdG9yLnkpLCAzLik7XFxuXFxcbiAgICAgICAgdmVjMyBjb2xvciA9IG1peChjb2xvclZpZGVvLCB2ZWMzKDAuLDAuNiwxLiksIGFscGhhKTtcXG5cXFxuICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KGNvbG9yLDEuKTtcXG5cXFxuICAgICAgfSc7XG4gICAgICAgIGNvbnN0IGdsU2hhZGVyVmVydGV4ID0gdGhpcy5jb21waWxlU2hhZGVyKHNoYWRlclZlcnRleFNvdXJjZSwgdGhpcy5nbC5WRVJURVhfU0hBREVSLCAnVkVSVEVYJyk7XG4gICAgICAgIGNvbnN0IGdsU2hhZGVyRnJhZ21lbnQgPSB0aGlzLmNvbXBpbGVTaGFkZXIoc2hhZGVyRnJhZ21lbnRTb3VyY2UsIHRoaXMuZ2wuRlJBR01FTlRfU0hBREVSLCAnRlJBR01FTlQnKTtcbiAgICAgICAgdGhpcy5nbEhlYWRTZWFyY2hEcmF3U2hhZGVyUHJvZ3JhbSA9IHRoaXMuZ2wuY3JlYXRlUHJvZ3JhbSgpO1xuICAgICAgICB0aGlzLmdsLmF0dGFjaFNoYWRlcih0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtLCBnbFNoYWRlclZlcnRleCk7XG4gICAgICAgIHRoaXMuZ2wuYXR0YWNoU2hhZGVyKHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0sIGdsU2hhZGVyRnJhZ21lbnQpO1xuICAgICAgICB0aGlzLmdsLmxpbmtQcm9ncmFtKHRoaXMuZ2xIZWFkU2VhcmNoRHJhd1NoYWRlclByb2dyYW0pO1xuICAgICAgICBjb25zdCBzYW1wbGVyVmlkZW8gPSB0aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtLCAnc2FtcGxlclZpZGVvJyk7XG4gICAgICAgIHRoaXMuaGVhZFNlYXJjaFVuaWZvcm1YeXMgPSB0aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLmdsSGVhZFNlYXJjaERyYXdTaGFkZXJQcm9ncmFtLCAndXh5cycpO1xuICAgICAgICB0aGlzLmhlYWRTZWFyY2hVbmlmb3JtVmlkZW9UcmFuc2Zvcm1NYXQyID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5nbEhlYWRTZWFyY2hEcmF3U2hhZGVyUHJvZ3JhbSwgJ3ZpZGVvVHJhbnNmb3JtTWF0MicpO1xuICAgICAgICB0aGlzLmdsLnVzZVByb2dyYW0odGhpcy5nbEhlYWRTZWFyY2hEcmF3U2hhZGVyUHJvZ3JhbSk7XG4gICAgICAgIHRoaXMuZ2wudW5pZm9ybTFpKHNhbXBsZXJWaWRlbywgMCk7XG4gICAgfVxuICAgIGRyYXdIZWFkU2VhcmNoKGRldGVjdFN0YXRlKSB7XG4gICAgICAgIC8vIHVuYmluZCB0aGUgY3VycmVudCBGQk8gYW5kIHNldCB0aGUgdmlld3BvcnQgYXMgdGhlIHdob2xlIGNhbnZhczpcbiAgICAgICAgdGhpcy5nbC52aWV3cG9ydCgwLCAwLCB0aGlzLmN2LndpZHRoLCB0aGlzLmN2LmhlaWdodCk7XG4gICAgICAgIC8vIHVzZSB0aGUgaGVhZCBkcmF3IHNoYWRlciBwcm9ncmFtIGFuZCBzeW5jIHVuaWZvcm1zOlxuICAgICAgICB0aGlzLmdsLnVzZVByb2dyYW0odGhpcy5nbEhlYWRTZWFyY2hEcmF3U2hhZGVyUHJvZ3JhbSk7XG4gICAgICAgIHRoaXMuZ2wuYWN0aXZlVGV4dHVyZSh0aGlzLmdsLlRFWFRVUkUwKTtcbiAgICAgICAgdGhpcy5nbC5iaW5kVGV4dHVyZSh0aGlzLmdsLlRFWFRVUkVfMkQsIHRoaXMudmlkZW9UZXh0dXJlKTtcbiAgICAgICAgdGhpcy5nbC51bmlmb3JtM2YodGhpcy5oZWFkU2VhcmNoVW5pZm9ybVh5cywgZGV0ZWN0U3RhdGUueCwgZGV0ZWN0U3RhdGUueSwgZGV0ZWN0U3RhdGUucyk7XG4gICAgICAgIHRoaXMuZ2wudW5pZm9ybU1hdHJpeDJmdih0aGlzLmhlYWRTZWFyY2hVbmlmb3JtVmlkZW9UcmFuc2Zvcm1NYXQyLCBmYWxzZSwgdGhpcy52aWRlb1RyYW5zZm9ybU1hdDIpO1xuICAgICAgICAvLyBkcmF3IHRoZSBzcXVhcmUgbG9va2luZyBmb3IgdGhlIGhlYWRcbiAgICAgICAgLy8gdGhlIFZCTyBmaWxsaW5nIHRoZSB3aG9sZSBzY3JlZW4gaXMgc3RpbGwgYm91bmQgdG8gdGhlIGNvbnRleHRcbiAgICAgICAgLy8gZmlsbCB0aGUgdmlld1BvcnQ6XG4gICAgICAgIHRoaXMuZ2wuZHJhd0VsZW1lbnRzKHRoaXMuZ2wuVFJJQU5HTEVTLCAzLCB0aGlzLmdsLlVOU0lHTkVEX1NIT1JULCAwKTtcbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSBIZWFkQ29udHJvbFNlcnZpY2U7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuaW5pdEhlYWRDb250cm9sID0gZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuY29uc3QgSGVhZENvbnRyb2xTZXJ2aWNlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vSGVhZENvbnRyb2xTZXJ2aWNlXCIpKTtcbnZhciBIZWFkQ29udHJvbFNlcnZpY2VfMiA9IHJlcXVpcmUoXCIuL0hlYWRDb250cm9sU2VydmljZVwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9faW1wb3J0RGVmYXVsdChIZWFkQ29udHJvbFNlcnZpY2VfMikuZGVmYXVsdDsgfSB9KTtcbmNvbnN0IGluaXRIZWFkQ29udHJvbCA9ICgpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBoZWFkQ29udHJvbFNlcnZpY2UgPSBuZXcgSGVhZENvbnRyb2xTZXJ2aWNlXzEuZGVmYXVsdCgnaGVhZC1wcmV2aWV3Jywge1xuICAgICAgICAgICAgb25SZWFkeTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdoZWFkIGNvbnRyb2wgaXMgcmVhZHknKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25DYW1lcmFQZXJzbWlzc2lvbkZhaWxlZDogKCkgPT4gYWxlcnQoJ1RoaXMgZ2FtZSBpcyBoZWFkLWNvbnRyb2xsZWQuIFlvdSBuZWVkIHRvIGVuYWJsZSBjYW1lcmEgdG8gcGxheSB0aGUgZ2FtZS4nKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGhlYWRDb250cm9sU2VydmljZS50b2dnbGUodHJ1ZSk7XG4gICAgICAgIGhlYWRDb250cm9sU2VydmljZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZSBvcGVuZWQnLCAoKSA9PiBjb25zb2xlLmxvZygnbW91c2Ugb3BlbmVkJykpO1xuICAgICAgICBoZWFkQ29udHJvbFNlcnZpY2UuYWRkRXZlbnRMaXN0ZW5lcignbW91c2UgY2xvc2VkJywgKCkgPT4gY29uc29sZS5sb2coJ21vdXNlIGNsb3NlZCcpKTtcbiAgICAgICAgaGVhZENvbnRyb2xTZXJ2aWNlLmFkZEV2ZW50TGlzdGVuZXIoJ2xlZnQnLCAoKSA9PiBjb25zb2xlLmxvZygnbGVmdCcpKTtcbiAgICAgICAgaGVhZENvbnRyb2xTZXJ2aWNlLmFkZEV2ZW50TGlzdGVuZXIoJ3JpZ2h0JywgKCkgPT4gY29uc29sZS5sb2coJ3JpZ2h0JykpO1xuICAgIH0pO1xufTtcbmV4cG9ydHMuaW5pdEhlYWRDb250cm9sID0gaW5pdEhlYWRDb250cm9sO1xuIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pZiAoISgnY3JlYXRlSW1hZ2VCaXRtYXAnIGluIHdpbmRvdykpIHtcbiAgICB3aW5kb3cuY3JlYXRlSW1hZ2VCaXRtYXAgPSBmdW5jdGlvbiAoYmxvYikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgICAgICAgaW1nLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaW1nLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmluaXRJbWFnZUNhcHR1cmUgPSBleHBvcnRzLnRha2VQaG90byA9IHZvaWQgMDtcbnJlcXVpcmUoXCJpbWFnZS1jYXB0dXJlXCIpO1xucmVxdWlyZShcIi4vYml0bWFwUG9seWZpbGwudHNcIik7XG5sZXQgaW1hZ2VDYXB0dXJlO1xubGV0IGlzSW5pdCA9IGZhbHNlO1xuY29uc3QgdGFrZVBob3RvID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgaWYgKCFpbWFnZUNhcHR1cmUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB5aWVsZCBpbWFnZUNhcHR1cmVcbiAgICAgICAgLnRha2VQaG90bygpXG4gICAgICAgIC50aGVuKChibG9iKSA9PiBjcmVhdGVJbWFnZUJpdG1hcChibG9iKSlcbiAgICAgICAgLnRoZW4oKGltYWdlQml0bWFwKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0YWtlUGhvdG9DYW52YXMnKTtcbiAgICAgICAgY2FudmFzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBkcmF3Q2FudmFzKGNhbnZhcywgaW1hZ2VCaXRtYXApO1xuICAgICAgICAvL2NhbnZhcy50b0Jsb2IoYXN5bmMgKGJsb2IpID0+IHtcbiAgICAgICAgLy8gIHRyeSB7XG4gICAgICAgIC8vICAgIGF3YWl0IGNyZWF0ZUZpbGUoYmxvYik7XG4gICAgICAgIC8vICAgIGF3YWl0IHJlYWRGaWxlKCk7XG4gICAgICAgIC8vICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vICAgIHRocm93IGU7XG4gICAgICAgIC8vICB9XG4gICAgICAgIC8vfSk7XG4gICAgfSk7XG59KTtcbmV4cG9ydHMudGFrZVBob3RvID0gdGFrZVBob3RvO1xuZnVuY3Rpb24gZHJhd0NhbnZhcyhjYW52YXMsIGltZykge1xuICAgIGNhbnZhcy53aWR0aCA9IGdldENvbXB1dGVkU3R5bGUoY2FudmFzKS53aWR0aC5zcGxpdCgncHgnKVswXTtcbiAgICBjYW52YXMuaGVpZ2h0ID0gZ2V0Q29tcHV0ZWRTdHlsZShjYW52YXMpLmhlaWdodC5zcGxpdCgncHgnKVswXTtcbiAgICBsZXQgcmF0aW8gPSBNYXRoLm1pbihjYW52YXMud2lkdGggLyBpbWcud2lkdGgsIGNhbnZhcy5oZWlnaHQgLyBpbWcuaGVpZ2h0KTtcbiAgICBsZXQgeCA9IChjYW52YXMud2lkdGggLSBpbWcud2lkdGggKiByYXRpbykgLyAyO1xuICAgIGxldCB5ID0gKGNhbnZhcy5oZWlnaHQgLSBpbWcuaGVpZ2h0ICogcmF0aW8pIC8gMjtcbiAgICBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKS5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKS5kcmF3SW1hZ2UoaW1nLCAwLCAwLCBpbWcud2lkdGgsIGltZy5oZWlnaHQsIHgsIHksIGltZy53aWR0aCAqIHJhdGlvLCBpbWcuaGVpZ2h0ICogcmF0aW8pO1xufVxuY29uc3QgaW5pdEltYWdlQ2FwdHVyZSA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIGlmIChpc0luaXQpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBpc0luaXQgPSB0cnVlO1xuICAgIHJldHVybiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzXG4gICAgICAgIC5nZXRVc2VyTWVkaWEoeyB2aWRlbzogdHJ1ZSB9KVxuICAgICAgICAudGhlbigobWVkaWFTdHJlYW0pID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHRyYWNrID0gbWVkaWFTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXTtcbiAgICAgICAgICAgIGltYWdlQ2FwdHVyZSA9IG5ldyBJbWFnZUNhcHR1cmUodHJhY2spO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2ltYWdlIGNhcHR1cmUgaW5pdGllZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgfSlcbiAgICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgYWxlcnQoJ0ltYWdlIGNhcHR1cmUgaXMgbm90IHN1cHBvcnRlZCBvbiB5b3VyIGRldmljZSA6KCcpO1xuICAgIH0pO1xufSk7XG5leHBvcnRzLmluaXRJbWFnZUNhcHR1cmUgPSBpbml0SW1hZ2VDYXB0dXJlO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuc2F5U29tZXRoaW5nID0gZXhwb3J0cy5zZXRVcFVzZXIgPSBleHBvcnRzLlBIUkFTRVMgPSBleHBvcnRzLmluaXRWb2ljZVNlcnZpY2UgPSB2b2lkIDA7XG5sZXQgVk9JQ0U7XG5jb25zdCBpbml0Vm9pY2VTZXJ2aWNlID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgVk9JQ0UgPSB3aW5kb3cuc3BlZWNoU3ludGhlc2lzLmdldFZvaWNlcygpLmZpbmQoKHsgbGFuZyB9KSA9PiBsYW5nID09PSAnZW4tR0InKTtcbiAgICAgICAgICAgIGlmICghVk9JQ0UpIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLmluaXRWb2ljZVNlcnZpY2UoKS50aGVuKHJlc29sdmUpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd2b2ljZSBpbml0Jyk7XG4gICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICB9LCA1MDApO1xuICAgIH0pO1xufSk7XG5leHBvcnRzLmluaXRWb2ljZVNlcnZpY2UgPSBpbml0Vm9pY2VTZXJ2aWNlO1xuZXhwb3J0cy5QSFJBU0VTID0ge1xuICAgIEhFTExPOiAnYEhpLCAldXNlcm5hbWUlLiBIYXZlIGEgZ29vZCBnYW1lJyxcbiAgICBSSUdIVDogJ0dvb2QgcmlnaHQgdHVybiwgJXVzZXJuYW1lJScsXG59O1xubGV0IHVzZXJOYW1lID0gJyc7XG5jb25zdCBzZXRVcFVzZXIgPSAobmFtZSkgPT4ge1xuICAgIHVzZXJOYW1lID0gbmFtZTtcbn07XG5leHBvcnRzLnNldFVwVXNlciA9IHNldFVwVXNlcjtcbmNvbnN0IHNheVNvbWV0aGluZyA9ICh0ZXh0KSA9PiB7XG4gICAgaWYgKCFWT0lDRSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHV0dGVyYW5jZSA9IG5ldyBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UodGV4dC5yZXBsYWNlKCcldXNlcm5hbWUlJywgdXNlck5hbWUpKTtcbiAgICB1dHRlcmFuY2Uudm9pY2UgPSBWT0lDRTtcbiAgICB1dHRlcmFuY2Uudm9sdW1lID0gMTtcbiAgICB1dHRlcmFuY2UucGl0Y2ggPSAxO1xuICAgIHV0dGVyYW5jZS5yYXRlID0gMTtcbiAgICBzcGVlY2hTeW50aGVzaXMuY2FuY2VsKCk7XG4gICAgc3BlZWNoU3ludGhlc2lzLnNwZWFrKHV0dGVyYW5jZSk7XG59O1xuZXhwb3J0cy5zYXlTb21ldGhpbmcgPSBzYXlTb21ldGhpbmc7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIGRlZmluaXRpb24pIHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGVcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDYwNyk7XG4iXSwic291cmNlUm9vdCI6IiJ9